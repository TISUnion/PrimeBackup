{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Prime Backup Documentation","text":"<p>This is the official documentation of the Prime Backup plugin</p>"},{"location":"cli/","title":"Command Line Interface Tool","text":"<p>The <code>*.pyz</code> file of Prime Backup is not only an MCDR plugin, but also a Command-Line Interface (CLI) tool. You can run it with a valid Python 3 interpreter, provided all requirements are installed</p> <pre><code>$ python3 PrimeBackup.pyz\nusage: PrimeBackup.pyz [-h] [-d DB]\n                       {overview,list,show,import,export,extract,migrate_db}   \n                       ...\n\nPrime Backup v1.7.0 CLI tools\n\noptions:\n  -h, --help            show this help message and exit\n  -d DB, --db DB        Path to the prime_backup.db database file, or path to  \n                        the directory that contains the prime_backup.db        \n                        database file, e.g. \"/my/path/prime_backup.db\", or     \n                        \"/my/path\" (default: ./pb_files)\n\nCommand:\n  {overview,list,show,import,export,extract,migrate_db}\n                        Available commands\n    overview            Show overview information of the database\n    list                List backups\n    show                Show detailed information of the given backup\n    import              Import a backup from the given file. The backup file   \n                        needs to have a backup metadata file\n                        '.prime_backup.meta.json', or the --auto-meta flag     \n                        need to be supplied\n    export              Export the given backup to a single file\n    extract             Extract a single file / directory from a backup\n    migrate_db          Migrate the database to the current version (2)  \n</code></pre> <p>You can append <code>--help</code> to each subcommand to display its help message. For example:</p> <pre><code>$ python3 PrimeBackup.pyz export --help\nusage: PrimeBackup.pyz export [-h] [-f FORMAT] [--fail-soft] [--no-verify]\n                              [--no-meta]\n                              backup_id output\n\nExport the given backup to a single file\n\npositional arguments:\n  backup_id             The ID of the backup to export. Besides an integer     \n                        ID, it can also be \"latest\" and \"latest_non_temp\"      \n  output                The output file name of the exported backup. Example:  \n                        my_backup.tar\n\noptions:\n  -h, --help            show this help message and exit\n  -f FORMAT, --format FORMAT\n                        The format of the output file. If not given, attempt   \n                        to infer from the output file name. Options: tar,      \n                        tar_gz, tar_bz2, tar_xz, tar_zst, zip\n  --fail-soft           Skip files with export failure in the backup, so a     \n                        single failure will not abort the export. Notes: a     \n                        corrupted file might damaged the tar-based file        \n  --no-verify           Do not verify the exported file contents\n  --no-meta             Do not add the backup metadata file\n                        '.prime_backup.meta.json' in the exported file\n</code></pre> <p>As a demonstration, here's an example usage that shows the overview of the database</p> <pre><code>$ python3 PrimeBackup.pyz -d run/pb_files overview\n[2023-12-09 20:31:39,929 INFO] Storage root set to 'run/pb_files'\n[2023-12-09 20:31:39,948 INFO] DB version: 1\n[2023-12-09 20:31:39,948 INFO] Hash method: xxh128\n[2023-12-09 20:31:39,948 INFO] Backup count: 2\n[2023-12-09 20:31:39,948 INFO] Blob count: 9108\n[2023-12-09 20:31:39,949 INFO] Blob stored size sum: 5158485126 (4.80GiB)\n[2023-12-09 20:31:39,949 INFO] Blob raw size sum: 8295323157 (7.73GiB)\n[2023-12-09 20:31:39,949 INFO] File count: 22010\n[2023-12-09 20:31:39,949 INFO] File raw size sum: 16610326638 (15.47GiB)\n</code></pre>"},{"location":"command/","title":"MCDR Commands","text":"<p>Note</p> <p>This document will assume that you use <code>!!pb</code> as the prefix for MCDR commands</p>"},{"location":"command/#welcome","title":"Welcome","text":"<p>The root <code>!!pb</code> command shows the welcome page</p> <p></p>"},{"location":"command/#command-list-overview","title":"Command list overview","text":"<p>Use <code>!!pb help</code> to have a full view of all commands</p> <p></p>"},{"location":"command/#todo","title":"TODO","text":"<p>TODO: More command usages</p>"},{"location":"config/","title":"Configuration","text":""},{"location":"config/#configuration-explanation","title":"Configuration Explanation","text":"<p>Here's a full explanation on the config file, if you want to have a deep dive on it</p>"},{"location":"config/#root-config","title":"Root config","text":"<p>This is the root json object in the config files</p> <pre><code>{\n    \"enabled\": true,\n    \"debug\": false,\n    \"storage_root\": \"./pb_files\",\n    \"concurrency\": 1,\n\n    // Subconfigs. See the following sections\n    \"command\": {/* Command config */},\n    \"server\": {/* Server config */},\n    \"backup\": {/* Backup config */},\n    \"scheduled_backup\": {/* Scheduled backup config */},\n    \"prune\": {/* Prune config */},\n    \"database\": {/* Database config */}\n}\n</code></pre>"},{"location":"config/#enabled","title":"enabled","text":"<p>The switch of the plugin. Set to false to disable the plugin</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>false</code></li> </ul>"},{"location":"config/#debug","title":"debug","text":"<p>The debug switch. Set to true to enable debug logging</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>false</code></li> </ul>"},{"location":"config/#storage_root","title":"storage_root","text":"<p>The root directory for Prime Backup to store all data files</p> <p>The path is related to the work directory of MCDR. By default, the root directory will be <code>/path/to/mcdr_root/pb_files</code></p> <ul> <li>Type: <code>str</code></li> <li>Default: <code>\"./pb_files\"</code></li> </ul>"},{"location":"config/#concurrency","title":"concurrency","text":"<p>The maximum concurrency to be used during all task and action executions</p> <p>Setting the concurrency to a higher value (e.g. <code>4</code>) can speed up actions, such as backup creation and restoration, but it will also consume more CPU during these actions</p> <p>A value of <code>0</code> means using 50% of the CPU</p> <ul> <li>Type: <code>int</code></li> <li>Default: <code>1</code></li> </ul>"},{"location":"config/#command-config","title":"Command config","text":"<pre><code>{\n    \"prefix\": \"!!pb\",\n    \"permission\": {\n        \"root\": 0,\n        \"abort\": 1,  \n        \"back\": 2,\n        \"confirm\": 1,\n        \"database\": 4,\n        \"delete\": 2,\n        \"delete_range\": 3,\n        \"export\": 4,\n        \"list\": 1,\n        \"make\": 1,\n        \"prune\": 3,\n        \"rename\": 2,\n        \"show\": 1,\n        \"tag\": 3\n    },\n    \"confirm_time_wait\": \"1m\",\n    \"backup_on_restore\": true,\n    \"restore_countdown_sec\": 10\n}\n</code></pre>"},{"location":"config/#prefix","title":"prefix","text":"<p>The prefix of all Prime Backup commands in MCDR. Normally you don't need to change it</p> <ul> <li>Type: <code>str</code></li> <li>Default: <code>\"!!pb\"</code></li> </ul>"},{"location":"config/#permission","title":"permission","text":"<p>Minimum required MCDR permission level for all subcommands</p> <p>It's a mapping that maps from string to integer, storing permission level requirements for all subcommands. If a subcommand is not in the mapping, it will use level 1 as the default permission requirement</p> <p>For example, in the default config, <code>\"back\"</code> is mapped to <code>2</code>,  which means that the <code>!!pb back</code> command requires permission level &gt;= 2 to execute</p> <p>Specially, <code>\"root\"</code> refers to the root command, which is usually <code>!!pb</code></p> <ul> <li>Type: <code>Dict[str, int]</code></li> </ul>"},{"location":"config/#confirm_time_wait","title":"confirm_time_wait","text":"<p>Some of the MCDR commands requires user to enter <code>!!pb confirm</code> to continue. This config defines the maximum time wait for those commands</p> <p>When time exceeds, the command will be cancelled</p> <ul> <li>Type: <code>Duration</code></li> <li>Default: <code>\"1m\"</code></li> </ul>"},{"location":"config/#backup_on_restore","title":"backup_on_restore","text":"<p>If an automatically backup should be made before restoring the world to a given backup. These automatic pre-restore backups are temporary backups</p> <p>This is a safeguard prepared for those idiot users</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>true</code></li> </ul>"},{"location":"config/#restore_countdown_sec","title":"restore_countdown_sec","text":"<p>The duration in seconds of the countdown during backup restoring, before closing the Minecraft server</p> <ul> <li>Type: <code>int</code></li> <li>Default: <code>10</code></li> </ul>"},{"location":"config/#server-config","title":"Server config","text":"<p>Options on how to interact with the Minecraft server</p> <pre><code>{\n    \"turn_off_auto_save\": true,\n    \"commands\": {\n        \"save_all_worlds\": \"save-all flush\",\n        \"auto_save_off\": \"save-off\",\n        \"auto_save_on\": \"save-on\"\n    },\n    \"saved_world_regex\": [\n        \"Saved the game\",\n        \"Saved the world\"\n    ],\n    \"save_world_max_wait\": \"10m\"\n}\n</code></pre>"},{"location":"config/#turn_off_auto_save","title":"turn_off_auto_save","text":"<p>If the autosave should be turned off before making a backup</p> <p>Since turning off autosave provide a consistent view to the Minecraft world files, it's suggested to set this option to <code>true</code></p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>true</code></li> </ul>"},{"location":"config/#commands","title":"commands","text":"<p>A set of Minecraft commands to be used by Prime Backup. Current they're only used during a backup creation</p> <p>Timing of what Prime Backup will do during a backup creation</p> <ol> <li>Turn off autosave with command stored in subconfig <code>auto_save_off</code>, if config <code>turn_off_auto_save</code> is true and <code>auto_save_off</code> is a non-empty string</li> <li>Save all worlds with command stored in subconfig <code>save_all_worlds</code>, if <code>save_all_worlds</code> is a non-empty string</li> <li>Wait until all words are saved, i.e. the server outputs matches one of the regex in config <code>saved_world_regex</code>. If <code>saved_world_regex</code> is empty, then not waiting will be performed </li> <li>Create the backup</li> <li>Turn on autosave with command stored in subconfig <code>auto_save_on</code>, if config <code>turn_off_auto_save</code> is true and <code>auto_save_on</code> is a non-empty string</li> </ol>"},{"location":"config/#saved_world_regex","title":"saved_world_regex","text":"<p>A list of regular expressions for identifying whether the server has already saved the world</p> <p>Note</p> <p>The regex patterns will perform a full match check on the server info content</p> <ul> <li>Type: <code>List[re.Pattern]</code></li> </ul>"},{"location":"config/#save_world_max_wait","title":"save_world_max_wait","text":"<p>The maximum waiting time to before world saving is complete during backup creation</p> <ul> <li>Type: <code>Duration</code></li> <li>Default: <code>\"10m\"</code></li> </ul>"},{"location":"config/#backup-config","title":"Backup config","text":"<p>Configs on how the backup is made</p> <pre><code>{\n    \"source_root\": \"./server\",\n    \"source_root_use_mcdr_working_directory\": false,\n    \"targets\": [\n        \"world\"\n    ],\n\n    \"ignored_files\": [],\n    \"ignore_patterns\": [\n       \"**/session.lock\"\n    ],\n    \"retain_patterns\": [],\n    \"follow_target_symlink\": false,\n    \"reuse_stat_unchanged_file\": false,\n    \"creation_skip_missing_file\": false,\n    \"creation_skip_missing_file_patterns\": [\n       \"**\"\n    ],\n\n    \"hash_method\": \"xxh128\",\n    \"compress_method\": \"zstd\",\n    \"compress_threshold\": 64,\n\n    \"fileset_allocate_lookback_count\": 2\n}\n</code></pre>"},{"location":"config/#source_root","title":"source_root","text":"<p>The root directory where the backup / restore operations happen</p> <p>Usually this should be the same as the server working_directory option of MCDR,  i.e. the <code>server</code> directory by default</p> <ul> <li>Type: <code>str</code></li> <li>Default: <code>\"./server\"</code></li> </ul>"},{"location":"config/#source_root_use_mcdr_working_directory","title":"source_root_use_mcdr_working_directory","text":"<p>If set to <code>true</code>, use the server working directory of MCDR as the value of source_root, and the value of key source_root in the config will be ignored</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>false</code></li> </ul>"},{"location":"config/#targets","title":"targets","text":"<p>The target files / directories to make backups. They can also be gitignore flavor patterns </p> <p>Usually you need to add the name(s) of your world folder(s) here</p> <p>For example, for bukkit-like servers that split the world dimensions, you might want to use:</p> <pre><code>\"targets\": [\n    \"world\",\n    \"world_nether\",\n    \"world_the_end\"\n]\n</code></pre> <p>Or use this wildcard pattern that matches everything whose name starts with \"world\" in the source_root directory</p> <pre><code>\"targets\": [\n    \"world*\"\n]\n</code></pre> <ul> <li>Type: <code>List[str]</code></li> </ul> <p>Changelog:</p> <ul> <li>v1.10.0: Support gitignore flavor patterns</li> </ul>"},{"location":"config/#ignored_files","title":"ignored_files","text":"<p>Warning</p> <p>Deprecated since v1.8.0. Use ignore_patterns instead</p> <p>Danger</p> <p>Files matched by <code>ignored_files</code> are also not considered during restore. After the restore, only those files that were backed up will exist in the target folders. Only use this option for useless files.</p> <p>A list of file / directory names to be ignored during backup</p> <p>If the name string starts with <code>*</code>, then it will ignore files with name ending with specific string,  e.g. <code>*.test</code> makes all files ends with <code>.test</code> be ignored, like <code>a.test</code></p> <p>If the name string ends with <code>*</code>, then it will ignore files with name starting with specific string,  e.g. <code>temp*</code>  makes all files starts with <code>temp</code> be ignored, like <code>tempfile</code></p> <ul> <li>Type: <code>List[str]</code></li> </ul>"},{"location":"config/#ignore_patterns","title":"ignore_patterns","text":"<p>Danger</p> <p>Files matched by <code>ignore_patterns</code> are also not considered during restore. After the restore, only those files that were backed up will exist in the target folders. Only use this option for useless files.</p> <p>A list of gitignore-style pattern strings. Files or directories matching these patterns will be ignored during backup creation</p> <p>The root path for pattern matching is source_root. For example, if <code>source_root</code> is <code>server</code>, then the pattern <code>world/trash*.obj</code> will match <code>server/world/trash1.obj</code></p> <p>It contains a <code>**/session.lock</code> pattern by default, which matches files named <code>session.lock</code> in any location. It's used to solve the backup failure problem caused by <code>session.lock</code> being occupied by the server in Windows OS</p> <ul> <li>Type: <code>List[str]</code></li> </ul>"},{"location":"config/#retain_patterns","title":"retain_patterns","text":"<p>A list of gitignore-style pattern strings. Files or directories matching these patterns will be ignored during backup creation but retained when restoring a backup</p> <p>The root path for pattern matching is source_root. For example, if <code>source_root</code> is <code>server</code>, then the pattern <code>world/trash*.obj</code> will match <code>server/world/trash1.obj</code></p> <p>This option is recommended for files that do not need to be backed up but should still be kept, such as large databases used by mods or rendered outputs of web maps</p> Option Purpose Ignored on Backup Retained on Restore ignore_patterns Ignore &amp; discard unnecessary data \u221a \u00d7 retain_patterns Ignore but retain unneeded backup data \u221a \u221a <ul> <li>Type: <code>List[str]</code></li> </ul>"},{"location":"config/#follow_target_symlink","title":"follow_target_symlink","text":"<p>When set to <code>true</code>, for backup targets that are symbolic links, Prime Backup will not only create backups for them, but also include the link targets of the symbolic links in the backup targets.</p> <p>For example, in the following symbolic link graph:</p> <pre><code>world --&gt; foo --&gt; bar\n^\nbackup target\n</code></pre> <p>Prime Backup will save not only the <code>world</code> symbolic link, but also the <code>foo</code> symbolic link and the final <code>bar</code> directory</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>false</code></li> </ul>"},{"location":"config/#reuse_stat_unchanged_file","title":"reuse_stat_unchanged_file","text":"<p>When enabled, during backup creation, Prime Backup will try to directly reuse files from the previous backup  whose attributes (size, mtime, mode, etc.) have not changed. No file hash checking will be done on these attributes-unchanged files</p> <p>Prime Backup will check the following file attributes. Files with the exact same attributes will be considered unchanged:</p> <ul> <li>File path</li> <li>File size</li> <li>File mode bits</li> <li>File owner's UID and GID</li> <li>File modification time (precision: microseconds)</li> </ul> <p>If you want the maximum possible backup creation speed, you can try enabling this option. However, this also introduces the potential risk of incomplete backups</p> <p>Warning</p> <p>Please only enable this option after ensuring that the server's operating system and file system are functioning properly and stably.  Otherwise, if issues such as system time rollback or abnormal file system metadata occur, some of the files might  have their content changed but keep their stat unchanged, and then Prime Backup will create an incomplete backup</p> <p>Tip</p> <p>Unless you really need this backup speed boost or the system disk read performance is too low, it is not recommended to enable this option. Prime Backup is already fast enough</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>false</code></li> </ul>"},{"location":"config/#creation_skip_missing_file","title":"creation_skip_missing_file","text":"<p>In certain scenarios, server plugins / mods do not respect to the <code>/save off</code> command, and may still delete files when PB is creating a backup. These missing files can cause the backup operation to fail due to file not found errors</p> <p>If you want to ignore such \"file not found\" errors in this scenario, you can enable this option</p> <p>See also: the creation_skip_missing_file_patterns option, which controls the scope of files for which \"file not found\" errors can be ignored</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>false</code></li> </ul>"},{"location":"config/#creation_skip_missing_file_patterns","title":"creation_skip_missing_file_patterns","text":"<p>A list of gitignore flavor pattern strings used in combination with creation_skip_missing_file option</p> <p>During backup creation, any \"file not found\" errors occurring for files matched by this option will be ignored</p> <p>The default value is <code>[\"**\"]</code>, which matches everything. It's suggested to limit it to those volatile files only, e.g. <code>[\"trash/*.tmp\"]</code></p> <ul> <li>Type: <code>List[str]</code></li> </ul>"},{"location":"config/#hash_method","title":"hash_method","text":"<p>The algorithm to hash the files. Available options: <code>\"xxh128\"</code>, <code>\"sha256\"</code>, <code>\"blake3\"</code></p> Hash Method Description Speed cryptographically secure <code>xxh128</code> A extremely fast, high-quality 128bit non-cryptographic hash algorithm. Recommend to use, unless you want theoretic extreme safety on hackers \u2605\u2605\u2605\u2605\u2605 <code>sha256</code> A cryptographically secure and widely used 256bit hash algorithm. It's slower than xxh128, but the speed could be acceptable using cpu with hardware acceleration \u2605\u2605 <code>blake3</code> A cryptographically secure and speedy 256bit hash algorithm. It's still slower than xxh128, but is much faster than sha256 \u2605\u2605\u2605\u2606 <p>Note</p> <p>If you want to use <code>blake3</code> as the hash method, you need to install the <code>blake3</code> python library manually. It's not included in the default requirement list, because in some environments it might require rust runtime to build and install</p> <pre><code>pip3 install blake3\n</code></pre> <ul> <li>Type: <code>str</code></li> <li>Default: <code>\"xxh128\"</code></li> </ul>"},{"location":"config/#compress_method","title":"compress_method","text":"<p>The method to compress files stored in a backup</p> Compress Method Description Speed Compress rate <code>plain</code> No compression, copy the file directly. Can utilize the copy-on-write technique if the file system supports that \u2605\u2605\u2605\u2605\u2605 \u2606 <code>gzip</code> The gzip library based on zlib. The format same as a <code>.gz</code> file \u2605\u2605 \u2605\u2605\u2605\u2605 <code>lzma</code> The LZMA algorithm. The same format as a <code>.xz</code> file. Provides the best compression, but the speed is very slow \u2606 \u2605\u2605\u2605\u2605\u2605 <code>zstd</code> The Zstandard algorithm. A good balance between speed and compression rate. Recommend to  use \u2605\u2605\u2605\u2606 \u2605\u2605\u2605\u2605 <code>lz4</code> The LZ4 algorithm. Faster than Zstandard, and even much faster in decompression, but with a lower compression rate \u2605\u2605\u2605\u2605 \u2605\u2605\u2606 <p>Warning</p> <p>Changing <code>compress_method</code> will only affect new files in new backups (i.e., new blobs)</p> <p>Note</p> <p>If you want to use <code>lz4</code> as the compress method, you need to install the <code>lz4</code> python library manually</p> <pre><code>pip3 install lz4\n</code></pre> <ul> <li>Type: <code>str</code></li> <li>Default: <code>\"zstd\"</code></li> </ul>"},{"location":"config/#compress_threshold","title":"compress_threshold","text":"<p>For files with a size less than the <code>compress_threshold</code>, no compression will be applied. They will be stored in the <code>plain</code> format.</p> <p>Warning</p> <p>Changing <code>compress_threshold</code> will only affect new files in new backups (i.e., new blobs)</p> <ul> <li>Type: int</li> <li>Default: <code>64</code></li> </ul>"},{"location":"config/#scheduled-backup-config","title":"Scheduled backup config","text":"<p>Configuration of the scheduled backup feature from Prime Backup</p> <p>It's for creating a backup periodically and automatically for your server</p> <pre><code>{\n    \"enabled\": false,\n    \"interval\": \"12h\",\n    \"crontab\": null,\n    \"jitter\": \"10s\",\n    \"reset_timer_on_backup\": true,\n    \"require_online_players\": false,\n    \"require_online_players_blacklist\": []\n}\n</code></pre>"},{"location":"config/#enabled-interval-crontab-jitter","title":"enabled, interval, crontab, jitter","text":"<p>See the crontab job setting section</p>"},{"location":"config/#reset_timer_on_backup","title":"reset_timer_on_backup","text":"<p>If the schedule timer should be reset on each manual backup</p> <p>This feature is only effective when the job is in interval mode</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>true</code></li> </ul>"},{"location":"config/#require_online_players","title":"require_online_players","text":"<p>If set to <code>true</code>, scheduled backups will only run normally when players are present on the server. If all players logged out, then after the next scheduled backup is created, no more scheduled backup will be created</p> <p>Example timeline:</p> <pre><code>flowchart LR\n    subgraph g1[Players online]\n    b1[8:00\\ncreated] --&gt; b2\n    end\n\n    subgraph g2[No players online]\n    b2[9:00\\ncreated] --&gt; b3\n    b3[10:00\\ncreated] --&gt; b4:::disabled\n    b4[11:00\\nskipped] --&gt; b5:::disabled\n    end\n\n    subgraph g3[Players online]\n    b5[12:00\\nskipped] --&gt; b6\n    b6[13:00\\ncreated]\n    end\n\n    classDef disabled fill:#eee,stroke:#aaa,color:gray\n</code></pre> <p>Note</p> <p>This feature requires the Prime Backup plugin to be loaded before the server starts. It's needed so Prime Backup can calculate the online player count correctly</p> <p>If the Prime Backup plugin is loaded when the server is already running,  the player detection feature will be disabled, as if require_online_players is set to <code>false</code></p> <p>Exception: If MinecraftDataAPI plugin is present, then Prime Backup will utilize its API to query online player dynamically, and the requirement mentioned above no longer exists</p> <p>Note</p> <p>The player detection logic might not work in heavily modded servers that behave too differently from vanilla servers</p> <p>Tip</p> <p>Since Prime Backup supports file deduplication and highly customizable prune config, having backups even when no player is on the server will not result in excessive space usage</p> <ul> <li>Type: <code>bool</code></li> <li>Default: <code>false</code></li> </ul>"},{"location":"config/#require_online_players_blacklist","title":"require_online_players_blacklist","text":"<p>In require_online_players, when determining if there are players online,  the list of regex patterns for player names to be excluded</p> <p>If you want the server to still be considered as having no players online and thus not perform scheduled backups, when only certain players are online, you can utilize this option</p> <p>Example:</p> <pre><code>\"require_online_players_blacklist\": [\n    \"bot_.*\",  // Matches any player name starting with \"bot_\"\n    \"Steve\"    // Matches the player name \"Steve\"\n]\n</code></pre> <p>Note</p> <p>The regex patterns will perform full match checks on the player names</p> <p>Matches are case-insensitive</p> <ul> <li>Type: <code>List[re.Pattern]</code></li> <li>Default: <code>[]</code></li> </ul>"},{"location":"config/#prune-config","title":"Prune config","text":"<p>The backup prune feature from Prime Backup enables automatically backup cleanup for the backup storage</p> <pre><code>{\n    \"enabled\": true,\n    \"interval\": \"3h\",\n    \"crontab\": null,\n    \"jitter\": \"20s\",\n    \"timezone_override\": null,\n    \"regular_backup\": {\n        \"enabled\": false,\n        \"max_amount\": 0,\n        \"max_lifetime\": \"0s\",\n        \"last\": -1,\n        \"hour\": 0,\n        \"day\": 0,\n        \"week\": 0,\n        \"month\": 0,\n        \"year\": 0\n    },\n    \"temprory_backup\": {\n        \"enabled\": true,\n        \"max_amount\": 10,\n        \"max_lifetime\": \"30d\",\n        \"last\": -1,\n        \"hour\": 0,\n        \"day\": 0,\n        \"week\": 0,\n        \"month\": 0,\n        \"year\": 0\n    }\n}\n</code></pre> <p>It contains 2 prune settings for 2 kinds of backups:</p> <ul> <li><code>regular_backup</code>: For regular backups, i.e. not temporary backups</li> <li><code>temporary_backup</code>: For temporary backups, e.g. pre-restore backups</li> </ul> <p>Each prune settings describes the retain policy in detailed</p> <p>Prime Backup use the following steps to decide what to delete and what to retain:</p> <ol> <li>Use <code>last</code>, <code>hour</code>, <code>day</code>, <code>week</code>, <code>month</code>, <code>year</code>,    based on the PBS policy, filter out backups to be deleted / retained</li> <li>Use <code>max_amount</code> and <code>max_lifetime</code> to filter out those old and expired backups from the to-be-retained backups from step 1</li> <li>Collected those to-be-deleted backups from the 2 steps above, delete them one by one</li> </ol> <p>The final prune result will be stored in the log file at <code>logs/prune.log</code> within the storage root</p> prune.log<pre><code>Backup #147 at 2023-12-10 21:49:09: keep=True reason=keep last 1\nBackup #146 at 2023-12-10 21:36:10: keep=True reason=keep last 2\nBackup #145 at 2023-12-10 21:26:25: keep=True reason=keep last 3\nBackup #144 at 2023-12-10 21:21:22: keep=False reason=superseded by 145 (hour)\nBackup #143 at 2023-12-10 21:16:19: keep=False reason=superseded by 145 (hour)\nBackup #142 at 2023-12-10 21:11:14: keep=False reason=superseded by 145 (hour)\nBackup #141 at 2023-12-10 21:05:06: keep=False reason=superseded by 145 (hour)\nBackup #140 at 2023-12-10 21:00:03: keep=True reason=protected\nBackup #139 at 2023-12-10 20:55:01: keep=True reason=keep hour 1\nBackup #138 at 2023-12-10 20:49:57: keep=False reason=superseded by 139 (hour)\nBackup #137 at 2023-12-10 20:44:53: keep=False reason=superseded by 139 (hour)\nBackup #136 at 2023-12-10 20:39:45: keep=False reason=superseded by 139 (hour)\nBackup #135 at 2023-12-10 20:34:41: keep=False reason=superseded by 139 (hour)\nBackup #128 at 2023-12-10 19:59:06: keep=True reason=keep hour 2\nBackup #116 at 2023-12-10 18:56:14: keep=True reason=keep hour 3\nBackup #104 at 2023-12-10 17:55:35: keep=False reason=superseded by 116 (day)\nBackup #22 at 2023-12-09 23:59:53: keep=True reason=keep day 1\n</code></pre>"},{"location":"config/#max_amount","title":"max_amount","text":"<p>Defines the maximum number of backups to keep, e.g. <code>10</code> means to keep a maximum of 10 of the latest backups</p> <p>Set it to <code>0</code> for unlimited</p> <ul> <li>Type: <code>int</code></li> </ul>"},{"location":"config/#max_lifetime","title":"max_lifetime","text":"<p>Defines the maximum retention duration for all backups. Backups exceeding this duration will be pruned and deleted.</p> <p>Set it to <code>0s</code> for no time limit</p> <ul> <li>Type: <code>Duration</code></li> </ul>"},{"location":"config/#last-hour-day-week-month-year","title":"last, hour, day, week, month, year","text":"<p>A set of PBS-style prune options, to describe how backups are deleted/retained</p> <p>See the prune simulator for more explanations on these options</p> <p>The prune simulator can also be used to simulate the retain policy</p> <p>Notes: Value <code>0</code> means no retention on this period; Value <code>-1</code> means unlimited backups can be retained on this period, equivalent to setting to a very large value</p> <ul> <li>Type: <code>int</code></li> </ul>"},{"location":"config/#enabled-interval-crontab-jitter_1","title":"enabled, interval, crontab, jitter","text":"<p>See the crontab job setting section</p>"},{"location":"config/#timezone_override","title":"timezone_override","text":"<p>An optional timezone override during the prune calculation. By default (<code>null</code> value), Prime Backup will use the local timezone</p> <p>Example values: <code>null</code>, <code>\"Asia/Shanghai\"</code>, <code>\"US/Eastern\"</code>, <code>\"Europe/Amsterdam\"</code></p> <ul> <li>Type: <code>Optional[str]</code></li> <li>Default: <code>null</code></li> </ul>"},{"location":"config/#database-config","title":"Database config","text":"<p>Configurations for the SQLite database, used by Prime Backup</p> <pre><code>{\n    \"compact\": {\n        \"enabled\": true,\n        \"interval\": null,\n        \"crontab\": \"0 7 * * 0\",\n        \"jitter\": \"1m\"\n    },\n    \"backup\": {\n        \"enabled\": true,\n        \"interval\": null,\n        \"crontab\": \"0 6 * * 0\",\n        \"jitter\": \"1m\"\n    }\n}\n</code></pre> <p>Subconfig <code>compact</code> and <code>backup</code> describe the crontab jobs on the database</p>"},{"location":"config/#compact","title":"compact","text":"<p>The database compact job</p> <p>It performs the VACUUM command on the database, to compact the database file and free up unused space</p>"},{"location":"config/#backup","title":"backup","text":"<p>The database backup job</p> <p>By default, Prime Backup creates backups for the database in the <code>db_backup</code> directory within the storage root periodically, just in case something wrong happens</p> <p>Database backups are stored with the <code>.tar.xz</code> format, and won't take up much space</p>"},{"location":"config/#enabled-interval-crontab-jitter_2","title":"enabled, interval, crontab, jitter","text":"<p>See the crontab job setting section</p>"},{"location":"config/#subconfig-types","title":"Subconfig types","text":""},{"location":"config/#crontab-job-setting","title":"crontab job setting","text":"<p>Setting of a crontab job to describe when the job executes. There are 2 valid mode</p> <ul> <li>interval mode: Execute the job at given time interval. The first execution also has to wait for the given interval</li> <li>crontab mode: Execute the job at specific time, described by a crontab string</li> </ul> <p>If the job is enabled, you must choose one of the above modes and set the related config values correctly</p> <pre><code>// Example\n{\n    \"enabled\": true,\n    \"interval\": \"1h\",\n    \"crontab\": null,\n    \"jitter\": \"10s\"\n}\n</code></pre>"},{"location":"config/#enabled_1","title":"enabled","text":"<p>The switch for the job. Set to  <code>true</code> to enable the crontab job; Set to <code>false</code> to disable the crontab job</p> <ul> <li>Type: <code>bool</code></li> </ul>"},{"location":"config/#interval","title":"interval","text":"<p>Used in interval mode. The time interval between 2 jobs</p> <p>It should be <code>null</code> if the job is not in interval mode</p> <ul> <li>Type: <code>Optional[str]</code></li> </ul>"},{"location":"config/#crontab","title":"crontab","text":"<p>Used in crontab mode. The crontab string</p> <p>You can use https://crontab.guru/ to create a crontab string</p> <p>It should be <code>null</code> if the job is not in crontab mode</p> <ul> <li>Type: <code>Optional[str]</code></li> </ul>"},{"location":"config/#jitter","title":"jitter","text":"<p>The jitter between 2 scheduled backup jobs</p> <p>The actual execution time for the next job will be shifted randomly with <code>[0, jitter]</code></p> <p>Set it to <code>\"0s\"</code> for no jitter</p> <ul> <li>Type: <code>str</code></li> </ul>"},{"location":"config/#special-value-types","title":"Special value types","text":""},{"location":"config/#duration","title":"Duration","text":"<p>Describes a time duration length with a string, e.g. <code>\"3s\"</code>, <code>\"15m\"</code></p> <p>A Duration consists of two parts: the number, and the time unit.</p> <p>For the number part, it can be an integer, or a float</p> <p>For the unit part, see the following table:</p> Unit Description Equals to Value in seconds <code>ms</code> millisecond 0.001 second 0.001 <code>s</code>, <code>sec</code> second 1 second 1 <code>m</code>, <code>min</code> minute 60 seconds 60 <code>h</code>, <code>hour</code> hour 60 minutes 3600 <code>d</code>, <code>day</code> day 24 hours 86400 <code>mon</code>, <code>month</code> month 30 days 2592000 <code>y</code>, <code>year</code> year 365 days 31536000"},{"location":"quick_start/","title":"Quick Start","text":""},{"location":"quick_start/#install","title":"Install","text":""},{"location":"quick_start/#prepare-mcdr","title":"Prepare MCDR","text":"<p>Prime Backup is a MCDReforged plugin, and it requires <code>mcdreforged&gt;=2.12</code> to work </p> <p>To install / update MCDReforged, you can run:</p> <pre><code>pip3 install mcdreforged&gt;=2.12 -U\n</code></pre> <p>See MCDR document for more information</p>"},{"location":"quick_start/#install-python-requirements","title":"Install Python requirements","text":"<p>Prime Backup requires a few python libraries to run, they are all listed in the requirements.txt at the GitHub repository root</p> requirements.txt<pre><code>APScheduler&gt;=3.8,&lt;4\nSQLAlchemy&gt;=2\nmcdreforged&gt;=2.12.0\npathspec\npsutil\npydantic&gt;=2\npytz\ntyping_extensions\nxxhash&gt;=3\nzstandard\n</code></pre> <p>Use command <code>pip3 install -r requirements.txt</code> to install all required Python requirements</p> <p>You can also use the following command to install all required python packages for the latest Prime Backup in one step</p> <pre><code>pip3 install -r https://tisunion.github.io/PrimeBackup/requirements.txt\n</code></pre>"},{"location":"quick_start/#optional-requirements","title":"Optional requirements","text":"<p>Some Prime Backup features requires python libraries that does not listed in the requirements.txt, because it might take you some effort to install in some environments</p> <p>If you want to have full features of Prime Backup, you can use the following command in advanced:</p> <pre><code>pip3 install -r https://tisunion.github.io/PrimeBackup/requirements.optional.txt\n</code></pre> <p>These optional requirements are also stored in the requirements.optional.txt</p> requirements.optional.txt<pre><code># hash\nblake3\n\n# compress\nlz4\n</code></pre>"},{"location":"quick_start/#install-the-plugin","title":"Install the plugin","text":"<p>Download Prime Backup from GitHub Release,  and place it into the plugin folder of MCDR. Perform a MCDR plugin reload</p>"},{"location":"quick_start/#configure","title":"Configure","text":"<p>Before using Prime Backup, you need to configure its config file correctly</p> <p>Don't worry, for most of the config options, you can use the default values.  But there are a few options that you might still want to take a look at</p>"},{"location":"quick_start/#location","title":"Location","text":"<p>When Prime Backup is firstly loaded by MCDR, it will automatically generate the config file, with the location at <code>config/prime_backup/config.json</code></p> <pre><code>mcdr_root/\n\u2514\u2500\u2500 config/\n    \u2514\u2500\u2500 prime_backup/\n        \u2514\u2500\u2500 config.json       &lt;-------------\n</code></pre> <p>It's a json file, so you need to follow the json syntax to edit it</p>"},{"location":"quick_start/#necessary-configs","title":"Necessary configs","text":"<p>Here are a few important things in the config file:</p> <ol> <li> <p>Backup target, i.e. the directories / files you want to create backup on.      You need to change the <code>\"world\"</code> in the <code>targets</code> array to your world directory name</p> <pre><code>// root config\n{\n    // ...\n    \"backup\": {\n        \"targets\": [\n            \"world\"\n        ],\n    }\n    // ...\n}\n</code></pre> <p>In addition, if you are using bukkit-like servers that split the world dimensions, you might want to use something like this:</p> <pre><code>\"targets\": [\n    \"world\",\n    \"world_nether\",\n    \"world_the_end\"\n]\n</code></pre> </li> <li> <p>The methods to calculate / store all backup data</p> <pre><code>// root config\n{\n    // ...\n    \"backup\": {\n        \"hash_method\": \"xxh128\",\n        \"compress_method\": \"zstd\",\n    }\n    // ...\n}\n</code></pre> <ul> <li> <p><code>hash_method</code>: The algorithm to hash the files. Available options: \"xxh128\", \"sha256\", \"blake3\"</p> <ul> <li><code>\"xxh128\"</code>: A extremely fast, high-quality non-cryptographic hash algorithm.    Recommend to use, unless you want theoretic extreme safety on hackers</li> <li><code>\"sha256\"</code>: A cryptographically secure and widely used hash algorithm</li> <li><code>\"blake3\"</code>: A cryptographically secure and speedy hash algorithm. Much faster than sha256, but still slower than xxh128   Recommend to use, don't forget to install the <code>blake3</code> Python requirement</li> </ul> </li> <li> <p><code>compress_method</code>: The way the backups get compressed. Common suggestions:</p> <ul> <li><code>\"plain\"</code>: No compression. Use this if you want the maximum operation speed</li> <li><code>\"zstd\"</code>: Fast and good compression algorithm. Recommend to use you want to save some disk spaces</li> </ul> </li> </ul> <p>Note</p> <p>If you want to use <code>blake3</code> as the hash method, you need to install the <code>blake3</code> python library manually. It's not included in the default requirement list, because in some environments it might require rust runtime to build and install</p> <pre><code>pip3 install blake3\n</code></pre> <p>Note</p> <p>It is recommended that you set these two options wisely from the start</p> <p>Although you can still use the <code>!!pb database migrate_xxx</code> command in MCDR to migrate the compression method and hash method of existing backups, completing the migration might require a certain amount of time and disk space</p> </li> <li> <p>Enable the plugin. Set the <code>enabled</code> option in the root object to <code>true</code>. It should be at the top of the whole config file</p> <pre><code>// root config\n{\n    \"enabled\": true\n    // ...\n}\n</code></pre> </li> <li> <p>Reload the plugin with MCDR command</p> <pre><code>!!MCDR plugin reload prime_backup\n</code></pre> </li> </ol> <p>Now Prime Backup should start working</p>"},{"location":"quick_start/#use","title":"Use","text":"<p>Enter <code>!!pb</code> in the MCDR console, or in game, you should see the welcome page as shown below</p> <p></p>"},{"location":"concept/","title":"Concepts","text":"<p>Prime Backup concepts</p> <ul> <li>Backup Tags</li> <li>Storage Structure</li> </ul>"},{"location":"concept/backup_tag/","title":"Backup Tag","text":"<p>TODO</p>"},{"location":"concept/storage_structure/","title":"Storage Structure","text":"<pre><code>graph TB\n    A[Backup] --&gt; B[Base Fileset]\n    A --&gt; C[Delta Fileset]\n\n    B --&gt; D1[File1]\n    B --&gt; D2[File2]\n    B --&gt; D3[File3]\n\n    C --&gt; D4[\"File3 (Modified)\"]\n    C --&gt; D5[\"File4 (Added)\"]\n\n    D1 --&gt; E1[Blob A]\n    D2 --&gt; E1\n    D3 --&gt; E2[Blob B]\n    D4 --&gt; E3[Blob C]\n    D5 --&gt; E4[Blob D]\n\n    style A fill:#e1f5fe\n    style B fill:#f3e5f5\n    style C fill:#f3e5f5\n    style D1 fill:#e8f5e8\n    style D2 fill:#e8f5e8\n    style D3 fill:#e8f5e8\n    style D4 fill:#e8f5e8\n    style D5 fill:#e8f5e8\n    style E1 fill:#fff3e0\n    style E2 fill:#fff3e0\n    style E3 fill:#fff3e0\n    style E4 fill:#fff3e0\n</code></pre>"},{"location":"concept/storage_structure/#backup","title":"Backup","text":"<p>A backup represents a complete snapshot of the backup target at a specific point in time. Each backup has a unique ID as its identifier</p> <p>Each backup contains information related to the backup such as creator information, backup notes, backup time, etc.</p> <p>Each backup is associated with a base fileset and a delta fileset, which together describe the list of files contained in this backup</p>"},{"location":"concept/storage_structure/#fileset","title":"Fileset","text":"<p>Fileset is the storage unit of backups, using a combination of base fileset and delta fileset</p> <p>Base Fileset:</p> <ul> <li>Contains a complete file list</li> <li>Stores file metadata and content references</li> <li>Can be referenced by multiple delta filesets</li> </ul> <p>Delta Fileset:</p> <ul> <li>Only contains changes relative to the base fileset</li> <li>Stores information about added, modified, and deleted files</li> <li>Depends on the base fileset and does not exist independently</li> </ul>"},{"location":"concept/storage_structure/#file","title":"File","text":"<p>File represents a file item in a backup, containing file metadata and data hash</p> <ul> <li>Contains the Unix-style path of the file relative to source_root</li> <li>Contains file metadata such as permissions, owner, timestamps, etc.</li> <li>For regular files, only stores the hash value of their file content</li> <li>For symbolic link files, directly stores the path they point to</li> <li>Uses the role field to identify its role in the fileset:</li> <li>Independent file: Complete file in the base fileset</li> <li>Override file: File in the delta fileset that replaces the base file</li> <li>Added file: Newly added file in the delta fileset</li> <li>Delete marker: File that has been deleted in the delta fileset</li> </ul>"},{"location":"concept/storage_structure/#blob","title":"Blob","text":"<p>Blob is the actual storage object for file content</p> <ul> <li>Uses hash value as its unique identifier, one hash value has exactly one corresponding blob</li> <li>Only stores file content data and its compression method, does not store actual file metadata</li> <li>Stored independently as files, located in the blobs folder under the storage_root path</li> <li>One blob can be referenced by multiple file objects. When the reference count drops to 0, PrimeBackup will delete this blob</li> </ul>"},{"location":"concept/storage_structure/#storage-architecture-diagram","title":"Storage Architecture Diagram","text":"<pre><code>graph LR\n    A[Backup Data] --&gt; DB[SQLite Database]\n    A --&gt; blob_pool[Blob Pool]\n\n    DB --&gt; backup[Backup Objects]\n    DB --&gt; fileset[Fileset Objects]\n    DB --&gt; file[File Objects]\n    DB --&gt; blob[Blob Objects]\n\n    blob_pool --&gt; blob_storage[Hash Sharding]\n    blob_storage --&gt; blob_file[Blob Files]\n\n    style A fill:#e1f5fe\n    style DB fill:#f3e5f5\n    style blob_pool fill:#f3e5f5\n    style backup fill:#e8f5e8\n    style fileset fill:#e8f5e8\n    style file fill:#e8f5e8\n    style blob fill:#e8f5e8\n    style blob_storage fill:#fff3e0\n    style blob_file fill:#fff3e0\n</code></pre>"},{"location":"feature/","title":"Features","text":"<p>Prime Backup feature list</p>"},{"location":"feature/#backup-features","title":"Backup Features","text":"<ul> <li>Backup create</li> <li>Backup restore</li> <li>Backup display</li> <li>Backup edit</li> <li>Backup import/export</li> </ul>"},{"location":"feature/#scheduled-jobs","title":"Scheduled Jobs","text":"<ul> <li>Scheduled backup</li> <li>Backup pruning</li> </ul>"},{"location":"feature/#database-operations-advanced","title":"Database Operations (Advanced)","text":"<ul> <li>Database overview</li> <li>Database internal object inspect</li> <li>Database maintaining</li> <li>Database operation</li> </ul>"},{"location":"feature/backup_create/","title":"Backup Creation","text":"<p>Creating a Backup</p>"},{"location":"feature/backup_create/#backup-steps","title":"Backup Steps","text":""},{"location":"feature/backup_create/#mcdr-environment","title":"MCDR Environment","text":"<p>Prime Backup currently only supports backup creation in MCDR environment</p> <p>To create a backup in MCDR environment, simply execute the following command:</p> <pre><code>!!pb make\n</code></pre> <p>That's it, just one simple command to create a backup</p> <p>Example console output:</p> <pre><code>&gt; !!pb make\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] Creating backup, please wait\n[Server] [00:46:11] [Server thread/INFO]: Automatic saving is now disabled\n[Server] [00:46:11] [Server thread/INFO]: Saving the game (this may take a moment!)\n[Server] [00:46:11] [Server thread/INFO]: ThreadedAnvilChunkStorage (world15): All chunks are saved\n[Server] [00:46:11] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM-1): All chunks are saved\n[Server] [00:46:11] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM1): All chunks are saved\n[Server] [00:46:11] [Server thread/INFO]: Saved the game\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: Scanning file for backup creation at path 'server', targets: ['world']\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: Creating backup for ['world'] at path 'server', file cnt 4106, timestamp 1760892371872862, creator 'console:', comment '', tags {}\n[MCDR] [00:46:12] [PB@51f5-worker-heavy/INFO] [prime_backup]: Create backup #59 done, +10 blobs (size 11.82MiB / 16.75MiB)\n[MCDR] [00:46:12] [PB@51f5-worker-heavy/INFO] [prime_backup]: Time costs: save wait 0.1s, create backup 1.49s\n[MCDR] [00:46:12] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] Backup completed, ID #59, time cost 1.6s, total 118.39MiB (+16.75MiB)\n[Server] [00:46:12] [Server thread/INFO]: Automatic saving is now enabled\n</code></pre> <p>Example in-game output:</p> <p></p> <p>If you want to add a comment to the backup for easier identification later, you can use the following command</p> <pre><code>!!pb make &lt;comment&gt;\n</code></pre> <p>For example</p> <pre><code>!!pb make Example Comment Here\n</code></pre> <p>After the backup is created, you can use <code>!!pb show</code> or <code>!!pb list</code> commands to view it</p> <p>For specific operation steps, please refer to the Backup Display documentation</p> <p></p>"},{"location":"feature/backup_create/#command-line-environment","title":"Command Line Environment","text":"<p>Prime Backup currently does not support creating backups in command line environment (maybe next time!)</p>"},{"location":"feature/backup_create/#related-configuration","title":"Related Configuration","text":"<p>Configuration related to creation is mainly located in the following two sections:</p> <ul> <li>Server Configuration, including how PB interacts with MC server during backup creation process</li> <li>Backup Configuration, including various options related to backup creation</li> </ul> <p>Below are some commonly used configuration items</p> Option Function server.turn_off_auto_save Whether to temporarily disable MC's automatic saving during backup creation backup.targets Modify backup targets, adjust which files/folders to backup backup.ignore_patterns Ignore certain files during backup, and delete these files during restore backup.retain_patterns Ignore certain files during backup, but keep these files unchanged during restore backup.creation_skip_missing_file Skip files that suddenly don't exist during backup backup.hash_method Hash algorithm. PB will reuse files with the same hash value to reduce storage space usage backup.compress_method Compression algorithm. The compression algorithm used by PB when storing files concurrency Maximum concurrency. Appropriately increase this value according to system resources to speed up hash calculation <p>Note</p> <p>For the two configuration items <code>hash_method</code> and <code>compress_method</code>, it is recommended to configure them before creating the first backup. For environments that have already created backups, if you need to modify the above two configuration items, please note:</p> <ul> <li>The <code>hash_method</code> configuration item cannot be directly modified. If directly modified, it will cause PB to fail to load. You need to use the <code>!!pb database migrate_hash_method &lt;xxx&gt;</code> command to migrate</li> <li>The <code>compress_method</code> configuration item can be directly modified, but the modification only affects newly added files. If you need to modify the compression algorithm of existing data, you can use the <code>!!pb database migrate_compress_method &lt;xxx&gt;</code> command</li> </ul>"},{"location":"feature/backup_create/#detailed-backup-process","title":"Detailed Backup Process","text":"<p>Below will list the operation process during PB backup creation</p> <ol> <li>Interact with MC server to construct an environment suitable for backup creation (all operations below can be configured)<ol> <li>Use commands such as <code>save-off</code> to disable MC's automatic saving</li> <li>Use commands such as <code>save-all flush</code> to make MC save game data to disk</li> <li>Wait for MC to output logs such as <code>Saved the game</code>, at this point the game save is complete and backup creation can begin</li> </ol> </li> <li>Create backup<ol> <li>Scan the backup targets, exclude ignored files, and finally get a list of files to backup, along with file metadata</li> <li>If available concurrency configuration &gt; 1, use multi-threading to pre-calculate the hash value of each file to be backed up</li> <li>For each file to be backed up, process one by one:<ol> <li>Calculate hash value. If previously calculated, reuse directly</li> <li>Determine if data with this hash value has been backed up before, if not, copy a copy of the data to the backup path</li> <li>Store this file's metadata and hash value in the database</li> </ol> </li> <li>Calculate the fileset for this backup, complete the backup</li> </ol> </li> <li>Restore operations on MC server<ol> <li>If MC's automatic saving was disabled, it will be re-enabled here</li> </ol> </li> </ol>"},{"location":"feature/backup_display/","title":"Backup Display","text":"<p>View backups</p>"},{"location":"feature/backup_display/#backup-list","title":"Backup List","text":""},{"location":"feature/backup_display/#basic-usage","title":"Basic Usage","text":"<p>To view the backup list, use the following command:</p> <pre><code>!!pb list\n</code></pre> <p>This command will display the most recent 10 backups, sorted in descending order by time</p> <p>Example output:</p> <pre><code>&gt; !!pb list\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] ======== Backup List ========\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] There are 17 backups:\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#85] 162.45MiB 2025-01-31 23:59:59: Final backup of January\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#84] 159.82MiB 2025-01-30 16:45:30: Building completed\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#83] 157.36MiB 2025-01-28 12:15:45: Storage restructure 2\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#82] 154.91MiB 2025-01-25 09:30:20: Storage restructure 1\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#81] 152.47MiB 2025-01-22 14:00:00: Weekly backup\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#80] 150.03MiB 2025-01-20 20:18:33: no comment\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#79] 147.59MiB 2025-01-18 11:05:12: New terrain\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#78] 145.15MiB 2025-01-15 08:22:45: Started filling pit\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#77] 142.71MiB 2025-01-10 02:00:00: no comment\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#76] 140.27MiB 2025-01-05 19:40:15: Base expansion completed\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] &lt;- 1/2 -&gt;\n</code></pre>"},{"location":"feature/backup_display/#list-format-explanation","title":"List Format Explanation","text":"<p>Each backup item is displayed in the following format:</p> <pre><code>[#ID] [&gt;] [x] [flags] size creation_time: comment\n</code></pre> <ul> <li><code>[#ID]</code>: Backup ID, click to view details</li> <li><code>[&gt;]</code>: Green restore button, click to quickly restore</li> <li><code>[x]</code>: Red delete button, click to delete backup (gray for protected backups)</li> <li><code>[flags]</code>: Backup flags, only displayed when using the <code>--flags</code> parameter</li> <li><code>size</code>: Backup raw size (before deduplication/compression)</li> <li><code>creation_time</code>: Time when the backup was created</li> <li><code>comment</code>: Backup comment text. Displays as gray \"no comment\" if none</li> </ul>"},{"location":"feature/backup_display/#optional-parameters","title":"Optional Parameters","text":"<p>The backup list command supports the following optional parameters:</p> Parameter Description <code>[page]</code> View backups on specified page <code>--per-page &lt;count&gt;</code> Set number of backups per page (1-1000) <code>--sort &lt;order&gt;</code> Set sorting order (id, id_r, time, time_r) <code>--creator &lt;creator&gt;</code> Show backup created by the given creator only <code>--me</code> Show backup created by yourself only <code>--from &lt;start_date&gt;</code> Show backup after the given date only <code>--to &lt;end_date&gt;</code> Show backup before the given date only <code>-a, --all</code> Show all backups (including hidden and temporary) <code>--flag, --flags</code> Show backup flags, based on the tags of the backup <p>Sorting order parameter supports the following values:</p> <ul> <li><code>id</code>: Sort by backup ID ascending</li> <li><code>id_r</code>: Sort by backup ID descending</li> <li><code>time</code>: Sort by creation time ascending</li> <li><code>time_r</code>: Sort by creation time descending (default)</li> </ul> <p>Date parameters support the following formats:</p> Format Example Description <code>%Y</code> <code>2023</code> year <code>%Y%m</code> <code>202311</code> year-month <code>%Y%m%d</code> <code>20231130</code> year-month-day <code>%Y-%m-%d</code> <code>2023-11-30</code> year-month-day <code>%Y/%m/%d</code> <code>2023/11/30</code> year/month/day <code>%Y%m%d%H</code> <code>2023113021</code> year-month-day-hour <code>%Y%m%d%H%M</code> <code>202311302139</code> year-month-day-hour-minute <code>%Y%m%d%H%M%S</code> <code>20231130213955</code> year-month-day-hour-minute-second <code>%Y%m%d %H%M%S</code> <code>20231130 213955</code> year-month-day hour-minute-second <code>%Y%m%d %H:%M:%S</code> <code>20231130 21:39:55</code> year-month-day hour:minute:second <code>%Y-%m-%d %H:%M:%S</code> <code>2023-11-30 21:39:55</code> year-month-day hour:minute:second <code>%Y-%m-%d %H:%M:%S.%f</code> <code>2023-11-30 21:39:55.123456</code> year-month-day hour:minute:second.microsecond"},{"location":"feature/backup_display/#backup-details","title":"Backup Details","text":""},{"location":"feature/backup_display/#view-backup-details","title":"View Backup Details","text":"<p>View detailed information for a specific backup:</p> <pre><code>!!pb show 45\n</code></pre> <p>Example output:</p> <pre><code>&gt; !!pb show 45\n[MCDR] [01:42:27] [PB@f133-worker-light/INFO]: [PB] ======== Backup #45 ========\n[MCDR] [01:42:27] [PB@f133-worker-light/INFO]: [PB] Creation date: 2025-08-24 23:50:07\n[MCDR] [01:42:27] [PB@f133-worker-light/INFO]: [PB] Comment: 2\n[MCDR] [01:42:27] [PB@f133-worker-light/INFO]: [PB] Size (stored): 64.62MiB (54.6%)\n[MCDR] [01:42:27] [PB@f133-worker-light/INFO]: [PB] Size (raw): 118.39MiB\n[MCDR] [01:42:27] [PB@f133-worker-light/INFO]: [PB] Creator: Console\n[MCDR] [01:42:27] [PB@f133-worker-light/INFO]: [PB] Tags: empty\n</code></pre>"},{"location":"feature/backup_display/#backup-flags","title":"Backup Flags","text":"<p>When using the <code>--flags</code> parameter, the backup list will display flags:</p> <pre><code>!!pb list --flags\n</code></pre> <p>Flag descriptions:</p> Flag Description <code>H</code> Hidden backup <code>T</code> Temporary backup <code>P</code> Protected backup <code>S</code> Scheduled backup <p>Example:</p> <pre><code>[#65] [&gt;] [x] H-P- 119.26MiB 2025-01-02 14:00:00: Secret backup\n[#62] [&gt;] [x] ---S 118.39MiB 2025-01-02 12:00:00: Scheduled backup\n[#58] [&gt;] [x] -T-- 118.39MiB 2025-01-02 11:00:00: Automatic backup before restoring to #48\n</code></pre>"},{"location":"feature/backup_display/#practical-commands","title":"Practical Commands","text":"<p>View the most recent 20 backups</p> <pre><code>!!pb list --per-page 20\n</code></pre> <p>View backups from specific creators</p> <pre><code>!!pb list --creator console:\n!!pb list --creator player:Fallen_Breath\n</code></pre> <p>View backups within specific time range</p> <pre><code>!!pb list --from 20240101 --to 20240131\n</code></pre> <p>View all backups (including hidden and temporary backups)</p> <pre><code>!!pb list --all --flags\n</code></pre> <p>View backups sorted by ID ascending</p> <pre><code>!!pb list --sort id\n</code></pre>"},{"location":"feature/backup_edit/","title":"Backup Edit","text":"<p>TODO</p>"},{"location":"feature/backup_import/","title":"Backup Import / Export","text":"<p>TODO</p>"},{"location":"feature/backup_restore/","title":"Backup Restoration","text":"<p>Restoring a backup</p>"},{"location":"feature/backup_restore/#restoration-steps","title":"Restoration Steps","text":""},{"location":"feature/backup_restore/#mcdr-environment","title":"MCDR Environment","text":"<p>Prime Backup currently only supports backup restoration in MCDR environment</p> <p>To restore a backup in MCDR environment, simply execute the following command:</p> <pre><code>!!pb back\n</code></pre> <p>This command will restore to the latest non-temporary backup. To restore to a specific backup, you can specify the backup ID:</p> <pre><code>!!pb back 78\n</code></pre> <p>Example console output:</p> <pre><code>&gt; !!pb back 78\n[MCDR] [22:08:24] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] Gonna restore the world to backup #78: Test Backup\n[MCDR] [22:08:24] [PB@f133-worker-heavy/INFO]: [PB] Please choose and enter command within 1 minute:\n[MCDR] [22:08:24] [PB@f133-worker-heavy/INFO]: [PB] - Confirm restore\u221a: !!pb confirm\n[MCDR] [22:08:24] [PB@f133-worker-heavy/INFO]: [PB] - Abort restore\u00d7: !!pb abort\n&gt; !!pb confirm\n[MCDR] [22:08:26] [TaskExecutor/INFO]: [PB] Confirming restore backup task\n[MCDR] [22:08:26] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 10 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:27] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 9 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:28] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 8 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:29] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 7 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:30] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 6 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:31] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 5 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:32] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 4 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:33] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 3 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:34] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 2 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:35] [PB@f133-worker-heavy/INFO] [prime_backup]: [PB] !!! 1 second later, the world will be restored to backup #78: Test Backup\n[MCDR] [22:08:36] [PB@f133-worker-heavy/INFO] [prime_backup]: Wait for server to stop\n[Server] [22:08:36] [Server thread/INFO]: Stopping the server\n[Server] [22:08:36] [Server thread/INFO]: Stopping server\n[Server] [22:08:36] [Server thread/INFO]: Saving players\n[Server] [22:08:36] [Server thread/INFO]: Saving worlds\n[Server] [22:08:36] [Server thread/INFO]: Saving chunks for level 'world'/minecraft:the_nether\n[Server] [22:08:36] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM-1): All chunks are saved\n[Server] [22:08:36] [Server thread/INFO]: Saving chunks for level 'world'/minecraft:the_end\n[Server] [22:08:36] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM1): All chunks are saved\n[Server] [22:08:36] [Server thread/INFO]: Saving chunks for level 'world'/minecraft:overworld\n[Server] [22:08:37] [Server thread/INFO]: ThreadedAnvilChunkStorage (world): All chunks are saved\n[Server] [22:08:37] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM-1): All chunks are saved\n[Server] [22:08:37] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM1): All chunks are saved\n[Server] [22:08:37] [Server thread/INFO]: ThreadedAnvilChunkStorage (world): All chunks are saved\n[MCDR] [22:08:37] [MainThread/INFO]: Server process stopped with code 0\n[MCDR] [22:08:37] [MainThread/INFO]: Server stopped\n[MCDR] [22:08:37] [PB@f133-worker-heavy/INFO] [prime_backup]: Creating backup of existing files to avoid idiot\n[MCDR] [22:08:37] [PB@f133-worker-heavy/INFO] [prime_backup]: Scanning file for backup creation at path 'server', targets: ['world']\n[MCDR] [22:08:38] [PB@f133-worker-heavy/INFO] [prime_backup]: Creating backup for ['world'] at path 'server', file cnt 4118, timestamp 1765128818483891, creator 'prime_backup:pre_restore', comment '__pb_translated__:pre_restore:78', tags {'temporary': True}\n[MCDR] [22:08:39] [PB@f133-worker-heavy/INFO] [prime_backup]: Create backup #83 done, +5 blobs (size 6.42MiB / 7.27MiB)\n[MCDR] [22:08:39] [PB@f133-worker-heavy/INFO] [prime_backup]: Restoring to backup #78 (fail_soft=False, verify_blob=True)\n[MCDR] [22:08:39] [PB@f133-worker-heavy/INFO] [prime_backup]: Exporting Backup(id=78, timestamp=1763890381206484, creator='player:Fallen_Breath', comment='Test Backup', targets=['world'], tags={}, fileset_id_base=56, fileset_id_delta=88, file_count=4118, file_raw_size_sum=136177532, file_stored_size_sum=78537902) to directory server\n[MCDR] [22:08:48] [PB@f133-worker-heavy/INFO] [prime_backup]: Export done\n[MCDR] [22:08:48] [PB@f133-worker-heavy/INFO] [prime_backup]: Restore to backup #78 done, cost 10.3s (backup 1.79s, restore 8.51s), starting the server\n[MCDR] [22:08:48] [PB@f133-worker-heavy/INFO]: Starting the server with command 'java -Xms1G -Xmx2G -jar server.jar'\n</code></pre> <p>Example in-game output:</p> <p></p> <p>The restore command supports multiple backup ID formats:</p> Format Example Description Positive integer <code>!!pb back 12</code> Restore to backup with specified ID <code>~</code> or <code>latest</code> <code>!!pb back ~</code> Restore to latest non-temporary backup Relative offset <code>!!pb back ~1</code> Restore to the backup before the latest backup Relative offset <code>!!pb back ~3</code> Restore to the backup three before the latest backup <p>The restore command supports the following optional parameters:</p> Parameter Description <code>--confirm</code> Skip confirmation step, directly start restoration <code>--fail-soft</code> Skip files that fail to export during export process <code>--no-verify</code> Do not verify the content of exported files <p>Example:</p> <pre><code>!!pb back 12 --confirm --fail-soft\n</code></pre>"},{"location":"feature/backup_restore/#command-line-environment","title":"Command Line Environment","text":"<p>Prime Backup currently does not support restoring backups in command line environment (maybe next time!)</p>"},{"location":"feature/backup_restore/#related-configuration","title":"Related Configuration","text":"<p>Configuration related to restoration is mainly located in the following two sections:</p> <ul> <li>Server Configuration, including interaction commands with MC server during restoration</li> <li>Backup Configuration, including file processing rules during restoration</li> </ul>"},{"location":"feature/backup_restore/#detailed-restoration-process","title":"Detailed Restoration Process","text":"<p>Below will list the operation process during PB backup restoration</p> <ol> <li>Confirmation phase</li> <li>Display the backup information to be restored</li> <li>Wait for user confirmation (unless using <code>--confirm</code> parameter)</li> <li>User can confirm with <code>!!pb confirm</code> or abort with <code>!!pb abort</code></li> <li>Server shutdown</li> <li>If the server is running, execute 10s countdown (default configuration <code>command.restore_countdown_sec: 10</code>)</li> <li>Restoration can be canceled during countdown</li> <li>Stop the server and wait for complete shutdown</li> <li>Pre-restoration backup</li> <li>If <code>backup_on_restore</code> is configured (default value <code>true</code>), create a backup at this time for emergency use</li> <li>Backup comment is \"Automatic backup before restoring to #X\"</li> <li>This backup will be marked as temporary and will be specially handled during backup cleanup</li> <li>Actual restoration operation</li> <li>Recycle bin mechanism: Move all existing files in the backup target directory to a temporary recycle bin, ensuring complete rollback if restoration fails</li> <li>Retain file processing: If <code>retain_patterns</code> is configured, use gitignore-style pattern matching and isolate files to be retained</li> <li>File export: Use multi-threading to export backup files to the target directory in parallel</li> <li>Attribute restoration: Restore file permissions, timestamps, owners, and symbolic link targets</li> <li>Retain file restoration: Finally move <code>retain_patterns</code> retained files back to their original positions</li> <li>Server restart</li> <li>If the server was originally running, restart the server</li> </ol>"},{"location":"feature/database_inspect/","title":"Database Internal Object Inspection","text":"<p>View and inspect object information in the database.</p>"},{"location":"feature/database_inspect/#overview","title":"Overview","text":"<p>Prime Backup's database inspection functionality allows you to deeply examine various components of the backup system, including backups, filesets, files, and blobs</p>"},{"location":"feature/database_inspect/#backup-inspection","title":"Backup Inspection","text":""},{"location":"feature/database_inspect/#view-backup-details","title":"View Backup Details","text":"<p>View complete information for a specific backup:</p> <pre><code>!!pb database inspect backup &lt;backup_id&gt;\n</code></pre> <p>Example:</p> <pre><code>!!pb database inspect backup 45\n</code></pre> <p>Example output:</p> <pre><code>&gt; !!pb database inspect backup 45\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] ======== Backup #45 ========\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] ID: 45\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Timestamp (microsecond): 1756050607173147 (date: 2025-08-24 23:50:07)\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Creator: \"console:\" (Console)\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Comment: \"2\"\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Backup targets: world, world15, world21\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Tags: {}\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Fileset: base 39, delta 54\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Raw size: 124137302 (118.39MiB)\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] Stored size: 67760442 (64.62MiB)\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] File counts: 4106\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] - Regular files: 4068\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] - Directories: 38\n[MCDR] [01:58:56] [PB@f133-worker-light/INFO]: [PB] - Symlinks: 0\n</code></pre>"},{"location":"feature/database_inspect/#file-inspection","title":"File Inspection","text":""},{"location":"feature/database_inspect/#view-files-in-backup","title":"View Files in Backup","text":"<p>View detailed information for a specific file in a backup:</p> <pre><code>!!pb database inspect file &lt;backup_id&gt; &lt;file_path&gt;\n</code></pre> <p>Example:</p> <pre><code>!!pb database inspect file 45 world/level.dat\n</code></pre> <p>Example output:</p> <pre><code>&gt; !!pb database inspect file 45 world/level.dat\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] ======== File level.dat in fileset 39 ========\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Associated fileset: 39\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Path: world/level.dat\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Role: Standalone\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Mode: 33206 (-rw-rw-rw-)\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Blob hash: 86c7b6e480e869effd9200abe045b3db\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Blob compress: zstd\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Blob raw size: 1528 (1.49KiB)\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Blob stored size: 1537 (1.50KiB)\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Uid: 0\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Gid: 0\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Modify time: 1731254748636839 (2024-11-11 00:05:48.636839)\n[MCDR] [01:41:24] [PB@f133-worker-light/INFO]: [PB] Backup containing this file: 3 (samples: #45, #43, #42)\n</code></pre>"},{"location":"feature/database_inspect/#view-files-in-fileset","title":"View Files in Fileset","text":"<p>View detailed information for a specific file in a fileset:</p> <pre><code>!!pb database inspect file2 &lt;fileset_id&gt; &lt;file_path&gt;\n</code></pre> <p>Displays the same content as above.</p>"},{"location":"feature/database_inspect/#fileset-inspection","title":"Fileset Inspection","text":""},{"location":"feature/database_inspect/#view-fileset-details","title":"View Fileset Details","text":"<p>View complete information for a specific fileset:</p> <pre><code>!!pb database inspect fileset &lt;fileset_id&gt;\n</code></pre> <p>Example:</p> <pre><code>!!pb database inspect fileset 87\n</code></pre> <p>Example output:</p> <pre><code>&gt; !!pb database inspect fileset 87\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] ======== Fileset 87 ========\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] ID: 87\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] Kind: Delta fileset\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] File object count: 43\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] File count (delta): 22\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] Raw size (delta): 23620147 (22.53MiB)\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] Stored size (delta): 19735961 (18.82MiB)\n[MCDR] [01:59:36] [PB@f133-worker-light/INFO]: [PB] Associated backup count: 1 (samples: #77)\n</code></pre>"},{"location":"feature/database_inspect/#blob-inspection","title":"Blob Inspection","text":""},{"location":"feature/database_inspect/#view-blob-details","title":"View Blob Details","text":"<p>View complete information for a specific blob:</p> <pre><code>!!pb database inspect blob &lt;hash&gt;\n</code></pre> <p>The parameter <code>&lt;hash&gt;</code> can be a prefix of the complete hash string, as long as it uniquely identifies the object.</p> <p>Example:</p> <pre><code>!!pb database inspect blob 8a3d\n!!pb database inspect blob 8a3d32b705a1274850798ae26ff56ba9\n</code></pre> <p>Example output:</p> <pre><code>&gt; !!pb database inspect blob 8a3d\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] ======== Blob 8a3d32b705a12748 ========\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] Hash: 8a3d32b705a1274850798ae26ff56ba9\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] Compress: zstd\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] Raw size: 736 (736.00B)\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] Stored size: 745 (745.00B)\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] Associated file count: 2. Samples:\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] 1. fileset 39, path: world15/playerdata/6ccb4484-ca33-41ee-a809-fece13a26c21.dat\n[MCDR] [01:59:44] [PB@f133-worker-light/INFO]: [PB] 2. fileset 56, path: world15/playerdata/6ccb4484-ca33-41ee-a809-fece13a26c21.dat\n</code></pre> <p>If the provided hash is too short and cannot uniquely identify a blob, it will output:</p> <pre><code>&gt; !!pb database inspect blob 8a\n[MCDR] [02:00:06] [PB@f133-worker-light/INFO]: [PB] The given hash 8a cannot uniquely identify a blob\n[MCDR] [02:00:06] [PB@f133-worker-light/INFO]: [PB] Found at least 3 candidates: 8a92569c48895c60bf2977f1be9591f4, 8abd332ba5b579ca00d0d54e50b8bedd, 8ad9bfd69fa3e84b15e2aa803cac0e4c\n</code></pre>"},{"location":"feature/database_maintain/","title":"Database Maintenance","text":"<p>Consistency check and Database Organization</p>"},{"location":"feature/database_maintain/#database-validation","title":"Database Validation","text":"Command Description <code>!!pb database validate blobs</code> Validate the correctness of blobs, e.g. data size, hash value <code>!!pb database validate files</code> Validate the correctness of file objects, e.g. the association between files and blobs <code>!!pb database validate filesets</code> Validate the correctness of fileset objects, e.g. the association between filesets and their files <code>!!pb database validate backups</code> Validate the correctness of backup objects, e.g. the association between backups and filesets <code>!!pb database validate all</code> Validate all of the above <p>Example:</p> <pre><code>!!pb database validate all\n</code></pre> <p>Example output:</p> <pre><code>&gt; !!pb database validate all\n[MCDR] [23:16:17] [PB@fc91-worker-heavy/INFO]: [PB] Start validating blobs, please wait...\n[MCDR] [23:16:17] [PB@fc91-worker-heavy/INFO] [prime_backup]: Blob validation start\n[MCDR] [23:16:17] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 3000 / 4325 blobs\n[MCDR] [23:16:20] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 4325 / 4325 blobs\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Blob validation done: total 4325, validated 4325, ok 4325, bad 0\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Validated 4325 / 4325 blobs\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] All 4325 blobs are healthy\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Start validating files (including file, directory and symlink), please wait...\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: File validation start\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 9147 / 9147 file objects\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: File validation done: total 9147, validated 9147, ok 9147, bad 0\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Validated 9147 / 9147 files\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] All 9147 files are healthy\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Start validating filesets, please wait...\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Fileset validation start\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 26 fileset objects\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 26 / 26 fileset objects\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Fileset validation done: total 26, validated 26, ok 26, bad 0\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Validated 26 / 26 filesets\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] All 26 filesets are healthy\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Start validating backups, please wait...\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Backup validation start\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 21 backup objects\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO] [prime_backup]: Backup validation done: total 21, validated 21, ok 21, bad 0\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Validated 21 / 21 backups\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] All 21 backups are healthy\n[MCDR] [23:16:21] [PB@fc91-worker-heavy/INFO]: [PB] Validation done, cost 3.39s. blobs: good, files: good, filesets: good, backups: good\n</code></pre>"},{"location":"feature/database_maintain/#validation-content","title":"Validation Content","text":"<p>Blobs:</p> <ul> <li>File Existence: Check if the blob files exist in storage</li> <li>Integrity: Verify the hash values of the blob files</li> <li>Size Matching: Check if the stored size matches the record</li> <li>Compression Validation: Verify the integrity of compressed data</li> </ul> <p>Files:</p> <ul> <li>Reference Integrity: Check if the blobs referenced by files exist</li> <li>Fileset Association: Verify the association between files and filesets</li> <li>Metadata Consistency: Check if file metadata is complete</li> </ul> <p>Filesets:</p> <ul> <li>Backup Association: Verify the association between filesets and backups</li> <li>File Count: Check the number of files in the fileset</li> <li>Size Calculation: Verify the correctness of fileset size calculation</li> </ul> <p>Backups:</p> <ul> <li>Fileset Reference: Check if the filesets referenced by backups exist</li> <li>Timestamp Order: Verify the order of backup timestamps</li> <li>Metadata Integrity: Check if backup metadata is complete</li> </ul> <p>When validation detects issues, detailed error information will be displayed:</p> <pre><code>[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO] [prime_backup]: Blob validation done: total 4325, validated 4325, ok 4322, bad 3\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] Validated 4325 / 4325 blobs\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] Found 3 / 4325 bad blobs in total\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] Missing blob amount: 2\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] 1. 4fc02ad5e7508949634f012fb96c2968: blob file does not exist\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] 2. 54695a153daae89e685894ee966a277e: blob file does not exist\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] Mismatched blob amount: 1\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] 1. 8b36d71e250e25527f59b8fd9e0f2dce: stored size mismatch, expect 178, found 176\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] Affected range: 6 / 9147 file objects, 2 / 26 filesets, 16 / 21 backups\n[MCDR] [23:18:49] [PB@fc91-worker-heavy/INFO]: [PB] See log file pb_files/logs/validate.log for details and affected stuffs of these bad blobs\n</code></pre>"},{"location":"feature/database_maintain/#database-cleanup","title":"Database Cleanup","text":""},{"location":"feature/database_maintain/#invalid-data-cleanup","title":"Invalid Data Cleanup","text":"<p>Prune useless stuffs as orphaned objects in the database</p> <pre><code>!!pb database prune\n</code></pre> <p>Stuffs to be pruned</p> <ul> <li>Orphaned Blobs: Blobs no longer referenced by any files</li> <li>Orphaned Files: Files no longer referenced by any filesets</li> <li>Orphaned Filesets: Filesets no longer referenced by any backups</li> <li>Base Fileset Compression: Optimize the storage structure of base filesets</li> <li>Unknown Blob Files: Blob files that exist in file system but have no records in the database</li> </ul> <p>Note</p> <p>In most cases, you do not need to manually execute this command. Prime Backup ensures the database remains in a clean state during daily operations</p>"},{"location":"feature/database_maintain/#sqlite-vacuum","title":"SQLite Vacuum","text":"<p>Compact the SQLite database file to reduce disk usage</p> <pre><code>!!pb database vacuum\n</code></pre> <p>Example output:</p> <pre><code>&gt; !!pb database vacuum\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] \u5f00\u59cb\u538b\u7f29\u6570\u636e\u5e93...\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] \u538b\u7f29\u5b8c\u6210: \u8017\u65f6 2.34s, \u5927\u5c0f 45.67MiB -&gt; 32.15MiB (-13.52MiB, 70.4%)\n</code></pre> <p>Note</p> <p>Under the default configuration, Prime Backup will automatically perform SQLite vacuum tasks periodically, so in most cases, you do not need to manually execute this command</p>"},{"location":"feature/database_operation/","title":"Database Operations","text":"<p>Configuration migration and data modification operations.</p>"},{"location":"feature/database_operation/#hash-algorithm-migration","title":"Hash Algorithm Migration","text":"<p>Warning</p> <ul> <li>Affects all backup content, it's recommended to make additional data backups</li> <li>Migration may take a long time depending on file count and disk IO speed. Migration tasks cannot be interrupted</li> </ul> <p>Migrate the hash algorithm in the database to a new algorithm:</p> <pre><code>!!pb database migrate_hash_method &lt;new_hash_algorithm&gt;\n</code></pre> <p>TODO</p>"},{"location":"feature/database_operation/#compression-method-migration","title":"Compression Method Migration","text":"<p>Warning</p> <ul> <li>Affects all backup content, please make additional data backups</li> <li>Migration may take a long time depending on file count and disk IO speed. Migration tasks cannot be interrupted</li> </ul> <pre><code>!!pb database migrate_compress_method &lt;new_compression_method&gt;\n</code></pre> <p>TODO</p>"},{"location":"feature/database_operation/#file-deletion","title":"File Deletion","text":""},{"location":"feature/database_operation/#delete-files-from-backup","title":"Delete Files from Backup","text":"<p>Delete specific files from a backup:</p> <pre><code>!!pb database delete file &lt;backup_id&gt; &lt;file_path&gt;\n</code></pre> <p>Example:</p> <pre><code>!!pb database delete file 59 world/cache/file.txt\n</code></pre>"},{"location":"feature/database_operation/#recursive-directory-deletion","title":"Recursive Directory Deletion","text":"<p>Recursively delete a directory and all its contents from a backup:</p> <pre><code>!!pb database delete file &lt;backup_id&gt; &lt;directory_path&gt; --recursive\n</code></pre> <p>Example:</p> <pre><code>!!pb database delete file 59 world/cache --recursive\n</code></pre> <p>Notes:</p> <ul> <li>Cannot delete the root directory of the backup</li> <li>Deleting directories requires the <code>--recursive</code> parameter</li> <li>Default requires user confirmation to prevent accidental operation</li> </ul>"},{"location":"feature/database_overview/","title":"Database Overview","text":"<p>View database statistics overview, used to quickly understand the information status of Prime Backup database</p>"},{"location":"feature/database_overview/#command","title":"Command","text":"<pre><code>!!pb database overview\n</code></pre>"},{"location":"feature/database_overview/#function","title":"Function","text":"<p>View overall statistical information of Prime Backup database</p>"},{"location":"feature/database_overview/#example-output","title":"Example Output","text":"<pre><code>&gt; !!pb database overview\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] ======== Database overview ========\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] Database version: 3\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] Database file size: 2.67MiB\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] Hash method: xxh128\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] Backup count: 22\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] File count: 70469 (9190 objects)\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] File raw size sum: 2.50GiB\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] Blob count: 4339\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] Blob stored size sum: 451.68MiB (68.7%)\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] Blob raw size sum: 657.79MiB\n</code></pre>"},{"location":"zh/","title":"\u6b22\u8fce\u6765\u5230 Prime Backup \u7684\u6587\u6863","text":"<p>\u8fd9\u91cc\u662f Prime Backup \u63d2\u4ef6\u7684\u5b98\u65b9\u6587\u6863</p>"},{"location":"zh/cli/","title":"\u547d\u4ee4\u884c\u5de5\u5177","text":"<p>Prime Backup \u7684 <code>*.pyz</code> \u6587\u4ef6\u9664\u4e86\u662f\u4e00\u4e2a MCDR \u63d2\u4ef6\u5916\uff0c\u4e5f\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\u3002 \u5728\u5b89\u88c5\u4e86\u6240\u9700\u7684 Python \u4f9d\u8d56\u5e93\u540e\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u7528 Python3 \u89e3\u6790\u5668\u6765\u8fd0\u884c\u5b83</p> <pre><code>$ python3 PrimeBackup.pyz\nusage: PrimeBackup.pyz [-h] [-d DB]\n                       {overview,list,show,import,export,extract,migrate_db}   \n                       ...\n\nPrime Backup v1.7.0 CLI tools\n\noptions:\n  -h, --help            show this help message and exit\n  -d DB, --db DB        Path to the prime_backup.db database file, or path to  \n                        the directory that contains the prime_backup.db        \n                        database file, e.g. \"/my/path/prime_backup.db\", or     \n                        \"/my/path\" (default: ./pb_files)\n\nCommand:\n  {overview,list,show,import,export,extract,migrate_db}\n                        Available commands\n    overview            Show overview information of the database\n    list                List backups\n    show                Show detailed information of the given backup\n    import              Import a backup from the given file. The backup file   \n                        needs to have a backup metadata file\n                        '.prime_backup.meta.json', or the --auto-meta flag     \n                        need to be supplied\n    export              Export the given backup to a single file\n    extract             Extract a single file / directory from a backup\n    migrate_db          Migrate the database to the current version (2)  \n</code></pre> <p>\u4f60\u53ef\u4ee5\u5728\u6bcf\u4e2a\u5b50\u547d\u4ee4\u540e\u6dfb\u52a0 <code>--help</code> \u6765\u663e\u793a\u5176\u5e2e\u52a9\u4fe1\u606f\u3002\u4f8b\u5982\uff1a</p> <pre><code>$ python3 PrimeBackup.pyz export --help\nusage: PrimeBackup.pyz export [-h] [-f FORMAT] [--fail-soft] [--no-verify]\n                              [--no-meta]\n                              backup_id output\n\nExport the given backup to a single file\n\npositional arguments:\n  backup_id             The ID of the backup to export. Besides an integer     \n                        ID, it can also be \"latest\" and \"latest_non_temp\"      \n  output                The output file name of the exported backup. Example:  \n                        my_backup.tar\n\noptions:\n  -h, --help            show this help message and exit\n  -f FORMAT, --format FORMAT\n                        The format of the output file. If not given, attempt   \n                        to infer from the output file name. Options: tar,      \n                        tar_gz, tar_bz2, tar_xz, tar_zst, zip\n  --fail-soft           Skip files with export failure in the backup, so a     \n                        single failure will not abort the export. Notes: a     \n                        corrupted file might damaged the tar-based file        \n  --no-verify           Do not verify the exported file contents\n  --no-meta             Do not add the backup metadata file\n                        '.prime_backup.meta.json' in the exported file\n</code></pre> <p>\u4f5c\u4e3a\u6f14\u793a\uff0c\u4e0b\u9762\u7684\u8fd9\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86\u6570\u636e\u5e93\u7684\u72b6\u51b5\u6982\u89c8\uff1a</p> <pre><code>$ python3 PrimeBackup.pyz -d run/pb_files overview\n[2023-12-09 20:31:39,929 INFO] Storage root set to 'run/pb_files'\n[2023-12-09 20:31:39,948 INFO] DB version: 1\n[2023-12-09 20:31:39,948 INFO] Hash method: xxh128\n[2023-12-09 20:31:39,948 INFO] Backup count: 2\n[2023-12-09 20:31:39,948 INFO] Blob count: 9108\n[2023-12-09 20:31:39,949 INFO] Blob stored size sum: 5158485126 (4.80GiB)\n[2023-12-09 20:31:39,949 INFO] Blob raw size sum: 8295323157 (7.73GiB)\n[2023-12-09 20:31:39,949 INFO] File count: 22010\n[2023-12-09 20:31:39,949 INFO] File raw size sum: 16610326638 (15.47GiB)\n</code></pre>"},{"location":"zh/command/","title":"MCDR \u6307\u4ee4","text":"<p>Note</p> <p>\u672c\u6587\u6863\u5047\u5b9a\u4f60\u4f7f\u7528 <code>!!pb</code> \u4f5c\u4e3a MCDR \u547d\u4ee4\u7684\u524d\u7f00</p>"},{"location":"zh/command/#\u6b22\u8fce\u754c\u9762","title":"\u6b22\u8fce\u754c\u9762","text":"<p>\u6839\u547d\u4ee4 <code>!!pb</code> \u7528\u4e8e\u663e\u793a\u6b22\u8fce\u9875\u9762</p> <p></p>"},{"location":"zh/command/#\u6307\u4ee4\u5217\u8868\u6982\u89c8","title":"\u6307\u4ee4\u5217\u8868\u6982\u89c8","text":"<p>\u4f7f\u7528 <code>!!pb help</code> \u53ef\u67e5\u770b\u6240\u6709\u547d\u4ee4\u7684\u5b8c\u6574\u5217\u8868</p> <p></p>"},{"location":"zh/command/#todo","title":"TODO","text":"<p>TODO\uff1a\u66f4\u591a\u547d\u4ee4\u7528\u6cd5</p>"},{"location":"zh/config/","title":"\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"zh/config/#\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3","title":"\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3","text":"<p>\u8fd9\u662f\u5bf9\u914d\u7f6e\u6587\u4ef6\u7684\u5b8c\u6574\u89e3\u91ca\u3002\u5982\u679c\u4f60\u60f3\u6df1\u5165\u4e86\u89e3\u5b83\uff0c\u90a3\u5c31\u63a5\u7740\u5f80\u4e0b\u770b\u5427</p>"},{"location":"zh/config/#\u6839\u914d\u7f6e","title":"\u6839\u914d\u7f6e","text":"<p>\u8fd9\u662f\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u6839 json \u5bf9\u8c61</p> <pre><code>{\n    \"enabled\": true,\n    \"debug\": false,\n    \"storage_root\": \"./pb_files\",\n    \"concurrency\": 1,\n\n    // \u5b50\u914d\u7f6e\u3002\u8be6\u89c1\u4ee5\u4e0b\u5404\u8282\n    \"command\": {/* \u547d\u4ee4\u914d\u7f6e */},\n    \"server\": {/* \u670d\u52a1\u5668\u914d\u7f6e */},\n    \"backup\": {/* \u5907\u4efd\u914d\u7f6e */},\n    \"scheduled_backup\": {/* \u5b9a\u65f6\u5907\u4efd\u914d\u7f6e */},\n    \"prune\": {/* \u4fee\u526a\u914d\u7f6e */},\n    \"database\": {/* \u6570\u636e\u5e93\u914d\u7f6e */}\n}\n</code></pre>"},{"location":"zh/config/#enabled","title":"enabled","text":"<p>\u63d2\u4ef6\u7684\u5f00\u5173\u3002\u8bbe\u7f6e\u4e3a <code>false</code> \u4ee5\u7981\u7528\u63d2\u4ef6</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>false</code></li> </ul>"},{"location":"zh/config/#debug","title":"debug","text":"<p>\u8c03\u8bd5\u5f00\u5173\u3002\u8bbe\u7f6e\u4e3a <code>true</code> \u4ee5\u542f\u7528\u8c03\u8bd5\u65e5\u5fd7</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>false</code></li> </ul>"},{"location":"zh/config/#storage_root","title":"storage_root","text":"<p>Prime Backup \u50a8\u5b58\u5404\u79cd\u6570\u636e\u6587\u4ef6\u6240\u7528\u7684\u6839\u76ee\u5f55</p> <p>\u8fd9\u662f\u4e00\u4e2a\u76f8\u5bf9\u4e8e MCDR \u5de5\u4f5c\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6839\u76ee\u5f55\u5c06\u662f <code>/path/to/mcdr_root/pb_files</code></p> <ul> <li>\u7c7b\u578b\uff1a<code>str</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>\"./pb_files\"</code></li> </ul>"},{"location":"zh/config/#concurrency","title":"concurrency","text":"<p>\u5728\u4efb\u4f55\u4efb\u52a1 / \u64cd\u4f5c\u7684\u6267\u884c\u671f\u95f4\u4f7f\u7528\u7684\u6700\u5927\u5e76\u53d1\u6570</p> <p>\u5c06\u5e76\u53d1\u6570\u8bbe\u7f6e\u4e3a\u66f4\u9ad8\u7684\u503c\uff08\u4f8b\u5982 <code>4</code>\uff09\u53ef\u4ee5\u52a0\u5feb\u5907\u4efd\u521b\u5efa\u548c\u56de\u6863\u7b49\u64cd\u4f5c\u7684\u901f\u5ea6\uff0c \u4f46\u8fd9\u4e5f\u4f1a\u8ba9\u8fd9\u4e9b\u64cd\u4f5c\u6d88\u8017\u66f4\u591a\u7684 CPU</p> <p>\u503c <code>0</code> \u8868\u793a\u4f7f\u7528 50% \u7684 CPU</p> <ul> <li>\u7c7b\u578b\uff1a<code>int</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>1</code></li> </ul>"},{"location":"zh/config/#\u547d\u4ee4\u914d\u7f6e","title":"\u547d\u4ee4\u914d\u7f6e","text":"<pre><code>{\n    \"prefix\": \"!!pb\",\n    \"permission\": {\n        \"root\": 0,\n        \"abort\": 1,  \n        \"back\": 2,\n        \"confirm\": 1,\n        \"database\": 4,\n        \"delete\": 2,\n        \"delete_range\": 3,\n        \"export\": 4,\n        \"list\": 1,\n        \"make\": 1,\n        \"prune\": 3,\n        \"rename\": 2,\n        \"show\": 1,\n        \"tag\": 3\n    },\n    \"confirm_time_wait\": \"1m\",\n    \"backup_on_restore\": true,\n    \"restore_countdown_sec\": 10\n}\n</code></pre>"},{"location":"zh/config/#prefix","title":"prefix","text":"<p>MCDR \u4e2d\uff0cPrime Backup \u6240\u6709\u547d\u4ee4\u7684\u524d\u7f00\u3002\u901a\u5e38\u4f60\u4e0d\u9700\u8981\u66f4\u6539\u5b83</p> <ul> <li>\u7c7b\u578b\uff1a<code>str</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>\"!!pb\"</code></li> </ul>"},{"location":"zh/config/#permission","title":"permission","text":"<p>\u6240\u6709\u5b50\u547d\u4ee4\u6240\u9700\u7684 MCDR \u6743\u9650\u7b49\u7ea7 \u7684\u6700\u4f4e\u8981\u6c42</p> <p>\u5b83\u662f\u4e00\u4e2a\u4ece\u5b57\u7b26\u4e32\u6620\u5c04\u5230\u6574\u6570\u7684\u6620\u5c04\u8868\uff0c\u5b58\u50a8\u6240\u6709\u5b50\u547d\u4ee4\u7684\u6743\u9650\u7ea7\u522b\u8981\u6c42\u3002 \u5982\u679c\u5b50\u547d\u4ee4\u4e0d\u5728\u6620\u5c04\u8868\u4e2d\uff0c\u5c06\u4f7f\u7528 <code>1</code> \u4f5c\u4e3a\u9ed8\u8ba4\u7684\u6743\u9650\u7b49\u7ea7\u8981\u6c42</p> <p>\u4f8b\u5982\uff0c\u5728\u9ed8\u8ba4\u914d\u7f6e\u4e2d\uff0c<code>\"back\"</code> \u88ab\u6620\u5c04\u5230 <code>2</code>\uff0c \u8fd9\u610f\u5473\u7740 <code>!!pb back</code> \u547d\u4ee4\u9700\u8981\u6743\u9650\u7ea7\u522b &gt;=2 \u624d\u80fd\u6267\u884c</p> <p>\u7279\u522b\u5730\uff0c<code>\"root\"</code> \u6307\u7684\u662f\u6839\u547d\u4ee4\uff0c\u901a\u5e38\u5373 <code>!!pb</code> \u6307\u4ee4</p> <ul> <li>\u7c7b\u578b\uff1a<code>Dict[str, int]</code></li> </ul>"},{"location":"zh/config/#confirm_time_wait","title":"confirm_time_wait","text":"<p>\u6709\u4e00\u4e9b\u547d\u4ee4\u9700\u8981\u7528\u6237\u8f93\u5165 <code>!!pb confirm</code> \u624d\u53ef\u7ee7\u7eed\u6267\u884c\u3002 \u8fd9\u91cc\u5b9a\u4e49\u4e86\u8fd9\u4e9b\u547d\u4ee4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4</p> <p>\u82e5\u7b49\u5f85\u8d85\u65f6\uff0c\u5219\u547d\u4ee4\u5c06\u88ab\u53d6\u6d88\u6267\u884c</p> <ul> <li>\u7c7b\u578b\uff1a<code>Duration</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>\"1m\"</code></li> </ul>"},{"location":"zh/config/#backup_on_restore","title":"backup_on_restore","text":"<p>\u5728\u56de\u6863\u81f3\u6307\u5b9a\u5907\u4efd\u524d\uff0c\u662f\u5426\u8981\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u5907\u4efd\u3002\u8fd9\u4e00\u7c7b\u5907\u4efd\u88ab\u79f0\u4e3a\u201c\u56de\u6863\u524d\u5907\u4efd\u201d\uff0c\u7c7b\u578b\u4e3a\u4e34\u65f6\u5907\u4efd</p> <p>\u8fd9\u662f\u4e00\u9053\u4e3a\u90a3\u4e9b\u50bb\u74dc\u7528\u6237\u51c6\u5907\u7684\u5b89\u5168\u4fdd\u969c</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>true</code></li> </ul>"},{"location":"zh/config/#restore_countdown_sec","title":"restore_countdown_sec","text":"<p>\u5728\u56de\u6863\u65f6\uff0c\u5173\u95ed Minecraft \u670d\u52a1\u5668\u524d\uff0c\u6267\u884c\u5012\u8ba1\u65f6\u7684\u6301\u7eed\u79d2\u6570</p> <ul> <li>\u7c7b\u578b\uff1a<code>int</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>10</code></li> </ul>"},{"location":"zh/config/#\u670d\u52a1\u5668\u914d\u7f6e","title":"\u670d\u52a1\u5668\u914d\u7f6e","text":"<p>\u4e0e Minecraft \u670d\u52a1\u5668\u4ea4\u4e92\u76f8\u5173\u7684\u9009\u9879</p> <pre><code>{\n    \"turn_off_auto_save\": true,\n    \"commands\": {\n        \"save_all_worlds\": \"save-all flush\",\n        \"auto_save_off\": \"save-off\",\n        \"auto_save_on\": \"save-on\"\n    },\n    \"saved_world_regex\": [\n        \"Saved the game\",\n        \"Saved the world\"\n    ],\n    \"save_world_max_wait\": \"10m\"\n}\n</code></pre>"},{"location":"zh/config/#turn_off_auto_save","title":"turn_off_auto_save","text":"<p>\u662f\u5426\u5e94\u5728\u8fdb\u884c\u5907\u4efd\u4e4b\u524d\u5173\u95ed\u81ea\u52a8\u4fdd\u5b58</p> <p>\u7531\u4e8e\u5173\u95ed\u81ea\u52a8\u4fdd\u5b58\u53ef\u4ee5\u786e\u4fdd\u5728\u5907\u4efd\u671f\u95f4\uff0cMinecraft \u5b58\u6863\u6587\u4ef6\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u56e0\u6b64\u5efa\u8bae\u5c06\u6b64\u9009\u9879\u8bbe\u7f6e\u4e3a <code>true</code></p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>true</code></li> </ul>"},{"location":"zh/config/#commands","title":"commands","text":"<p>Prime Backup \u4f7f\u7528\u7684 Minecraft \u6307\u4ee4\u7684\u96c6\u5408\u3002\u76ee\u524d\u5b83\u4eec\u4ec5\u5728\u521b\u5efa\u5907\u4efd\u671f\u95f4\u4f7f\u7528</p> <p>Prime Backup \u5728\u521b\u5efa\u5907\u4efd\u65f6\u7684\u64cd\u4f5c\u65f6\u5e8f\u5982\u4e0b\uff1a</p> <ol> <li>\u82e5\u914d\u7f6e <code>turn_off_auto_save</code> \u4e3a <code>true</code> \u4e14\u5b50\u914d\u7f6e <code>auto_save_off</code> \u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u4f7f\u7528 <code>auto_save_off</code> \u5b58\u50a8\u7684\u547d\u4ee4\u5173\u95ed\u81ea\u52a8\u4fdd\u5b58</li> <li>\u82e5\u5b50\u914d\u7f6e <code>save_all_worlds</code> \u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u4f7f\u7528 <code>save_all_worlds</code> \u5b58\u50a8\u7684\u547d\u4ee4\uff0c\u89e6\u53d1\u670d\u52a1\u5668\u4fdd\u5b58</li> <li>\u82e5\u5b50\u914d\u7f6e <code>saved_world_regex</code> \u975e\u7a7a\uff0c\u5219\u5f00\u59cb\u7b49\u5f85\u81f3\u4e16\u754c\u4fdd\u5b58\u5b8c\u6bd5\u3002\u4e16\u754c\u4fdd\u5b58\u5b8c\u6bd5\u6307\u670d\u52a1\u5668\u7684\u8f93\u51fa\u4e0e <code>saved_world_regex</code> \u7684\u67d0\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u6210\u529f\u5339\u914d</li> <li>\u521b\u5efa\u5907\u4efd</li> <li>\u5982\u679c\u914d\u7f6e <code>turn_off_auto_save</code> \u4e3a <code>true</code> \u4e14\u5b50\u914d\u7f6e <code>auto_save_on</code> \u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u4f7f\u7528 <code>auto_save_on</code> \u5b58\u50a8\u7684\u547d\u4ee4\u6253\u5f00\u81ea\u52a8\u4fdd\u5b58</li> </ol>"},{"location":"zh/config/#saved_world_regex","title":"saved_world_regex","text":"<p>\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5217\u8868\uff0c\u7528\u4e8e\u8bc6\u522b\u670d\u52a1\u5668\u662f\u5426\u5df2\u4fdd\u5b58\u5b8c\u6210</p> <p>Note</p> <p>\u6b63\u5219\u8868\u8fbe\u5f0f\u5c06\u5bf9\u670d\u52a1\u7aef\u6d88\u606f\u8f93\u51fa\u6267\u884c \u5168\u4e32\u5339\u914d \u68c0\u67e5</p> <ul> <li>\u7c7b\u578b\uff1a<code>List[re.Pattern]</code></li> </ul>"},{"location":"zh/config/#save_world_max_wait","title":"save_world_max_wait","text":"<p>\u5728\u521b\u5efa\u5907\u4efd\u671f\u95f4\uff0c\u7b49\u5f85\u4e16\u754c\u4fdd\u5b58\u5b8c\u6210\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4</p> <ul> <li>\u7c7b\u578b\uff1a<code>Duration</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>\"10m\"</code></li> </ul>"},{"location":"zh/config/#\u5907\u4efd\u914d\u7f6e","title":"\u5907\u4efd\u914d\u7f6e","text":"<p>\u4e0e\u521b\u5efa\u5907\u4efd\u5177\u4f53\u7ec6\u8282\u76f8\u5173\u7684\u914d\u7f6e</p> <pre><code>{\n    \"source_root\": \"./server\",\n    \"source_root_use_mcdr_working_directory\": false,\n    \"targets\": [\n        \"world\"\n    ],\n\n    \"ignored_files\": [],\n    \"ignore_patterns\": [\n       \"**/session.lock\"\n    ],\n    \"retain_patterns\": [],\n    \"follow_target_symlink\": false,\n    \"reuse_stat_unchanged_file\": false,\n    \"creation_skip_missing_file\": false,\n    \"creation_skip_missing_file_patterns\": [\n       \"**\"\n    ],\n\n    \"hash_method\": \"xxh128\",\n    \"compress_method\": \"zstd\",\n    \"compress_threshold\": 64,\n\n    \"fileset_allocate_lookback_count\": 2\n}\n</code></pre>"},{"location":"zh/config/#source_root","title":"source_root","text":"<p>\u8fdb\u884c\u5907\u4efd/\u8fd8\u539f\u64cd\u4f5c\u7684\u6839\u76ee\u5f55</p> <p>\u901a\u5e38\u5e94\u8be5\u662f MCDR \u914d\u7f6e\u4e2d\uff0c\u670d\u52a1\u7aef\u7684 \u5de5\u4f5c\u76ee\u5f55\uff0c \u5373\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7684 <code>server</code> \u76ee\u5f55</p> <ul> <li>\u7c7b\u578b\uff1a<code>str</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>\"./server\"</code></li> </ul>"},{"location":"zh/config/#source_root_use_mcdr_working_directory","title":"source_root_use_mcdr_working_directory","text":"<p>\u82e5\u8bbe\u7f6e\u4e3a <code>true</code>\uff0c\u5219\u4f7f\u7528 MCDR \u914d\u7f6e\u4e2d\uff0c\u670d\u52a1\u7aef\u7684\u5de5\u4f5c\u8def\u5f84\u4f5c\u4e3a source_root \u7684\u503c\u3002 \u6b64\u65f6\uff0c\u914d\u7f6e\u6587\u4ef6\u4e2d source_root \u952e\u7684\u503c\u5c06\u88ab\u5ffd\u7565</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>false</code></li> </ul>"},{"location":"zh/config/#targets","title":"targets","text":"<p>\u8981\u5907\u4efd\u7684\u76ee\u6807\u6587\u4ef6/\u76ee\u5f55\u3002\u5b83\u4eec\u4e5f\u53ef\u4ee5\u662f gitignore \u98ce\u683c \u7684\u6a21\u677f\u4e32</p> <p>\u901a\u5e38\u6765\u8bb2\uff0c\u4f60\u9700\u8981\u5728\u6574\u7406\u6dfb\u52a0\u4f60\u7684\u5b58\u6863\u6587\u4ef6\u5939\u7684\u540d\u5b57</p> <p>\u4f8b\u5982\uff0c\u5bf9\u4e8e\u50cf bukkit \u90a3\u6837\u628a\u6bcf\u4e2a\u7ef4\u5ea6\u5b58\u5728\u72ec\u7acb\u7684\u6587\u4ef6\u5939\u91cc\u7684\u670d\u52a1\u5668\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8fd9\u4e48\u914d\u7f6e\uff1a</p> <pre><code>\"targets\": [\n    \"world\",\n    \"world_nether\",\n    \"world_the_end\"\n]\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u7528\u8fd9\u4e2a\u4f7f\u7528\u901a\u914d\u7b26\u7684\u6a21\u677f\u4e32\uff0c\u5339\u914d source_root \u4e0b\u6240\u6709\u7684\u4ee5 \"world\" \u5f00\u5934\u7684\u4e1c\u897f</p> <pre><code>\"targets\": [\n    \"world*\"\n]\n</code></pre> <ul> <li>\u7c7b\u578b\uff1a<code>List[str]</code></li> </ul> <p>\u66f4\u65b0\u65e5\u5fd7:</p> <ul> <li>v1.10.0: \u652f\u6301 gitignore \u98ce\u683c\u7684\u6a21\u677f\u4e32</li> </ul>"},{"location":"zh/config/#ignored_files","title":"ignored_files","text":"<p>Warning</p> <p>\u4e8e v1.8.0 \u5f03\u7528\u3002\u8bf7\u4f7f\u7528 ignore_patterns</p> <p>Danger</p> <p><code>ignored_files</code> \u5339\u914d\u7684\u6587\u4ef6\u5728\u56de\u6863\u65f6\u4e0d\u4f1a\u88ab\u4fdd\u7559\u3002 \u56de\u6863\u540e\uff0c\u76ee\u6807\u6587\u4ef6\u5939\u4e2d\u53ea\u5b58\u5728\u5df2\u5907\u4efd\u7684\u5185\u5bb9\u3002 \u4ec5\u5bf9\u65e0\u7528\u6570\u636e\u4f7f\u7528\u6b64\u9009\u9879\u3002</p> <p>\u5728\u5907\u4efd\u65f6\u5ffd\u7565\u7684\u6587\u4ef6\u540d\u5217\u8868</p> <p>\u82e5\u6587\u4ef6\u540d\u5b57\u7b26\u4e32\u4ee5 <code>*</code> \u5f00\u5934\uff0c\u5219\u5c06\u5ffd\u7565\u4ee5\u6307\u5b9a\u5b57\u7b26\u4e32\u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c \u5982 <code>*.test</code> \u8868\u793a\u5ffd\u7565\u6240\u6709\u4ee5 <code>.test</code> \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u5982 <code>a.test</code></p> <p>\u82e5\u6587\u4ef6\u540d\u5b57\u7b26\u4e32\u4ee5 <code>*</code> \u7ed3\u5c3e\uff0c\u5219\u5c06\u5ffd\u7565\u4ee5\u6307\u5b9a\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u6587\u4ef6\uff0c \u5982 <code>temp*</code> \u8868\u793a\u5ffd\u7565\u6240\u6709\u4ee5 <code>temp</code> \u5f00\u5934\u7684\u6587\u4ef6\uff0c\u5982 <code>tempfile</code></p> <ul> <li>\u7c7b\u578b\uff1a<code>List[str]</code></li> </ul>"},{"location":"zh/config/#ignore_patterns","title":"ignore_patterns","text":"<p>Danger</p> <p><code>ignore_patterns</code> \u5339\u914d\u7684\u6587\u4ef6\u5728\u56de\u6863\u65f6\u4e0d\u4f1a\u88ab\u4fdd\u7559\u3002 \u56de\u6863\u540e\uff0c\u76ee\u6807\u6587\u4ef6\u5939\u4e2d\u53ea\u5b58\u5728\u5df2\u5907\u4efd\u7684\u5185\u5bb9\u3002 \u4ec5\u5bf9\u65e0\u7528\u6570\u636e\u4f7f\u7528\u6b64\u9009\u9879\u3002</p> <p>\u4e00\u4e2a gitignore \u98ce\u683c \u7684\u6a21\u677f\u4e32\u5217\u8868\uff0c \u88ab\u5339\u914d\u4e2d\u7684\u6587\u4ef6 / \u6587\u4ef6\u5939\u5c06\u5728\u521b\u5efa\u5907\u4efd\u65f6\u88ab\u5ffd\u7565</p> <p>\u6a21\u677f\u4e32\u5339\u914d\u65f6\u7684\u6839\u8def\u5f84\u662f source_root\u3002 \u4f8b\u5982\uff0c\u5982\u679c <code>source_root</code> \u662f <code>server</code>\uff0c\u90a3\u4e48\u6a21\u677f\u4e32 <code>world/trash*.obj</code> \u5c06\u5339\u914d <code>server/world/trash1.obj</code></p> <p>\u9ed8\u8ba4\u5305\u542b\u4e00\u4e2a <code>**/session.lock</code> \u6a21\u677f\u4e32\uff0c\u7528\u4e8e\u5339\u914d\u4f4d\u4e8e\u4efb\u4f55\u4f4d\u7f6e\u7684\uff0c\u540d\u4e3a <code>session.lock</code> \u7684\u6587\u4ef6\uff0c \u4ee5\u89e3\u51b3 Windows \u4e0b <code>session.lock</code> \u88ab\u670d\u52a1\u7aef\u5360\u7528\u5bfc\u81f4\u5907\u4efd\u5931\u8d25\u7684\u95ee\u9898</p> <ul> <li>\u7c7b\u578b\uff1a<code>List[str]</code></li> </ul>"},{"location":"zh/config/#retain_patterns","title":"retain_patterns","text":"<p>\u4e00\u4e2a gitignore \u98ce\u683c \u7684\u6a21\u677f\u4e32\u5217\u8868\uff0c \u88ab\u5339\u914d\u4e2d\u7684\u6587\u4ef6 / \u6587\u4ef6\u5939\u5c06\u5728\u521b\u5efa\u5907\u4efd\u65f6\u88ab\u5ffd\u7565\u3001\u5728\u8fd8\u539f\u5907\u4efd\u65f6\u88ab\u4fdd\u7559</p> <p>\u6a21\u677f\u4e32\u5339\u914d\u65f6\u7684\u6839\u8def\u5f84\u662f source_root\u3002 \u4f8b\u5982\uff0c\u5982\u679c <code>source_root</code> \u662f <code>server</code>\uff0c\u90a3\u4e48\u6a21\u677f\u4e32 <code>world/trash*.obj</code> \u5c06\u5339\u914d <code>server/world/trash1.obj</code></p> <p>\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u90a3\u4e9b\u65e0\u9700\u5907\u4efd\uff0c\u4f46\u4ecd\u9700\u4fdd\u7559\u7684\u6587\u4ef6\uff0c \u5982\u670d\u52a1\u7aef\u6a21\u7ec4\u7684\u5927\u4f53\u79ef\u6570\u636e\u5e93\u3001\u7f51\u9875\u5730\u56fe\u7684\u6e32\u67d3\u8f93\u51fa\u7b49</p> \u9009\u9879 \u7528\u9014 \u5907\u4efd\u65f6\u5ffd\u7565 \u8fd8\u539f\u65f6\u4fdd\u7559 ignore_patterns \u5ffd\u7565 + \u629b\u5f03\u65e0\u7528\u7684\u6570\u636e \u221a \u00d7 retain_patterns \u5ffd\u7565 + \u4fdd\u7559\u65e0\u9700\u5907\u4efd\u7684\u6570\u636e \u221a \u221a <ul> <li>\u7c7b\u578b\uff1a<code>List[str]</code></li> </ul>"},{"location":"zh/config/#follow_target_symlink","title":"follow_target_symlink","text":"<p>\u5728\u8bbe\u4e3a <code>true</code> \u65f6\uff0c\u5bf9\u4e8e\u7c7b\u578b\u4e3a\u7b26\u53f7\u94fe\u63a5\u7684 \u5907\u4efd\u76ee\u6807\uff0c Prime Backup \u9664\u4e86\u4f1a\u521b\u5efa\u5b83\u4eec\u7684\u5907\u4efd\u5916\uff0c \u8fd8\u4f1a\u628a\u7b26\u53f7\u94fe\u63a5\u7684\u5b9e\u9645\u76ee\u6807\u5305\u62ec\u5728\u5907\u4efd\u76ee\u6807\u4e2d</p> <p>\u4f8b\u5982\uff0c\u5bf9\u4e8e\u4ee5\u4e0b\u7b26\u53f7\u94fe\u63a5\u5173\u7cfb\u56fe\uff1a</p> <pre><code>world --&gt; foo --&gt; bar\n^\n\u5907\u4efd\u76ee\u6807\n</code></pre> <p>Prime Backup \u9664\u4e86\u4f1a\u4fdd\u5b58 <code>world</code> \u8fd9\u4e2a\u7b26\u53f7\u94fe\u63a5\u5916\uff0c\u8fd8\u4f1a\u4fdd\u5b58 <code>foo</code> \u7b26\u53f7\u94fe\u63a5\uff0c\u548c\u6700\u7ec8\u7684\u7684 <code>bar</code> \u6587\u4ef6\u5939</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>false</code></li> </ul>"},{"location":"zh/config/#reuse_stat_unchanged_file","title":"reuse_stat_unchanged_file","text":"<p>\u542f\u7528\u65f6\uff0c\u5728\u521b\u5efa\u5907\u4efd\u8fc7\u7a0b\u4e2d\uff0cPrime Backup \u5c06\u5c1d\u8bd5\u76f4\u63a5\u590d\u7528\u4e0a\u6b21\u5907\u4efd\u4e2d\u90a3\u4e9b\u72b6\u6001\u672a\u6539\u53d8\u7684\u6587\u4ef6\u3002 \u5bf9\u4e8e\u8fd9\u4e9b\u672a\u6539\u53d8\u7edf\u8ba1\u4fe1\u606f\u7684\u6587\u4ef6\uff0c\u5c06\u76f4\u63a5\u590d\u7528\u4e4b\u524d\u5907\u4efd\u65f6\u50a8\u5b58\u7684\u65e7\u6587\u4ef6\uff0c\u4e0d\u518d\u8fdb\u884c\u6587\u4ef6\u54c8\u5e0c\u68c0\u67e5\u786e\u8ba4</p> <p>Prime Backup \u4f1a\u68c0\u67e5\u6587\u4ef6\u7684\u5982\u4e0b\u8fd9\u4e9b\u4fe1\u606f\u3002\u4e0b\u8ff0\u8fd9\u4e9b\u4fe1\u606f\u5b8c\u5168\u4e00\u81f4\u7684\u6587\u4ef6\uff0c\u5c06\u88ab\u8ba4\u4e3a\u65e0\u53d8\u5316\uff1a</p> <ul> <li>\u6587\u4ef6\u8def\u5f84</li> <li>\u6587\u4ef6\u5927\u5c0f</li> <li>\u6587\u4ef6\u6a21\u5f0f\u4f4d\uff08mode\uff09</li> <li>\u6587\u4ef6\u6240\u6709\u8005\u7684 UID\u3001GID</li> <li>\u6587\u4ef6\u7684\u4fee\u6539\u65f6\u95f4\uff08\u7cbe\u5ea6\uff1a\u5fae\u79d2\uff09</li> </ul> <p>\u5982\u679c\u4f60\u60f3\u83b7\u5f97\u5c3d\u53ef\u80fd\u5feb\u7684\u5907\u4efd\u521b\u5efa\u901f\u5ea6\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u542f\u7528\u6b64\u9009\u9879\uff0c\u4f46\u8fd9\u4f1a\u5f15\u5165\u6f5c\u5728\u7684\u5907\u4efd\u4e0d\u5b8c\u6574\u7684\u98ce\u9669\u3002 \u9664\u975e\u4f60\u786e\u5b9e\u9700\u8981\u8fd9\u4e00\u5907\u4efd\u901f\u5ea6\u589e\u76ca\uff0c\u6216\u8005\u7cfb\u7edf\u78c1\u76d8\u8bfb\u53d6\u6027\u80fd\u8fc7\u4f4e\uff0c\u5426\u5219\u4e0d\u5efa\u8bae\u542f\u7528\u6b64\u9009\u9879</p> <p>Warning</p> <p>\u8bf7\u5728\u786e\u4fdd\u670d\u52a1\u5668\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u6587\u4ef6\u7cfb\u7edf\u6b63\u5e38\u4e14\u7a33\u5b9a\u8fd0\u884c\u540e\uff0c\u518d\u542f\u7528\u6b64\u9009\u9879\u3002 \u5426\u5219\uff0c\u5982\u679c\u51fa\u73b0\u7cfb\u7edf\u65f6\u95f4\u56de\u9000\u6216\u6587\u4ef6\u7cfb\u7edf\u5143\u6570\u636e\u5f02\u5e38\u7b49\u95ee\u9898\uff0c\u53ef\u80fd\u4f1a\u9020\u6210\u67d0\u4e9b\u6587\u4ef6\u7684\u5185\u5bb9\u53d8\u5316\u4f46 stat \u4fdd\u6301\u4e0d\u53d8\u7684\u60c5\u51b5\uff0c \u4ece\u800c\u5bfc\u81f4 Prime Backup \u521b\u5efa\u51fa\u4e86\u4e00\u4e2a\u4e0d\u5b8c\u6574\u7684\u5907\u4efd</p> <p>Tip</p> <p>\u9664\u975e\u4f60\u786e\u5b9e\u9700\u8981\u8fd9\u4e00\u5907\u4efd\u901f\u5ea6\u589e\u76ca\uff0c\u6216\u8005\u7cfb\u7edf\u78c1\u76d8\u8bfb\u53d6\u6027\u80fd\u8fc7\u4f4e\uff0c\u5426\u5219\u4e0d\u5efa\u8bae\u542f\u7528\u6b64\u9009\u9879\u3002 Prime Backup \u7684\u901f\u5ea6\u5df2\u7ecf\u8db3\u591f\u5feb\u4e86</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>false</code></li> </ul>"},{"location":"zh/config/#creation_skip_missing_file","title":"creation_skip_missing_file","text":"<p>\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u670d\u52a1\u7aef\u7684\u63d2\u4ef6 / mod \u5e76\u4e0d\u4f1a\u9075\u4ece /save off` \u547d\u4ee4\uff0c \u5728 PB \u521b\u5efa\u5907\u4efd\u65f6\u4ecd\u53ef\u80fd\u6267\u884c\u5220\u9664\u6587\u4ef6\u7684\u64cd\u4f5c\u3002 \u8fd9\u4e9b\u7f3a\u5931\u7684\u6587\u4ef6\u4f1a\u5bfc\u81f4\u5907\u4efd\u64cd\u4f5c\u56e0\u627e\u4e0d\u5230\u6587\u4ef6\u800c\u5931\u8d25</p> <p>\u82e5\u4f60\u5e0c\u671b\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u5ffd\u7565\u8fd9\u4e9b\u201c\u6587\u4ef6\u4e0d\u5b58\u5728\u201d\u7684\u9519\u8bef\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u5f00\u542f\u8be5\u9009\u9879</p> <p>\u53e6\u89c1\uff1acreation_skip_missing_file_patterns \u9009\u9879\uff0c \u7528\u4e8e\u63a7\u5236\u5141\u8bb8\u5ffd\u7565\u201c\u6587\u4ef6\u4e0d\u5b58\u5728\u201d\u9519\u8bef\u7684\u6587\u4ef6\u8303\u56f4</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>false</code></li> </ul>"},{"location":"zh/config/#creation_skip_missing_file_patterns","title":"creation_skip_missing_file_patterns","text":"<p>\u4e00\u4e2a gitignore \u98ce\u683c \u7684\u6a21\u677f\u4e32\u5217\u8868\uff0c \u4e0e creation_skip_missing_file_patterns \u9009\u9879\u914d\u5408\u4f7f\u7528</p> <p>\u5728\u521b\u5efa\u5907\u4efd\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8be5\u9009\u9879\u5339\u914d\u4e2d\u7684\u6587\u4ef6\u53d1\u751f\u7684\u201c\u6587\u4ef6\u4e0d\u5b58\u5728\u201d\u9519\u8bef\u5c06\u88ab\u5ffd\u7565</p> <p>\u9ed8\u8ba4\u503c\u4e3a <code>[\"**\"]</code>\uff0c\u8868\u793a\u5339\u914d\u6240\u6709\u6587\u4ef6\u3002\u5efa\u8bae\u5c06\u5176\u9650\u5236\u4e3a\u4ec5\u9488\u5bf9\u90a3\u4e9b\u6613\u53d8\u7684\u6587\u4ef6\uff0c\u5982 <code>[\"trash/*.tmp\"]</code></p> <ul> <li>\u7c7b\u578b\uff1a<code>List[str]</code></li> </ul>"},{"location":"zh/config/#hash_method","title":"hash_method","text":"<p>\u5bf9\u6587\u4ef6\u8fdb\u884c\u54c8\u5e0c\u65f6\u6240\u4f7f\u7528\u7684\u7b97\u6cd5\u3002\u53ef\u7528\u9009\u9879\uff1a<code>\"xxh128\"</code>\u3001<code>\"sha256\"</code>\u3001<code>\"blake3\"</code></p> \u54c8\u5e0c\u7b97\u6cd5 \u63cf\u8ff0 \u901f\u5ea6 \u5bc6\u7801\u5b66\u5b89\u5168\u6027 <code>xxh128</code> \u4e00\u79cd\u6781\u5feb\u7684\u3001\u9ad8\u8d28\u91cf\u7684 128 \u4f4d\u54c8\u5e0c\u7b97\u6cd5\uff0c\u4e0d\u63d0\u4f9b\u5bc6\u7801\u5b66\u5b89\u5168\u6027\u3002\u63a8\u8350\u4f7f\u7528\uff0c\u9664\u975e\u4f60\u60f3\u8981\u7406\u8bba\u4e0a\u7684\u6781\u7aef\u5b89\u5168 \u2605\u2605\u2605\u2605\u2605 <code>sha256</code> \u4e00\u79cd\u5e7f\u6cdb\u4f7f\u7528\u7684\u3001\u5bc6\u7801\u5b66\u5b89\u5168\u7684 256 \u4f4d\u54c8\u5e0c\u7b97\u6cd5\u3002\u5b83\u6bd4 xxh128 \u6162\uff0c\u4f46\u5982\u679c CPU \u5e26\u786c\u4ef6\u52a0\u901f\u7684\u8bdd\u4e5f\u4e0d\u4f1a\u592a\u6162 \u2605\u2605 <code>blake3</code> \u4e00\u79cd\u9ad8\u6548\u7684\u3001\u5bc6\u7801\u5b66\u5b89\u5168\u7684\u54c8\u5e0c\u7b97\u6cd5\u3002\u6bd4 sha256 \u5feb\u5f88\u591a\uff0c\u4f46\u662f\u4f9d\u7136\u6bd4 xxh128 \u6162 \u2605\u2605\u2605\u2606 <p>Note</p> <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528 <code>blake3</code> \u4f5c\u4e3a\u54c8\u5e0c\u7b97\u6cd5\uff0c\u4f60\u9700\u8981\u624b\u52a8\u5b89\u88c5 <code>blake3</code> Python \u5e93\u3002 \u5b83\u5e76\u4e0d\u5305\u542b\u5728\u9ed8\u8ba4\u7684 Python \u4f9d\u8d56\u5217\u8868\u4e2d\uff0c\u56e0\u4e3a\u5b83\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u9700\u8981 rust \u73af\u5883\u6765\u6784\u5efa\u5b89\u88c5</p> <pre><code>pip3 install blake3\n</code></pre> <ul> <li>\u7c7b\u578b\uff1a<code>str</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>\"xxh128\"</code></li> </ul>"},{"location":"zh/config/#compress_method","title":"compress_method","text":"<p>\u5728\u50a8\u5b58\u5907\u4efd\u4e2d\u7684\u6587\u4ef6\u65f6\uff0c\u6240\u4f7f\u7528\u7684\u538b\u7f29\u65b9\u6cd5</p> \u538b\u7f29\u65b9\u6cd5 \u63cf\u8ff0 \u901f\u5ea6 \u538b\u7f29\u7387 <code>plain</code> \u65e0\u538b\u7f29\uff0c\u76f4\u63a5\u590d\u5236\u3002\u82e5\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\uff0c\u5c06\u4f7f\u7528\u5199\u65f6\u590d\u5236\u6280\u672f\u8fdb\u884c\u6587\u4ef6\u590d\u5236 \u2605\u2605\u2605\u2605\u2605 \u2606 <code>gzip</code> \u57fa\u4e8e zlib \u7684 gzip \u5e93\u3002<code>.gz</code> \u6587\u4ef6\u540c\u6b3e\u683c\u5f0f \u2605\u2605 \u2605\u2605\u2605\u2605 <code>lzma</code> LZMA \u7b97\u6cd5\u3002<code>.xz</code> \u6587\u4ef6\u540c\u6b3e\u683c\u5f0f\u3002\u63d0\u4f9b\u6700\u4f73\u7684\u538b\u7f29\u7387\uff0c\u4f46\u662f\u901f\u5ea6\u975e\u5e38\u6162 \u2606 \u2605\u2605\u2605\u2605\u2605 <code>zstd</code> Zstandard \u7b97\u6cd5\u3002\u4e00\u4e2a\u4f18\u79c0\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u5728\u901f\u5ea6\u548c\u538b\u7f29\u7387\u95f4\u53d6\u5f97\u4e86\u8f83\u597d\u7684\u5e73\u8861\u3002\u63a8\u8350\u4f7f\u7528 \u2605\u2605\u2605\u2606 \u2605\u2605\u2605\u2605 <code>lz4</code> LZ4 \u7b97\u6cd5\u3002\u6bd4 Zstandard \u5feb\uff0c\u89e3\u538b\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u4f46\u662f\u538b\u7f29\u7387\u76f8\u5bf9\u8f83\u4f4e \u2605\u2605\u2605\u2605 \u2605\u2605\u2606 <p>Warning</p> <p>\u66f4\u6539 <code>compress_method</code> \u53ea\u4f1a\u5f71\u54cd\u65b0\u5907\u4efd\u4e2d\u7684\u65b0\u6587\u4ef6\uff08\u5373\u65b0\u7684\u6570\u636e\u5bf9\u8c61\uff09</p> <p>Note</p> <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528 <code>lz4</code> \u4f5c\u4e3a\u538b\u7f29\u65b9\u6cd5\uff0c\u4f60\u9700\u8981\u624b\u52a8\u5b89\u88c5 <code>lz4</code> Python \u5e93</p> <pre><code>pip3 install lz4\n</code></pre> <ul> <li>\u7c7b\u578b\uff1a<code>str</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>\"zstd\"</code></li> </ul>"},{"location":"zh/config/#compress_threshold","title":"compress_threshold","text":"<p>\u5bf9\u4e8e\u5927\u5c0f\u5c0f\u4e8e <code>compress_threshold</code> \u7684\u6587\u4ef6\uff0c\u4e0d\u542f\u7528\u538b\u7f29\u3002\u5b83\u4eec\u5c06\u4ee5 <code>plain</code> \u683c\u5f0f\u5b58\u50a8</p> <p>Warning</p> <p>\u66f4\u6539 <code>compress_threshold</code> \u53ea\u4f1a\u5f71\u54cd\u65b0\u5907\u4efd\u4e2d\u7684\u65b0\u6587\u4ef6\uff08\u5373\u65b0\u7684\u6570\u636e\u5bf9\u8c61\uff09</p> <ul> <li>\u7c7b\u578b\uff1aint</li> <li>\u9ed8\u8ba4\u503c\uff1a<code>64</code></li> </ul>"},{"location":"zh/config/#\u5b9a\u65f6\u5907\u4efd\u914d\u7f6e","title":"\u5b9a\u65f6\u5907\u4efd\u914d\u7f6e","text":"<p>\u5b9a\u65f6\u5907\u4efd\u529f\u80fd\u7684\u914d\u7f6e</p> <p>\u8be5\u529f\u80fd\u4f1a\u5b9a\u671f\u4e3a\u670d\u52a1\u5668\u81ea\u52a8\u521b\u5efa\u5907\u4efd</p> <pre><code>{\n    \"enabled\": false,\n    \"interval\": \"12h\",\n    \"crontab\": null,\n    \"jitter\": \"10s\",\n    \"reset_timer_on_backup\": true,\n    \"require_online_players\": false,\n    \"require_online_players_blacklist\": []\n}\n</code></pre>"},{"location":"zh/config/#enabled-interval-crontab-jitter","title":"enabled, interval, crontab, jitter","text":"<p>\u89c1 \u5b9a\u65f6\u4f5c\u4e1a\u914d\u7f6e \u5c0f\u8282</p>"},{"location":"zh/config/#reset_timer_on_backup","title":"reset_timer_on_backup","text":"<p>\u662f\u5426\u5728\u6bcf\u6b21\u624b\u52a8\u5907\u4efd\u65f6\u91cd\u7f6e\u8ba1\u5212\u5b9a\u65f6\u5668</p> <p>\u8be5\u529f\u80fd\u4ec5\u5728\u5b9a\u65f6\u5907\u4efd\u4f5c\u4e1a\u4f7f\u7528\u95f4\u9694\u6a21\u5f0f\u7684\u5b9a\u65f6\u5668\u7684\u65f6\u5019\uff0c\u624d\u6709\u6548\u679c</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>true</code></li> </ul>"},{"location":"zh/config/#require_online_players","title":"require_online_players","text":"<p>\u82e5\u8bbe\u4e3a <code>true</code>\uff0c\u5219\u53ea\u6709\u5728\u670d\u52a1\u5668\u4e2d\u5b58\u5728\u73a9\u5bb6\u65f6\uff0c\u624d\u6b63\u5e38\u8fdb\u884c\u5b9a\u65f6\u5907\u4efd\u3002 \u5982\u679c\u6240\u6709\u73a9\u5bb6\u5747\u5df2\u79bb\u7ebf\uff0c\u5219\u5728\u4e0b\u4e00\u6b21\u5b9a\u65f6\u5907\u4efd\u5b8c\u6210\u540e\uff0c\u4e4b\u540e\u7684\u5b9a\u65f6\u5907\u4efd\u90fd\u4f1a\u88ab\u8df3\u8fc7\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0cPrime Backup \u5728\u6ca1\u6709\u73a9\u5bb6\u5728\u7ebf\u4e0a\u65f6\uff0c\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21\u5b9a\u65f6\u5907\u4efd</p> <p>\u65f6\u95f4\u7ebf\u4e3e\u4f8b\uff1a</p> <pre><code>flowchart LR\n    subgraph g1[\u6709\u73a9\u5bb6\u5728\u7ebf]\n    b1[8:00\\n\u5907\u4efd\u521b\u5efa] --&gt; b2\n    end\n\n    subgraph g2[\u65e0\u73a9\u5bb6\u5728\u7ebf]\n    b2[9:00\\n\u5907\u4efd\u521b\u5efa] --&gt; b3\n    b3[10:00\\n\u5907\u4efd\u521b\u5efa] --&gt; b4:::disabled\n    b4[11:00\\n\u5907\u4efd\u8df3\u8fc7] --&gt; b5:::disabled\n    end\n\n    subgraph g3[\u6709\u73a9\u5bb6\u5728\u7ebf]\n    b5[12:00\\n\u5907\u4efd\u8df3\u8fc7] --&gt; b6\n    b6[13:00\\n\u5907\u4efd\u521b\u5efa]\n    end\n\n    classDef disabled fill:#eee,stroke:#aaa,color:gray\n</code></pre> <p>Note</p> <p>\u8be5\u529f\u80fd\u9700\u8981 Prime Backup \u63d2\u4ef6\u5728 \u670d\u52a1\u5668\u542f\u52a8\u524d \u5c31\u88ab\u52a0\u8f7d\u3002 \u8fd9\u662f\u5fc5\u9700\u7684\uff0c\u4ee5\u4fbf Prime Backup \u80fd\u591f\u6b63\u786e\u8ba1\u7b97\u5728\u7ebf\u73a9\u5bb6\u6570\u91cf</p> <p>\u5982\u679c Prime Backup \u63d2\u4ef6\u662f\u5728\u670d\u52a1\u5668\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u88ab\u52a0\u8f7d\u7684\uff0c \u73a9\u5bb6\u68c0\u6d4b\u529f\u80fd\u5c06\u88ab\u7981\u7528\uff0c\u5c31\u5982\u540c require_online_players \u88ab\u8bbe\u7f6e\u4e3a\u4e86 <code>false</code> \u4e00\u6837\u3002</p> <p>\u7279\u4f8b\uff1a\u5982\u679c\u5b58\u5728 MinecraftDataAPI \u63d2\u4ef6\uff0c \u90a3\u4e48 Prime Backup \u5c06\u5229\u7528\u5176 API \u52a8\u6001\u5730\u67e5\u8be2\u5728\u7ebf\u73a9\u5bb6\uff0c\u6b64\u65f6\u4e0a\u8ff0\u9700\u6c42\u5c06\u4e0d\u518d\u5b58\u5728</p> <p>Note</p> <p>\u5bf9\u4e8e\u90a3\u4e9b\u884c\u4e3a\u8868\u73b0\u8fc7\u4e8e\u4e0d\u539f\u7248\u7684\u670d\u52a1\u5668\uff0cPrime Backup \u7684\u73a9\u5bb6\u5728\u7ebf\u8ba1\u7b97\u903b\u8f91\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c</p> <p>Tip</p> <p>\u7531\u4e8e Prime Backup \u652f\u6301\u6587\u4ef6\u53bb\u91cd\u548c\u9ad8\u53ef\u81ea\u5b9a\u4e49\u7684 \u6e05\u7406\u914d\u7f6e \u529f\u80fd\uff0c \u5373\u4f7f\u5728\u73a9\u5bb6\u4e0d\u5728\u7ebf\u4e5f\u7167\u5e38\u8fdb\u884c\u5b9a\u65f6\u5907\u4efd\uff0c\u4e5f\u4e0d\u4f1a\u5360\u7528\u8fc7\u591a\u7684\u78c1\u76d8\u7a7a\u95f4</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>false</code></li> </ul>"},{"location":"zh/config/#require_online_players_blacklist","title":"require_online_players_blacklist","text":"<p>\u5728 require_online_players \u5224\u65ad\u662f\u5426\u5b58\u5728\u73a9\u5bb6\u5728\u7ebf\u65f6\uff0c \u6392\u9664\u7684\u73a9\u5bb6\u540d\u6b63\u5219\u8868\u8fbe\u5f0f\u5217\u8868</p> <p>\u5982\u679c\u4f60\u5e0c\u671b\u670d\u52a1\u5668\u4e2d\u53ea\u6709\u67d0\u4e9b\u73a9\u5bb6\u5728\u7ebf\u7684\u65f6\u5019\uff0c\u4e5f\u89c6\u4f5c\u670d\u52a1\u5668\u4e2d\u4e0d\u5b58\u5728\u73a9\u5bb6\uff0c \u4e0d\u8fdb\u884c\u5b9a\u65f6\u5907\u4efd\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u8be5\u9009\u9879</p> <p>\u914d\u7f6e\u4e3e\u4f8b\uff1a</p> <pre><code>\"require_online_players_blacklist\": [\n    \"bot_.*\",  // \u5339\u914d\u6240\u6709\u4ee5 \"bot_\" \u4e3a\u524d\u7f00\u7684\u73a9\u5bb6\u540d\n    \"Steve\"    // \u5339\u914d \"Steve\" \u8fd9\u4e2a\u73a9\u5bb6\u540d\n]\n</code></pre> <p>Note</p> <p>\u5217\u8868\u4e2d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5c06\u5bf9\u73a9\u5bb6\u540d\u6267\u884c \u5168\u4e32\u5339\u914d \u68c0\u67e5</p> <p>\u5339\u914d\u65f6 \u5ffd\u7565\u5927\u5c0f\u5199</p> <ul> <li>\u7c7b\u578b\uff1a<code>List[re.Pattern]</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>[]</code></li> </ul>"},{"location":"zh/config/#\u6e05\u7406\u914d\u7f6e","title":"\u6e05\u7406\u914d\u7f6e","text":"<p>Prime Backup \u7684\u5907\u4efd\u6e05\u7406\u529f\u80fd\u53ef\u7528\u4e8e\u81ea\u52a8\u6e05\u7406\u8fc7\u65f6\u5907\u4efd</p> <pre><code>{\n    \"enabled\": true,\n    \"interval\": \"3h\",\n    \"crontab\": null,\n    \"jitter\": \"20s\",\n    \"timezone_override\": null,\n    \"regular_backup\": {\n        \"enabled\": false,\n        \"max_amount\": 0,\n        \"max_lifetime\": \"0s\",\n        \"last\": -1,\n        \"hour\": 0,\n        \"day\": 0,\n        \"week\": 0,\n        \"month\": 0,\n        \"year\": 0\n    },\n    \"temprory_backup\": {\n        \"enabled\": true,\n        \"max_amount\": 10,\n        \"max_lifetime\": \"30d\",\n        \"last\": -1,\n        \"hour\": 0,\n        \"day\": 0,\n        \"week\": 0,\n        \"month\": 0,\n        \"year\": 0\n    }\n}\n</code></pre> <p>\u5b83\u5305\u542b\u4e24\u79cd\u6e05\u7406\u8bbe\u7f6e\uff0c\u5206\u522b\u9488\u5bf9\u4e8e\u5982\u4e0b\u4e24\u79cd\u7c7b\u578b\u7684\u5907\u4efd\uff1a</p> <ul> <li><code>regular_backup</code>: \u9488\u5bf9\u5e38\u89c4\u5907\u4efd\uff0c\u5373\u975e\u4e34\u65f6\u5907\u4efd</li> <li><code>temporary_backup</code>: \u9488\u5bf9\u4e34\u65f6\u5907\u4efd\uff0c\u5982\u56de\u6863\u524d\u7684\u5907\u4efd</li> </ul> <p>\u6bcf\u79cd\u6e05\u7406\u8bbe\u7f6e\u90fd\u8be6\u7ec6\u63cf\u8ff0\u4e86\u5b58\u6863\u7684\u4fdd\u7559\u7b56\u7565</p> <p>Prime Backup \u4f1a\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\u6765\u51b3\u5b9a\u5220\u9664/\u4fdd\u7559\u54ea\u4e9b\u5907\u4efd</p> <ol> <li>\u4f7f\u7528 <code>last</code>, <code>hour</code>, <code>day</code>, <code>week</code>, <code>month</code>, <code>year</code>\uff0c    \u57fa\u4e8e PBS \u4fdd\u7559\u7b56\u7565\uff0c\u7b5b\u9009\u51fa\u8981\u5220\u9664/\u4fdd\u7559\u7684\u5907\u4efd</li> <li>\u4f7f\u7528 <code>max_amount</code>\u3001<code>max_lifetime</code> \u8fd9\u4e24\u6761\u89c4\u5219\uff0c\u5728\u7b2c\u4e00\u6b65\u4fdd\u7559\u7684\u90a3\u4e9b\u5907\u4efd\u91cc\uff0c\u7b5b\u51fa\u90a3\u4e9b\u65e7\u7684\u548c\u8fc7\u671f\u7684\u5907\u4efd</li> <li>\u6536\u96c6\u4e0a\u8ff0\u4e24\u6b21\u7b5b\u9009\u8fc7\u7a0b\u4e2d\uff0c\u627e\u5230\u7684\u54ea\u4e9b\u9700\u8981\u5220\u9664\u7684\u5907\u4efd\uff0c\u5e76\u9010\u4e2a\u8fdb\u884c\u5220\u9664</li> </ol> <p>\u5220\u9664\u5907\u4efd\u76f8\u5173\u7684\u51b3\u7b56\u7ed3\u679c\u4f1a\u4ee5\u65e5\u5fd7\u5f62\u5f0f\u50a8\u5b58\u5728 \u6570\u636e\u6839\u76ee\u5f55 \u7684 <code>logs/prune.log</code> \u6587\u4ef6\u91cc</p> prune.log<pre><code>Backup #147 at 2023-12-10 21:49:09: keep=True reason=keep last 1\nBackup #146 at 2023-12-10 21:36:10: keep=True reason=keep last 2\nBackup #145 at 2023-12-10 21:26:25: keep=True reason=keep last 3\nBackup #144 at 2023-12-10 21:21:22: keep=False reason=superseded by 145 (hour)\nBackup #143 at 2023-12-10 21:16:19: keep=False reason=superseded by 145 (hour)\nBackup #142 at 2023-12-10 21:11:14: keep=False reason=superseded by 145 (hour)\nBackup #141 at 2023-12-10 21:05:06: keep=False reason=superseded by 145 (hour)\nBackup #140 at 2023-12-10 21:00:03: keep=True reason=protected\nBackup #139 at 2023-12-10 20:55:01: keep=True reason=keep hour 1\nBackup #138 at 2023-12-10 20:49:57: keep=False reason=superseded by 139 (hour)\nBackup #137 at 2023-12-10 20:44:53: keep=False reason=superseded by 139 (hour)\nBackup #136 at 2023-12-10 20:39:45: keep=False reason=superseded by 139 (hour)\nBackup #135 at 2023-12-10 20:34:41: keep=False reason=superseded by 139 (hour)\nBackup #128 at 2023-12-10 19:59:06: keep=True reason=keep hour 2\nBackup #116 at 2023-12-10 18:56:14: keep=True reason=keep hour 3\nBackup #104 at 2023-12-10 17:55:35: keep=False reason=superseded by 116 (day)\nBackup #22 at 2023-12-09 23:59:53: keep=True reason=keep day 1\n</code></pre>"},{"location":"zh/config/#max_amount","title":"max_amount","text":"<p>\u5b9a\u4e49\u8981\u4fdd\u7559\u7684\u6700\u5927\u5907\u4efd\u6570\u91cf\uff0c\u4f8b\u5982 <code>10</code> \u8868\u793a\u6700\u591a\u4fdd\u7559\u6700\u65b0\u7684 10 \u4e2a\u5907\u4efd</p> <p>\u8bbe\u7f6e\u4e3a <code>0</code> \u8868\u793a\u65e0\u9650\u5236</p> <ul> <li>\u7c7b\u578b\uff1a<code>int</code></li> </ul>"},{"location":"zh/config/#max_lifetime","title":"max_lifetime","text":"<p>\u5b9a\u4e49\u6240\u6709\u5907\u4efd\u7684\u6700\u5927\u4fdd\u5b58\u65f6\u957f\u3002\u8d85\u51fa\u7ed9\u5b9a\u65f6\u957f\u7684\u5907\u4efd\u5c06\u88ab\u6e05\u7406</p> <p>\u8bbe\u7f6e\u4e3a <code>0s</code> \u8868\u793a\u65e0\u65f6\u957f\u9650\u5236</p> <ul> <li>\u7c7b\u578b\uff1a<code>Duration</code></li> </ul>"},{"location":"zh/config/#last-hour-day-week-month-year","title":"last, hour, day, week, month, year","text":"<p>\u4e00\u7ec4 PBS \u98ce\u683c\u7684\u6e05\u7406\u9009\u9879\uff0c\u7528\u4e8e\u63cf\u8ff0\u5907\u4efd\u7684\u5220\u9664/\u4fdd\u7559\u65b9\u5f0f</p> <p>\u67e5\u770b \u6e05\u7406\u6a21\u62df\u5668 \u4e86\u89e3\u8fd9\u4e9b\u9009\u9879\u7684\u66f4\u591a\u89e3\u91ca</p> <p>\u6e05\u7406\u6a21\u62df\u5668 \u4e5f\u53ef\u7528\u4e8e\u6a21\u62df\u5907\u4efd\u7684\u4fdd\u7559\u7b56\u7565</p> <p>\u6ce8\u610f\uff1a\u503c <code>0</code> \u8868\u793a\u4e0d\u4e3a\u8be5\u533a\u95f4\u4fdd\u7559\u4efb\u4f55\u5907\u4efd\uff1b\u503c <code>-1</code> \u8868\u793a\u8be5\u533a\u95f4\u53ef\u4ee5\u4fdd\u7559\u65e0\u9650\u591a\u7684\u5907\u4efd\uff0c\u4e0e\u8bbe\u4e3a\u6781\u5927\u503c\u7b49\u4ef7</p> <ul> <li>\u7c7b\u578b\uff1a<code>int</code></li> </ul>"},{"location":"zh/config/#enabled-interval-crontab-jitter_1","title":"enabled, interval, crontab, jitter","text":"<p>\u89c1 \u5b9a\u65f6\u4f5c\u4e1a\u914d\u7f6e \u5c0f\u8282</p>"},{"location":"zh/config/#timezone_override","title":"timezone_override","text":"<p>\u5728\u5907\u4efd\u6e05\u7406\u65f6\u6240\u4f7f\u7528\u7684\u65f6\u533a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff08\u4f7f\u7528 <code>null</code> \u503c\uff09\uff0cPrime Backup \u5c06\u4f7f\u7528\u672c\u5730\u65f6\u533a</p> <p>\u4f8b\u5b50\uff1a<code>null</code>, <code>\"Asia/Shanghai\"</code>, <code>\"US/Eastern\"</code>, <code>\"Europe/Amsterdam\"</code></p> <ul> <li>\u7c7b\u578b\uff1a<code>Optional[str]</code></li> <li>\u9ed8\u8ba4\u503c\uff1a<code>null</code></li> </ul>"},{"location":"zh/config/#\u6570\u636e\u5e93\u914d\u7f6e","title":"\u6570\u636e\u5e93\u914d\u7f6e","text":"<p>Prime Backup \u6240\u4f7f\u7528\u7684 SQLite \u6570\u636e\u5e93\u7684\u76f8\u5173\u914d\u7f6e</p> <pre><code>{\n    \"compact\": {\n        \"enabled\": true,\n        \"interval\": null,\n        \"crontab\": \"0 7 * * 0\",\n        \"jitter\": \"1m\"\n    },\n    \"backup\": {\n        \"enabled\": true,\n        \"interval\": null,\n        \"crontab\": \"0 6 * * 0\",\n        \"jitter\": \"1m\"\n    }\n}\n</code></pre> <p>\u5b50\u914d\u7f6e <code>compact</code> \u548c <code>backup</code> \u63cf\u8ff0\u4e86\u4e0e\u6570\u636e\u5e93\u76f8\u5173\u7684\u5b9a\u65f6\u4f5c\u4e1a</p>"},{"location":"zh/config/#compact","title":"compact","text":"<p>\u6570\u636e\u5e93\u7cbe\u7b80\u4f5c\u4e1a</p> <p>\u5b83\u5bf9\u6570\u636e\u5e93\u4f7f\u7528\u4e86 VACUUM\u6307\u4ee4\uff0c \u4ee5\u7cbe\u7b80\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u5e76\u91ca\u653e\u672a\u4f7f\u7528\u7684\u7a7a\u95f4</p>"},{"location":"zh/config/#backup","title":"backup","text":"<p>\u6570\u636e\u5e93\u5907\u4efd\u4f5c\u4e1a</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cPrime Backup \u4f1a\u5b9a\u671f\u5728 \u6570\u636e\u6839\u76ee\u5f55 \u5185\u7684  <code>db_backup</code> \u76ee\u5f55\u4e2d\u521b\u5efa\u6570\u636e\u5e93\u5907\u4efd\uff0c\u4ee5\u9632\u6570\u636e\u5e93\u6587\u4ef6\u635f\u574f\u800c\u5bfc\u81f4\u65e0\u6cd5\u8bbf\u95ee\u5907\u4efd</p> <p>\u6570\u636e\u5e93\u5907\u4efd\u5c06\u4ee5 <code>.tar.xz</code> \u683c\u5f0f\u5b58\u50a8\uff0c\u4e0d\u4f1a\u5360\u7528\u592a\u591a\u7a7a\u95f4</p>"},{"location":"zh/config/#enabled-interval-crontab-jitter_2","title":"enabled, interval, crontab, jitter","text":"<p>\u89c1 \u5b9a\u65f6\u4f5c\u4e1a\u914d\u7f6e \u5c0f\u8282</p>"},{"location":"zh/config/#\u5b50\u914d\u7f6e\u9879\u8bf4\u660e","title":"\u5b50\u914d\u7f6e\u9879\u8bf4\u660e","text":""},{"location":"zh/config/#\u5b9a\u65f6\u4f5c\u4e1a\u914d\u7f6e","title":"\u5b9a\u65f6\u4f5c\u4e1a\u914d\u7f6e","text":"<p>\u4e00\u4e2a\u5b9a\u65f6\u4f5c\u4e1a\u76f8\u5173\u7684\u914d\u7f6e\uff0c\u7528\u4e8e\u63cf\u8ff0\u8be5\u4f5c\u4e1a\u4f1a\u5728\u4ec0\u4e48\u65f6\u5019\u6267\u884c\u3002\u6709\u4e24\u79cd\u6a21\u5f0f\uff1a</p> <ul> <li>\u95f4\u9694\u6a21\u5f0f\uff1a\u6309\u7ed9\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u6267\u884c\u4f5c\u4e1a\u3002\u7b2c\u4e00\u6b21\u6267\u884c\u4e5f\u8981\u7b49\u5f85\u7ed9\u5b9a\u7684\u95f4\u9694</li> <li>\u5b9a\u65f6\u6a21\u5f0f: \u5728\u7279\u5b9a\u65f6\u95f4\u6267\u884c\u4f5c\u4e1a\uff0c\u7531 crontab \u5b57\u7b26\u4e32\u63cf\u8ff0</li> </ul> <p>\u82e5\u4f5c\u4e1a\u88ab\u542f\u7528\uff0c\u4f60\u5fc5\u987b\u9009\u62e9\u4e0a\u8ff0\u6a21\u5f0f\u4e4b\u4e00\uff0c\u5e76\u6b63\u786e\u8bbe\u7f6e\u76f8\u5173\u914d\u7f6e\u503c</p> <pre><code>// \u4f8b\u5b50\n{\n    \"enabled\": true,\n    \"interval\": \"1h\",\n    \"crontab\": null,\n    \"jitter\": \"10s\"\n}\n</code></pre>"},{"location":"zh/config/#enabled_1","title":"enabled","text":"<p>\u4f5c\u4e1a\u7684\u5f00\u5173\u3002\u8bbe\u4e3a <code>true</code> \u4ee5\u542f\u7528\u8be5\u4f5c\u4e1a\uff0c\u8bbe\u4e3a <code>false</code> \u4ee5\u7981\u7528\u8be5\u5b9a\u65f6\u4f5c\u4e1a</p> <ul> <li>\u7c7b\u578b\uff1a<code>bool</code></li> </ul>"},{"location":"zh/config/#interval","title":"interval","text":"<p>\u5728\u95f4\u9694\u6a21\u5f0f\u4e2d\u4f7f\u7528\u3002\u4e24\u6b21\u4efb\u52a1\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694</p> <p>\u82e5\u4f5c\u4e1a\u672a\u4f7f\u7528\u95f4\u9694\u6a21\u5f0f\uff0c\u5176\u503c\u5e94\u4e3a <code>null</code></p> <ul> <li>\u7c7b\u578b\uff1a<code>Optional[str]</code></li> </ul>"},{"location":"zh/config/#crontab","title":"crontab","text":"<p>\u5728\u5b9a\u65f6\u6a21\u5f0f\u4e2d\u4f7f\u7528\u3002\u63cf\u8ff0\u5b9a\u65f6\u8ba1\u5212\u7684\u4e00\u4e2a crontab \u5b57\u7b26\u4e32</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 https://crontab.guru/ \u6765\u521b\u5efa\u4e00\u4e2a crontab \u5b57\u7b26\u4e32</p> <p>\u82e5\u4f5c\u4e1a\u672a\u4f7f\u7528\u5b9a\u65f6\u6a21\u5f0f\uff0c\u5176\u503c\u5e94\u4e3a <code>null</code></p> <ul> <li>\u7c7b\u578b\uff1a<code>Optional[str]</code></li> </ul>"},{"location":"zh/config/#jitter","title":"jitter","text":"<p>\u4e24\u6b21\u4f5c\u4e1a\u4e4b\u95f4\uff0c\u6267\u884c\u4e4b\u95f4\u7684\u6296\u52a8</p> <p>\u4e0b\u4e00\u4e2a\u4efb\u52a1\u7684\u5b9e\u9645\u6267\u884c\u65f6\u95f4\uff0c\u5c06\u5728\u8303\u56f4 <code>[0, jitter]</code> \u5185\u8fdb\u884c\u968f\u673a\u504f\u79fb</p> <p>\u8bbe\u7f6e\u4e3a <code>\"0s\"</code> \u8868\u793a\u65e0\u6296\u52a8</p> <ul> <li>\u7c7b\u578b\uff1a<code>str</code></li> </ul>"},{"location":"zh/config/#\u7279\u6b8a\u7684\u503c\u7c7b\u578b","title":"\u7279\u6b8a\u7684\u503c\u7c7b\u578b","text":""},{"location":"zh/config/#duration","title":"Duration","text":"<p>\u4f7f\u7528\u5b57\u7b26\u4e32\u63cf\u8ff0\u7684\u65f6\u95f4\u6301\u7eed\u957f\u5ea6\uff0c\u5982\uff1a<code>\"3s\"</code>\u3001<code>\"15m\"</code></p> <p>Duration \u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff1a\u6570\u5b57\u548c\u65f6\u95f4\u5355\u4f4d\u3002</p> <p>\u5bf9\u4e8e\u6570\u5b57\u90e8\u5206\uff0c\u5b83\u53ef\u4ee5\u662f\u6574\u6570\u6216\u6d6e\u70b9\u6570</p> <p>\u5bf9\u4e8e\u5355\u4f4d\u90e8\u5206\uff0c\u53c2\u89c1\u4e0b\u8868\uff1a</p> \u5355\u4f4d \u63cf\u8ff0 \u7b49\u4ef7\u4e8e \u79d2\u6570 <code>ms</code> \u6beb\u79d2 0.001 \u79d2 0.001 <code>s</code>, <code>sec</code> \u79d2 1 \u79d2 1 <code>m</code>, <code>min</code> \u5206\u949f 60 \u79d2 60 <code>h</code>, <code>hour</code> \u5c0f\u65f6 60 \u5206\u949f 3600 <code>d</code>, <code>day</code> \u5929 24 \u5c0f\u65f6 86400 <code>mon</code>, <code>month</code> \u6708 30 \u5929 2592000 <code>y</code>, <code>year</code> \u5e74 365 \u5929 31536000"},{"location":"zh/quick_start/","title":"\u5feb\u901f\u4e0a\u624b","text":""},{"location":"zh/quick_start/#\u5b89\u88c5","title":"\u5b89\u88c5","text":""},{"location":"zh/quick_start/#\u51c6\u5907-mcdr","title":"\u51c6\u5907 MCDR","text":"<p>Prime Backup \u662f\u4e00\u4e2a MCDReforged \u63d2\u4ef6\uff0c \u5b83\u9700\u8981 <code>mcdreforged&gt;=2.12</code> \u624d\u80fd\u8fd0\u884c</p> <p>\u8981\u5b89\u88c5/\u66f4\u65b0 MCDReforged\uff0c\u4f60\u53ef\u4ee5\u8fd0\u884c\uff1a</p> <pre><code>pip3 install mcdreforged&gt;=2.12 -U\n</code></pre> <p>\u8be6\u89c1 MCDR \u7684\u76f8\u5173\u6587\u6863</p>"},{"location":"zh/quick_start/#\u5b89\u88c5-python-\u4f9d\u8d56","title":"\u5b89\u88c5 Python \u4f9d\u8d56","text":"<p>Prime Backup \u9700\u8981\u4e00\u4e9b python \u5e93\u624d\u80fd\u8fd0\u884c\uff0c\u5b83\u4eec\u90fd\u88ab\u5217\u5728\u4e86 GitHub \u4ed3\u5e93 \u6839\u76ee\u5f55\u7684 requirements.txt \u6587\u4ef6\u4e2d</p> requirements.txt<pre><code>APScheduler&gt;=3.8,&lt;4\nSQLAlchemy&gt;=2\nmcdreforged&gt;=2.12.0\npathspec\npsutil\npydantic&gt;=2\npytz\ntyping_extensions\nxxhash&gt;=3\nzstandard\n</code></pre> <p>\u4f7f\u7528\u547d\u4ee4 <code>pip3 install -r requirements.txt</code> \u5373\u53ef\u5b89\u88c5\u6240\u6709\u9700\u8981\u7684 Python \u4f9d\u8d56</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4\u4e00\u952e\u5b89\u88c5\u6240\u6709\u9700\u8981\u7684 Python \u4f9d\u8d56</p> <pre><code>pip3 install -r https://tisunion.github.io/PrimeBackup/requirements.txt\n</code></pre>"},{"location":"zh/quick_start/#\u53ef\u9009\u4f9d\u8d56","title":"\u53ef\u9009\u4f9d\u8d56","text":"<p>\u4e00\u4e9b Prime Backup \u529f\u80fd\u6240\u9700\u8981\u7684 Python \u5e93\u5e76\u6ca1\u6709\u5728 requirements.txt \u4e2d\u5217\u51fa\uff0c \u56e0\u4e3a\u5728\u67d0\u4e9b\u73af\u5883\u4e0b\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u5e93\u53ef\u80fd\u4f1a \u82b1\u4e0d\u5c11\u529f\u592b</p> <p>\u5982\u679c\u4f60\u60f3\u89e3\u9501 Prime Backup \u7684\u5168\u90e8\u529f\u80fd\u7279\u6027\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>pip3 install -r https://tisunion.github.io/PrimeBackup/requirements.optional.txt\n</code></pre> <p>\u8fd9\u4e9b\u53ef\u9009\u7684\u4f9d\u8d56\u4e5f\u88ab\u5217\u5728\u4e86 requirements.optional.txt \u91cc</p> requirements.optional.txt<pre><code># hash\nblake3\n\n# compress\nlz4\n</code></pre>"},{"location":"zh/quick_start/#\u5b89\u88c5\u63d2\u4ef6","title":"\u5b89\u88c5\u63d2\u4ef6","text":"<p>\u4ece GitHub Release \u4e0b\u8f7d Prime Backup \u63d2\u4ef6\uff0c \u5e76\u5c06\u5176\u653e\u5165 MCDR \u7684\u63d2\u4ef6\u6587\u4ef6\u5939\u4e2d\uff0c\u7136\u540e\u6267\u884c MCDR \u63d2\u4ef6\u91cd\u8f7d \u64cd\u4f5c</p>"},{"location":"zh/quick_start/#\u914d\u7f6e","title":"\u914d\u7f6e","text":"<p>\u5728\u4f7f\u7528 Prime Backup \u4e4b\u524d\uff0c\u4f60\u9700\u8981\u6b63\u786e\u914d\u7f6e\u5176\u914d\u7f6e\u6587\u4ef6\uff0c\u624d\u53ef\u8ba9\u5176\u5de5\u4f5c</p> <p>\u522b\u7740\u6025\uff0c\u5bf9\u4e8e\u5927\u591a\u6570\u914d\u7f6e\u9009\u9879\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 \u4f46\u8fd8\u6709\u4e00\u4e9b\u9009\u9879\uff0c\u662f\u9700\u8981\u4f60\u914d\u7f6e\u4e00\u4e0b\u7684</p>"},{"location":"zh/quick_start/#\u4f4d\u7f6e","title":"\u4f4d\u7f6e","text":"<p>\u5728 Prime Backup \u63d2\u4ef6\u9996\u6b21\u88ab MCDR \u52a0\u8f7d\u65f6\uff0c\u5176\u914d\u7f6e\u6587\u4ef6\u5c06\u81ea\u52a8\u751f\u6210\uff0c \u8def\u5f84\u4e3a\uff1a<code>config/prime_backup/config.json</code></p> <pre><code>mcdr_root/\n\u2514\u2500\u2500 config/\n    \u2514\u2500\u2500 prime_backup/\n        \u2514\u2500\u2500 config.json       &lt;-------------\n</code></pre> <p>\u5b83\u662f\u4e00\u4e2a json \u6587\u4ef6\uff0c\u6240\u4ee5\u4f60\u5f97\u9075\u5faa json \u8bed\u6cd5\u6765\u7f16\u8f91</p>"},{"location":"zh/quick_start/#\u5fc5\u8981\u7684\u914d\u7f6e\u9879","title":"\u5fc5\u8981\u7684\u914d\u7f6e\u9879","text":"<p>\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u4e00\u4e9b\u91cd\u8981\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a</p> <ol> <li> <p>\u5907\u4efd\u76ee\u6807\uff0c\u5373\u4f60\u9700\u8981\u5907\u4efd\u7684\u90a3\u4e9b\u6587\u4ef6\u5939\u548c\u6587\u4ef6\u3002     \u4f60\u9700\u8981\u628a <code>targets</code> \u6570\u7ec4\u91cc\u7684 <code>\"world\"</code> \u7ed9\u4fee\u6539\u6210\u4f60\u7684\u5b58\u6863\u6587\u4ef6\u5939\u7684\u540d\u5b57</p> <pre><code>// \u6839\u914d\u7f6e\n{\n    // ...\n    \"backup\": {\n        \"targets\": [\n            \"world\"\n        ],\n    }\n    // ...\n}\n</code></pre> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u5982\u679c\u4f60\u5728\u7528\u50cf bukkit \u90a3\u6837\u628a\u6bcf\u4e2a\u7ef4\u5ea6\u5b58\u5728\u72ec\u7acb\u7684\u6587\u4ef6\u5939\u91cc\u7684\u670d\u52a1\u5668\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8fd9\u4e48\u914d\u7f6e\uff1a</p> <pre><code>\"targets\": [\n    \"world\",\n    \"world_nether\",\n    \"world_the_end\"\n]\n</code></pre> </li> <li> <p>\u7528\u4e8e\u8ba1\u7b97/\u50a8\u5b58\u5907\u4efd\u6570\u636e\u7684\u65b9\u5f0f</p> <pre><code>// \u6839\u914d\u7f6e\n{\n    // ...\n    \"backup\": {\n        \"hash_method\": \"xxh128\",\n        \"compress_method\": \"zstd\",\n    }\n    // ...\n}\n</code></pre> <ul> <li> <p><code>hash_method</code>: \u5bf9\u6587\u4ef6\u8fdb\u884c\u54c8\u5e0c\u7684\u7b97\u6cd5\u3002\u53ef\u7528\u9009\u9879\uff1a \"xxh128\", \"sha256\", \"blake3\"</p> <ul> <li><code>\"xxh128\"</code>:\uff1a\u4e00\u79cd\u6781\u5feb\u7684\u3001\u9ad8\u8d28\u91cf\u7684\u54c8\u5e0c\u7b97\u6cd5\uff0c\u4e0d\u63d0\u4f9b\u5bc6\u7801\u5b66\u5b89\u5168\u4fdd\u8bc1\u3002   \u63a8\u8350\u4f7f\u7528\uff0c\u9664\u975e\u4f60\u60f3\u8981\u7406\u8bba\u4e0a\u7684\u6781\u7aef\u5b89\u5168</li> <li><code>\"sha256\"</code>: \u4e00\u79cd\u5e7f\u6cdb\u4f7f\u7528\u7684\u3001\u5bc6\u7801\u5b66\u5b89\u5168\u7684\u54c8\u5e0c\u7b97\u6cd5</li> <li><code>\"blake3\"</code>: \u4e00\u79cd\u9ad8\u6548\u7684\u3001\u5bc6\u7801\u5b66\u5b89\u5168\u7684\u54c8\u5e0c\u7b97\u6cd5\u3002\u6bd4 sha256 \u5feb\u5f88\u591a\uff0c\u4f46\u662f\u4f9d\u7136\u6bd4 xxh128 \u6162\u3002   \u63a8\u8350\u4f7f\u7528\uff0c\u8bb0\u5f97\u8981\u88c5 <code>blake3</code> Python \u4f9d\u8d56</li> </ul> </li> <li> <p><code>compress_method</code>: \u5907\u4efd\u6587\u4ef6\u7684\u538b\u7f29\u65b9\u5f0f\u3002\u5e38\u7528\u5efa\u8bae\uff1a</p> <ul> <li><code>\"plain\"</code>: \u65e0\u538b\u7f29\u3002\u5982\u679c\u4f60\u5e0c\u671b\u83b7\u5f97\u6700\u5feb\u7684\u64cd\u4f5c\u901f\u5ea6\uff0c\u5c31\u7528\u8fd9\u4e2a</li> <li><code>\"zstd\"</code>: \u5feb\u901f\u4e14\u9ad8\u6548\u7684\u538b\u7f29\u7b97\u6cd5\u3002\u5982\u679c\u4f60\u60f3\u8282\u7ea6\u4e00\u4e9b\u78c1\u76d8\u7a7a\u95f4\u7684\u8bdd\uff0c\u63a8\u8350\u4f7f\u7528</li> </ul> </li> </ul> <p>Note</p> <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528 <code>blake3</code> \u4f5c\u4e3a\u54c8\u5e0c\u7b97\u6cd5\uff0c\u4f60\u9700\u8981\u624b\u52a8\u5b89\u88c5 <code>blake3</code> Python \u5e93\u3002 \u5b83\u5e76\u4e0d\u5305\u542b\u5728\u9ed8\u8ba4\u7684 Python \u4f9d\u8d56\u5217\u8868\u4e2d\uff0c\u56e0\u4e3a\u5b83\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u9700\u8981 rust \u73af\u5883\u6765\u6784\u5efa\u5b89\u88c5</p> <pre><code>pip3 install blake3\n</code></pre> <p>Note</p> <p>\u5efa\u8bae\u4f60\u5728\u4e00\u5f00\u59cb\u5c31\u660e\u667a\u5730\u8bbe\u7f6e\u8fd9\u4e24\u4e2a\u9009\u9879</p> <p>\u867d\u7136\u4f60\u4f9d\u7136\u53ef\u4ee5\u5728 MCDR \u4e2d\u4f7f\u7528 <code>!!pb database migrate_xxx</code> \u6307\u4ee4\u6765\u8fc1\u79fb\u73b0\u6709\u5907\u4efd\u7684\u538b\u7f29\u65b9\u6cd5\u548c\u54c8\u5e0c\u7b97\u6cd5\uff0c \u4f46\u5b8c\u6210\u8fc1\u79fb\u53ef\u80fd\u9700\u8981\u82b1\u8d39\u4e00\u5b9a\u7684\u65f6\u95f4\u548c\u78c1\u76d8\u7a7a\u95f4</p> </li> <li> <p>\u542f\u7528\u63d2\u4ef6\u3002\u5728\u914d\u7f6e\u6587\u4ef6\u7684\u6839\u5bf9\u8c61\u4e2d\uff0c\u8bbe\u7f6e <code>enabled</code> \u4e3a <code>true</code>\u3002\u5b83\u5e94\u8be5\u4f4d\u4e8e\u6574\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u6700\u4e0a\u9762</p> <pre><code>// root config\n{\n    \"enabled\": true\n    // ...\n}\n</code></pre> </li> <li> <p>\u4f7f\u7528 MCDR \u547d\u4ee4\u91cd\u8f7d\u63d2\u4ef6</p> <pre><code>!!MCDR plugin reload prime_backup\n</code></pre> </li> </ol> <p>\u73b0\u5728 Prime Backup \u5e94\u8be5\u5f00\u59cb\u5de5\u4f5c\u4e86</p>"},{"location":"zh/quick_start/#\u4f7f\u7528","title":"\u4f7f\u7528","text":"<p>\u5728 MCDR \u63a7\u5236\u53f0\u6216\u6e38\u620f\u4e2d\u8f93\u5165 <code>!!pb</code>\uff0c\u4f60\u5e94\u8be5\u770b\u5230\u5982\u4e0b\u6240\u793a\u7684\u6b22\u8fce\u9875\u9762</p> <p></p>"},{"location":"zh/concept/","title":"\u6982\u5ff5","text":"<p>Prime Backup \u7684\u6982\u5ff5\u6587\u6863</p> <ul> <li>\u5907\u4efd\u6807\u7b7e</li> <li>\u5b58\u50a8\u7ed3\u6784</li> </ul>"},{"location":"zh/concept/backup_tag/","title":"\u5907\u4efd\u6807\u7b7e","text":"<p>TODO</p>"},{"location":"zh/concept/storage_structure/","title":"\u5b58\u50a8\u7ed3\u6784","text":"<pre><code>graph TB\n    A[\u5907\u4efd] --&gt; B[\u57fa\u7840\u6587\u4ef6\u96c6]\n    A --&gt; C[\u589e\u91cf\u6587\u4ef6\u96c6]\n\n    B --&gt; D1[\u6587\u4ef61]\n    B --&gt; D2[\u6587\u4ef62]\n    B --&gt; D3[\u6587\u4ef63]\n\n    C --&gt; D4[\"\u6587\u4ef63(\u4fee\u6539)\"]\n    C --&gt; D5[\"\u6587\u4ef64(\u65b0\u589e)\"]\n\n    D1 --&gt; E1[\u6570\u636e\u5bf9\u8c61A]\n    D2 --&gt; E1\n    D3 --&gt; E2[\u6570\u636e\u5bf9\u8c61B]\n    D4 --&gt; E3[\u6570\u636e\u5bf9\u8c61C]\n    D5 --&gt; E4[\u6570\u636e\u5bf9\u8c61D]\n\n    style A fill:#e1f5fe\n    style B fill:#f3e5f5\n    style C fill:#f3e5f5\n    style D1 fill:#e8f5e8\n    style D2 fill:#e8f5e8\n    style D3 fill:#e8f5e8\n    style D4 fill:#e8f5e8\n    style D5 fill:#e8f5e8\n    style E1 fill:#fff3e0\n    style E2 fill:#fff3e0\n    style E3 fill:#fff3e0\n    style E4 fill:#fff3e0\n</code></pre>"},{"location":"zh/concept/storage_structure/#\u5907\u4efdbackup","title":"\u5907\u4efd\uff08Backup\uff09","text":"<p>\u4e00\u4e2a\u5907\u4efd\u4ee3\u8868\u5728\u7279\u5b9a\u65f6\u95f4\u70b9\u5bf9\u5907\u4efd\u76ee\u6807\u7684\u5b8c\u6574\u5feb\u7167\u3002\u6bcf\u4e2a\u5907\u4efd\u90fd\u6709\u552f\u4e00\u7684 ID \u4f5c\u4e3a\u5176\u6807\u8bc6\u7b26</p> <p>\u6bcf\u4e2a\u5907\u4efd\u5305\u542b\u521b\u5efa\u8005\u4fe1\u606f\u3001\u5907\u4efd\u6ce8\u91ca\u3001\u5907\u4efd\u65f6\u95f4\u7b49\u4e0e\u5907\u4efd\u76f8\u5173\u7684\u4fe1\u606f</p> <p>\u6bcf\u4e2a\u5907\u4efd\u90fd\u5173\u8054\u4e00\u4e2a\u57fa\u7840\u6587\u4ef6\u96c6\u548c\u4e00\u4e2a\u589e\u91cf\u6587\u4ef6\u96c6\uff0c\u5b83\u4eec\u4e24\u4e2a\u5171\u540c\u63cf\u8ff0\u4e86\u8fd9\u4e2a\u5907\u4efd\u6240\u542b\u7684\u6587\u4ef6\u5217\u8868</p>"},{"location":"zh/concept/storage_structure/#\u6587\u4ef6\u96c6fileset","title":"\u6587\u4ef6\u96c6\uff08Fileset\uff09","text":"<p>\u6587\u4ef6\u96c6\u662f\u5907\u4efd\u7684\u5b58\u50a8\u5355\u5143\uff0c\u91c7\u7528\u57fa\u7840\u6587\u4ef6\u96c6\u548c\u589e\u91cf\u6587\u4ef6\u96c6\u7684\u7ec4\u5408\u6a21\u5f0f</p> <p>\u57fa\u7840\u6587\u4ef6\u96c6\uff08Base Fileset\uff09\uff1a</p> <ul> <li>\u5305\u542b\u4e00\u4e2a\u5b8c\u6574\u7684\u6587\u4ef6\u5217\u8868</li> <li>\u5b58\u50a8\u6587\u4ef6\u7684\u5143\u6570\u636e\u548c\u5185\u5bb9\u5f15\u7528</li> <li>\u53ef\u4ee5\u88ab\u591a\u4e2a\u589e\u91cf\u6587\u4ef6\u96c6\u5f15\u7528</li> </ul> <p>\u589e\u91cf\u6587\u4ef6\u96c6\uff08Delta Fileset\uff09\uff1a</p> <ul> <li>\u4ec5\u5305\u542b\u76f8\u5bf9\u4e8e\u57fa\u7840\u6587\u4ef6\u96c6\u7684\u53d8\u66f4</li> <li>\u5b58\u50a8\u65b0\u589e\u3001\u4fee\u6539\u3001\u5220\u9664\u7684\u6587\u4ef6\u4fe1\u606f</li> <li>\u4f9d\u8d56\u57fa\u7840\u6587\u4ef6\u96c6\uff0c\u4e0d\u4f1a\u72ec\u7acb\u5b58\u5728</li> </ul>"},{"location":"zh/concept/storage_structure/#\u6587\u4ef6file","title":"\u6587\u4ef6\uff08File\uff09","text":"<p>\u6587\u4ef6\u4ee3\u8868\u5907\u4efd\u4e2d\u7684\u4e00\u4e2a\u6587\u4ef6\u9879\uff0c\u5305\u542b\u6587\u4ef6\u5143\u6570\u636e\u548c\u6570\u636e\u54c8\u5e0c</p> <ul> <li>\u5305\u542b\u6587\u4ef6\u76f8\u5bf9 source_root \u7684 unix \u98ce\u683c\u8def\u5f84</li> <li>\u5305\u542b\u6743\u9650\u3001\u6240\u6709\u8005\u3001\u65f6\u95f4\u6233\u7b49\u6587\u4ef6\u5143\u4fe1\u606f</li> <li>\u5bf9\u4e8e\u666e\u901a\u6587\u4ef6\uff0c\u4ec5\u50a8\u5b58\u5176\u6587\u4ef6\u5185\u5bb9\u7684\u54c8\u5e0c\u503c</li> <li>\u5bf9\u4e8e\u7b26\u53f7\u94fe\u63a5\u6587\u4ef6\uff0c\u76f4\u63a5\u50a8\u5b58\u5176\u6307\u5411\u7684\u8def\u5f84</li> <li>\u4f7f\u7528 role \u5b57\u6bb5\u6807\u8bc6\u5176\u5728\u6587\u4ef6\u96c6\u4e2d\u7684\u89d2\u8272\uff1a</li> <li>\u72ec\u7acb\u6587\u4ef6\uff1a\u57fa\u7840\u6587\u4ef6\u96c6\u4e2d\u7684\u5b8c\u6574\u6587\u4ef6</li> <li>\u8986\u76d6\u6587\u4ef6\uff1a\u589e\u91cf\u6587\u4ef6\u96c6\u4e2d\u66ff\u6362\u57fa\u7840\u6587\u4ef6\u7684\u6587\u4ef6</li> <li>\u65b0\u589e\u6587\u4ef6\uff1a\u589e\u91cf\u6587\u4ef6\u96c6\u4e2d\u65b0\u589e\u7684\u6587\u4ef6</li> <li>\u5220\u9664\u6807\u8bb0\uff1a\u589e\u91cf\u6587\u4ef6\u96c6\u4e2d\u88ab\u5220\u9664\u7684\u6587\u4ef6</li> </ul>"},{"location":"zh/concept/storage_structure/#\u6570\u636e\u5bf9\u8c61blob","title":"\u6570\u636e\u5bf9\u8c61\uff08Blob\uff09","text":"<p>\u6570\u636e\u5bf9\u8c61\uff08Blob\uff09\u662f\u5b9e\u9645\u7684\u6587\u4ef6\u5185\u5bb9\u7684\u5b9e\u9645\u50a8\u5b58\u5bf9\u8c61</p> <ul> <li>\u4f7f\u7528\u54c8\u5e0c\u503c\u4f5c\u4e3a\u5176\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u4e00\u4e2a\u54c8\u5e0c\u503c\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u6570\u636e\u5bf9\u8c61</li> <li>\u53ea\u50a8\u5b58\u6587\u4ef6\u7684\u5185\u5bb9\u6570\u636e\u53ca\u5176\u538b\u7f29\u65b9\u5f0f\uff0c\u4e0d\u50a8\u5b58\u5b9e\u9645\u6587\u4ef6\u7684\u5143\u4fe1\u606f</li> <li>\u4ee5\u6587\u4ef6\u5f62\u5f0f\u72ec\u7acb\u5b58\u50a8\uff0c\u4f4d\u4e8e storage_root \u8def\u5f84\u4e0b\u7684 blobs \u6587\u4ef6\u5939</li> <li>\u4e00\u4e2a\u6570\u636e\u5bf9\u8c61\u53ef\u88ab\u591a\u4e2a\u6587\u4ef6\u5bf9\u8c61\u5f15\u7528\u3002\u5f53\u5f15\u7528\u6570\u4e0b\u964d\u4e3a 0 \u65f6\uff0cPrimeBackup \u4f1a\u5220\u9664\u8fd9\u4e00\u6570\u636e\u5bf9\u8c61</li> </ul>"},{"location":"zh/concept/storage_structure/#\u5b58\u50a8\u67b6\u6784\u56fe","title":"\u5b58\u50a8\u67b6\u6784\u56fe","text":"<pre><code>graph LR\n    A[\u5907\u4efd\u6570\u636e] --&gt; DB[SQLite \u6570\u636e\u5e93]\n    A --&gt; blob_pool[\u6570\u636e\u6c60]\n\n    DB --&gt; backup[\u5907\u4efd\u5bf9\u8c61]\n    DB --&gt; fileset[\u6587\u4ef6\u96c6\u5bf9\u8c61]\n    DB --&gt; file[\u6587\u4ef6\u5bf9\u8c61]\n    DB --&gt; blob[\u6570\u636e\u5bf9\u8c61]\n\n    blob_pool --&gt; blob_storage[\u54c8\u5e0c\u5206\u7247]\n    blob_storage --&gt; blob_file[\u6570\u636e\u5bf9\u8c61\u6587\u4ef6]\n\n    style A fill:#e1f5fe\n    style DB fill:#f3e5f5\n    style blob_pool fill:#f3e5f5\n    style backup fill:#e8f5e8\n    style fileset fill:#e8f5e8\n    style file fill:#e8f5e8\n    style blob fill:#e8f5e8\n    style blob_storage fill:#fff3e0\n    style blob_file fill:#fff3e0\n</code></pre>"},{"location":"zh/feature/","title":"\u529f\u80fd\u6982\u89c8","text":"<p>Prime Backup \u4e3b\u8981\u529f\u80fd\u6982\u89c8</p>"},{"location":"zh/feature/#\u5907\u4efd\u529f\u80fd","title":"\u5907\u4efd\u529f\u80fd","text":"<ul> <li>\u5907\u4efd\u521b\u5efa</li> <li>\u5907\u4efd\u8fd8\u539f\uff08\u56de\u6863\uff09</li> <li>\u5907\u4efd\u5c55\u793a</li> <li>\u5907\u4efd\u7f16\u8f91</li> <li>\u5907\u4efd\u5bfc\u5165\u5bfc\u51fa</li> </ul>"},{"location":"zh/feature/#\u5b9a\u65f6\u4efb\u52a1","title":"\u5b9a\u65f6\u4efb\u52a1","text":"<ul> <li>\u5b9a\u65f6\u5907\u4efd</li> <li>\u5907\u4efd\u6e05\u7406</li> </ul>"},{"location":"zh/feature/#\u6570\u636e\u5e93\u64cd\u4f5c\u9ad8\u7ea7\u64cd\u4f5c","title":"\u6570\u636e\u5e93\u64cd\u4f5c\uff08\u9ad8\u7ea7\u64cd\u4f5c\uff09","text":"<ul> <li>\u6570\u636e\u5e93\u6982\u89c8</li> <li>\u6570\u636e\u5e93\u5185\u90e8\u5bf9\u8c61\u5ba1\u67e5</li> <li>\u6570\u636e\u5e93\u7ef4\u62a4</li> <li>\u6570\u636e\u5e93\u4fee\u6539</li> </ul>"},{"location":"zh/feature/backup_create/","title":"\u5907\u4efd\u521b\u5efa","text":"<p>\u521b\u5efa\u4e00\u4e2a\u5907\u4efd</p>"},{"location":"zh/feature/backup_create/#\u5907\u4efd\u6b65\u9aa4","title":"\u5907\u4efd\u6b65\u9aa4","text":""},{"location":"zh/feature/backup_create/#mcdr-\u73af\u5883","title":"MCDR \u73af\u5883","text":"<p>Prime Backup \u76ee\u524d\u4ec5\u652f\u6301\u5728 MCDR \u73af\u5883\u4e2d\u8fdb\u884c\u5907\u4efd\u521b\u5efa</p> <p>\u5728 MCDR \u73af\u5883\u4e2d\u521b\u5efa\u4e00\u4e2a\u5907\u4efd\uff0c\u53ea\u9700\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>!!pb make\n</code></pre> <p>\u5c31\u8fd9\u6837\uff0c\u975e\u5e38\u7b80\u5355\u7684\u4e00\u6761\u547d\u4ee4\uff0c\u5373\u53ef\u521b\u5efa\u4e00\u4e2a\u5907\u4efd</p> <p>\u793a\u4f8b\u63a7\u5236\u53f0\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb make\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] \u521b\u5efa\u5907\u4efd\u4e2d...\u8bf7\u7a0d\u7b49\n[Server] [00:46:11] [Server thread/INFO]: Automatic saving is now disabled\n[Server] [00:46:11] [Server thread/INFO]: Saving the game (this may take a moment!)\n[Server] [00:46:11] [Server thread/INFO]: ThreadedAnvilChunkStorage (world15): All chunks are saved\n[Server] [00:46:11] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM-1): All chunks are saved\n[Server] [00:46:11] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM1): All chunks are saved\n[Server] [00:46:11] [Server thread/INFO]: Saved the game\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: Scanning file for backup creation at path 'server', targets: ['world']\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: Creating backup for ['world'] at path 'server', file cnt 4106, timestamp 1760892371872862, creator 'console:', comment '', tags {}\n[MCDR] [00:46:12] [PB@51f5-worker-heavy/INFO] [prime_backup]: Create backup #59 done, +10 blobs (size 11.82MiB / 16.75MiB)\n[MCDR] [00:46:12] [PB@51f5-worker-heavy/INFO] [prime_backup]: Time costs: save wait 0.1s, create backup 1.49s\n[MCDR] [00:46:12] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] \u5907\u4efd\u5b8c\u6210, ID #59, \u8017\u65f61.6s, \u4f53\u79ef118.39MiB (+16.75MiB)\n[Server] [00:46:12] [Server thread/INFO]: Automatic saving is now enabled\n</code></pre> <p>\u793a\u4f8b\u6e38\u620f\u5185\u8f93\u51fa\uff1a</p> <p></p> <p>\u5982\u9700\u7ed9\u5907\u4efd\u5e26\u4e0a\u4e2a\u6ce8\u91ca\uff0c\u4fbf\u4e8e\u540e\u7eed\u67e5\u770b\u5907\u4efd\u65f6\u77e5\u9053\u8fd9\u4e2a\u5907\u4efd\u662f\u505a\u4ec0\u4e48\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4</p> <pre><code>!!pb make &lt;\u6ce8\u91ca&gt;\n</code></pre> <p>\u5982</p> <pre><code>!!pb make \u9999\u732a\u70e4\u597d\u4e86\n</code></pre> <p>\u5728\u5907\u4efd\u521b\u5efa\u5b8c\u540e\uff0c\u53ef\u901a\u8fc7 <code>!!pb show</code> \u6216 <code>!!pb list</code> \u547d\u4ee4\u6765\u67e5\u770b</p> <p>\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u53ef\u53c2\u8003 \u5907\u4efd\u67e5\u770b \u6587\u6863</p> <p></p>"},{"location":"zh/feature/backup_create/#\u547d\u4ee4\u884c\u73af\u5883","title":"\u547d\u4ee4\u884c\u73af\u5883","text":"<p>Prime Backup \u6682\u4e0d\u652f\u6301\u5728\u547d\u4ee4\u884c\u73af\u5883\u91cc\u521b\u5efa\u5907\u4efd\uff08\u4e0b\u6b21\u4e00\u5b9a\uff01\uff09</p>"},{"location":"zh/feature/backup_create/#\u76f8\u5173\u914d\u7f6e","title":"\u76f8\u5173\u914d\u7f6e","text":"<p>\u521b\u5efa\u76f8\u5173\u7684\u914d\u7f6e\u57fa\u672c\u4f4d\u4e8e\u4e0b\u8ff0\u4e24\u4e2a\u5c0f\u8282\uff1a</p> <ul> <li>\u670d\u52a1\u5668\u914d\u7f6e\uff0c\u5305\u542b\u5728\u521b\u5efa\u5907\u4efd\u7684\u8fc7\u7a0b\u4e2d PB \u5982\u4f55\u4e0e MC \u670d\u52a1\u5668\u4ea4\u4e92</li> <li>\u5907\u4efd\u914d\u7f6e\uff0c\u5305\u542b\u5404\u79cd\u521b\u5efa\u5907\u4efd\u76f8\u5173\u9009\u9879</li> </ul> <p>\u4e0b\u9762\u5217\u51fa\u4e86\u4e00\u4e9b\u5e38\u7528\u7684\u914d\u7f6e\u9879</p> \u9009\u9879 \u529f\u80fd server.turn_off_auto_save \u5728\u521b\u5efa\u5907\u4efd\u8fc7\u7a0b\u4e2d\uff0c\u662f\u5426\u8981\u4e34\u65f6\u5173\u95ed MC \u7684\u81ea\u52a8\u4fdd\u5b58 backup.targets \u4fee\u6539\u5907\u4efd\u76ee\u6807\uff0c\u8c03\u6574\u8981\u5907\u4efd\u54ea\u4e9b\u6587\u4ef6 / \u6587\u4ef6\u5939 backup.ignore_patterns \u5728\u5907\u4efd\u65f6\u5ffd\u7565\u67d0\u4e9b\u6587\u4ef6\uff0c\u5728\u56de\u6863\u65f6\u4e5f\u5220\u9664\u8fd9\u4e9b\u6587\u4ef6 backup.retain_patterns \u5728\u5907\u4efd\u65f6\u5ffd\u7565\u67d0\u4e9b\u6587\u4ef6\uff0c\u5728\u56de\u6863\u65f6\u4fdd\u7559\u8fd9\u4e9b\u6587\u4ef6\u4e0d\u53d8 backup.creation_skip_missing_file \u5728\u5907\u4efd\u65f6\u8df3\u8fc7\u7a81\u7136\u4e0d\u5b58\u5728\u7684\u6587\u4ef6 backup.hash_method \u54c8\u5e0c\u7b97\u6cd5\u3002PB \u4f1a\u590d\u7528\u54c8\u5e0c\u503c\u4e00\u81f4\u7684\u6587\u4ef6\uff0c\u4ee5\u51cf\u5c11\u5b58\u50a8\u7a7a\u95f4\u5360\u7528 backup.compress_method \u538b\u7f29\u7b97\u6cd5\u3002PB \u5728\u50a8\u5b58\u6587\u4ef6\u65f6\u7528\u7684\u538b\u7f29\u7b97\u6cd5 concurrency \u6700\u5927\u5e76\u53d1\u6570\u3002\u6839\u636e\u7cfb\u7edf\u8d44\u6e90\u9002\u5f53\u8c03\u5927\u6b64\u503c\uff0c\u53ef\u52a0\u901f\u8ba1\u7b97\u54c8\u5e0c\u7684\u901f\u5ea6 <p>Note</p> <p>\u5bf9\u4e8e <code>hash_method</code>\u3001<code>compress_method</code> \u8fd9\u4e24\u4e2a\u914d\u7f6e\u9879\uff0c\u5efa\u8bae\u5728\u521b\u5efa\u9996\u4e2a\u5907\u4efd\u524d\u5c31\u914d\u7f6e\u597d\u3002\u5bf9\u4e8e\u5df2\u521b\u5efa\u4e86\u5907\u4efd\u7684\u73af\u5883\uff0c\u82e5\u9700\u4fee\u6539\u4e0a\u8ff0\u4e24\u4e2a\u914d\u7f6e\u9879\uff0c\u8bf7\u6ce8\u610f\uff1a</p> <ul> <li><code>hash_method</code> \u914d\u7f6e\u9879\u4e0d\u53ef\u76f4\u63a5\u4fee\u6539\uff0c\u82e5\u76f4\u63a5\u4fee\u6539\u5219\u4f1a\u5bfc\u81f4 PB \u52a0\u8f7d\u5931\u8d25\u3002\u9700\u8981\u4f7f\u7528 <code>!!pb database migrate_hash_method &lt;xxx&gt;</code> \u547d\u4ee4\u6765\u8fdb\u884c\u8fc1\u79fb</li> <li><code>compress_method</code> \u914d\u7f6e\u9879\u53ef\u76f4\u63a5\u4fee\u6539\uff0c\u4f46\u4fee\u6539\u540e\u53ea\u5f71\u54cd\u65b0\u589e\u7684\u6587\u4ef6\u3002\u5982\u9700\u4fee\u6539\u5b58\u91cf\u6570\u636e\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u53ef\u4f7f\u7528 <code>!!pb database migrate_compress_method &lt;xxx&gt;</code> \u547d\u4ee4</li> </ul>"},{"location":"zh/feature/backup_create/#\u5907\u4efd\u6d41\u7a0b\u8be6\u89e3","title":"\u5907\u4efd\u6d41\u7a0b\u8be6\u89e3","text":"<p>\u4e0b\u9762\u5c06\u5217\u51fa PB \u521b\u5efa\u5907\u4efd\u8fc7\u7a0b\u4e2d\u7684\u64cd\u4f5c\u6d41\u7a0b</p> <ol> <li>\u4e0e MC \u670d\u52a1\u5668\u8fdb\u884c\u4ea4\u4e92\uff0c\u6784\u9020\u4e00\u4e2a\u53ef\u521b\u5efa\u5907\u4efd\u7684\u73af\u5883\uff08\u4e0b\u8ff0\u64cd\u4f5c\u5747\u53ef\u914d\u7f6e\uff09<ol> <li>\u4f7f\u7528\u4f8b\u5982 <code>save-off</code> \u7684\u547d\u4ee4\uff0c\u5173\u95ed MC \u7684\u81ea\u52a8\u4fdd\u5b58</li> <li>\u4f7f\u7528\u4f8b\u5982 <code>save-all flush</code> \u7684\u547d\u4ee4\uff0c\u8ba9 MC \u4fdd\u5b58\u5b58\u6863\u6570\u636e\u81f3\u78c1\u76d8</li> <li>\u7b49\u5f85 MC \u8f93\u51fa\u4f8b\u5982 <code>Saved the game</code> \u7684\u65e5\u5fd7\uff0c\u6b64\u65f6\u5b58\u6863\u4fdd\u5b58\u5b8c\u6bd5\uff0c\u53ef\u5f00\u59cb\u521b\u5efa\u5907\u4efd</li> </ol> </li> <li>\u521b\u5efa\u5907\u4efd<ol> <li>\u626b\u63cf\u8981\u5907\u4efd\u7684\u76ee\u6807\uff0c\u6392\u9664\u5ffd\u7565\u7684\u6587\u4ef6\uff0c\u6700\u7ec8\u5f97\u5230\u4e00\u4e2a\u8981\u5907\u4efd\u7684\u6587\u4ef6\u5217\u8868\uff0c\u5e76\u9644\u6709\u6587\u4ef6\u5143\u4fe1\u606f</li> <li>\u82e5\u53ef\u7528\u7684\u5e76\u53d1\u914d\u7f6e &gt; 1\uff0c\u5219\u4f7f\u7528\u591a\u7ebf\u7a0b\u9884\u5148\u8ba1\u7b97\u6bcf\u4e2a\u8981\u5907\u4efd\u7684\u6587\u4ef6\u7684\u54c8\u5e0c\u503c</li> <li>\u5bf9\u4e8e\u6bcf\u4e2a\u8981\u5907\u4efd\u7684\u6587\u4ef6\uff0c\u9010\u4e2a\u8fdb\u884c\uff1a<ol> <li>\u8ba1\u7b97\u54c8\u5e0c\u503c\u3002\u82e5\u4e4b\u524d\u8ba1\u7b97\u8fc7\u4e86\uff0c\u5219\u76f4\u63a5\u590d\u7528</li> <li>\u5224\u65ad\u6b64\u54c8\u5e0c\u503c\u7684\u6570\u636e\u662f\u5426\u5df2\u5907\u4efd\u8fc7\uff0c\u82e5\u65e0\u5219\u9700\u590d\u5236\u4e00\u4efd\u6570\u636e\u81f3\u5907\u4efd\u8def\u5f84</li> <li>\u5c06\u6b64\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u3001\u54c8\u5e0c\u503c\u5b58\u5165\u6570\u636e\u5e93\u4e2d</li> </ol> </li> <li>\u8ba1\u7b97\u6b64\u6b21\u5907\u4efd\u7684\u6587\u4ef6\u96c6\uff0c\u5b8c\u6210\u5907\u4efd</li> </ol> </li> <li>\u8fd8\u539f\u5bf9 MC \u670d\u52a1\u7aef\u7684\u64cd\u4f5c<ol> <li>\u82e5 MC \u7684\u81ea\u52a8\u4fdd\u5b58\u88ab\u5173\u95ed\u4e86\uff0c\u5c06\u4f1a\u5728\u8fd9\u91cc\u91cd\u65b0\u6253\u5f00</li> </ol> </li> </ol>"},{"location":"zh/feature/backup_display/","title":"\u5907\u4efd\u67e5\u770b","text":"<p>\u67e5\u770b\u5907\u4efd</p>"},{"location":"zh/feature/backup_display/#\u5907\u4efd\u5217\u8868","title":"\u5907\u4efd\u5217\u8868","text":""},{"location":"zh/feature/backup_display/#\u57fa\u672c\u7528\u6cd5","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u67e5\u770b\u5907\u4efd\u5217\u8868\uff0c\u4f7f\u7528\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>!!pb list\n</code></pre> <p>\u6b64\u547d\u4ee4\u5c06\u663e\u793a\u6700\u8fd1\u7684 10 \u4e2a\u5907\u4efd\uff0c\u6309\u65f6\u95f4\u964d\u5e8f\u6392\u5217\u3002</p> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb list\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] ======== \u5907\u4efd\u5217\u8868 ========\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] \u5171\u670917\u4e2a\u5907\u4efd:\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#85] 162.45MiB 2025-01-31 23:59:59: \u4e00\u6708\u6700\u540e\u5907\u4efd\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#84] 159.82MiB 2025-01-30 16:45:30: \u5efa\u7b51\u5b8c\u6210\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#83] 157.36MiB 2025-01-28 12:15:45: \u4ed3\u50a8\u91cd\u67842\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#82] 154.91MiB 2025-01-25 09:30:20: \u4ed3\u50a8\u91cd\u67841\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#81] 152.47MiB 2025-01-22 14:00:00: \u6bcf\u5468\u5907\u4efd\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#80] 150.03MiB 2025-01-20 20:18:33: \u7a7a\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#79] 147.59MiB 2025-01-18 11:05:12: \u65b0\u5730\u5f62\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#78] 145.15MiB 2025-01-15 08:22:45: \u5f00\u59cb\u586b\u5751\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#77] 142.71MiB 2025-01-10 02:00:00: \u7a7a\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] [#76] 140.27MiB 2025-01-05 19:40:15: \u57fa\u5730\u6269\u5efa\u5b8c\u6210\n[MCDR] [18:22:40] [PB@fc91-worker-light/INFO]: [PB] &lt;- 1/2 -&gt;\n</code></pre>"},{"location":"zh/feature/backup_display/#\u5217\u8868\u683c\u5f0f\u8bf4\u660e","title":"\u5217\u8868\u683c\u5f0f\u8bf4\u660e","text":"<p>\u6bcf\u4e2a\u5907\u4efd\u9879\u7684\u663e\u793a\u683c\u5f0f\u4e3a\uff1a</p> <pre><code>[#ID] [&gt;] [x] [\u6807\u5fd7\u4f4d] \u5927\u5c0f \u521b\u5efa\u65f6\u95f4: \u6ce8\u91ca\n</code></pre> <ul> <li><code>[#ID]</code>\uff1a\u5907\u4efd ID\uff0c\u70b9\u51fb\u53ef\u67e5\u770b\u8be6\u60c5</li> <li><code>[&gt;]</code>\uff1a\u7eff\u8272\u56de\u6863\u6309\u94ae\uff0c\u70b9\u51fb\u53ef\u5feb\u901f\u56de\u6863</li> <li><code>[x]</code>\uff1a\u7ea2\u8272\u5220\u9664\u6309\u94ae\uff0c\u70b9\u51fb\u53ef\u5220\u9664\u5907\u4efd\uff08\u53d7\u4fdd\u62a4\u5907\u4efd\u4e3a\u7070\u8272\uff09</li> <li><code>[\u6807\u5fd7\u4f4d]</code>\uff1a\u4f7f\u7528 <code>--flags</code> \u53c2\u6570\u65f6\u624d\u4f1a\u663e\u793a\u7684\u5907\u4efd\u6807\u5fd7</li> <li><code>\u5927\u5c0f</code>\uff1a\u5907\u4efd\u539f\u59cb\u5927\u5c0f\uff08\u53bb\u91cd/\u538b\u7f29\u524d\uff09</li> <li><code>\u521b\u5efa\u65f6\u95f4</code>\uff1a\u5907\u4efd\u521b\u5efa\u7684\u65f6\u95f4</li> <li><code>\u6ce8\u91ca</code>\uff1a\u5907\u4efd\u7684\u6ce8\u91ca\u6587\u672c\u3002\u82e5\u65e0\u5219\u4e3a\u7070\u8272\u7684\u201c\u7a7a\u201d</li> </ul>"},{"location":"zh/feature/backup_display/#\u53ef\u9009\u53c2\u6570","title":"\u53ef\u9009\u53c2\u6570","text":"<p>\u5907\u4efd\u5217\u8868\u547d\u4ee4\u652f\u6301\u4ee5\u4e0b\u53ef\u9009\u53c2\u6570\uff1a</p> \u53c2\u6570 \u8bf4\u660e <code>[\u9875\u7801]</code> \u67e5\u770b\u6307\u5b9a\u9875\u7801\u7684\u5907\u4efd <code>--per-page &lt;\u6570\u91cf&gt;</code> \u8bbe\u7f6e\u6bcf\u9875\u5c55\u793a\u7684\u5907\u4efd\u6570\u91cf (1-1000) <code>--sort &lt;\u6392\u5e8f\u65b9\u5f0f&gt;</code> \u8bbe\u7f6e\u6392\u5e8f\u65b9\u5f0f (id, id_r, time, time_r) <code>--creator &lt;\u521b\u5efa\u8005&gt;</code> \u4ec5\u663e\u793a\u6307\u5b9a\u521b\u5efa\u8005\u7684\u5907\u4efd <code>--me</code> \u4ec5\u663e\u793a\u5f53\u524d\u7528\u6237\u521b\u5efa\u7684\u5907\u4efd <code>--from &lt;\u8d77\u59cb\u65e5\u671f&gt;</code> \u4ec5\u663e\u793a\u6307\u5b9a\u65e5\u671f\u4e4b\u540e\u7684\u5907\u4efd <code>--to &lt;\u7ed3\u675f\u65e5\u671f&gt;</code> \u4ec5\u663e\u793a\u6307\u5b9a\u65e5\u671f\u4e4b\u524d\u7684\u5907\u4efd <code>-a, --all</code> \u663e\u793a\u6240\u6709\u5907\u4efd\uff08\u5305\u62ec\u9690\u85cf\u548c\u4e34\u65f6\u5907\u4efd\uff09 <code>--flag, --flags</code> \u663e\u793a\u5907\u4efd\u6807\u5fd7\u4f4d <p>\u6392\u5e8f\u65b9\u5f0f\u53c2\u6570\u652f\u6301\u4ee5\u4e0b\u53d6\u503c\uff1a</p> <ul> <li><code>id</code>\uff1a\u6309\u5907\u4efd ID \u5347\u5e8f\u6392\u5217</li> <li><code>id_r</code>\uff1a\u6309\u5907\u4efd ID \u964d\u5e8f\u6392\u5217</li> <li><code>time</code>\uff1a\u6309\u521b\u5efa\u65f6\u95f4\u5347\u5e8f\u6392\u5217</li> <li><code>time_r</code>\uff1a\u6309\u521b\u5efa\u65f6\u95f4\u964d\u5e8f\u6392\u5217\uff08\u9ed8\u8ba4\uff09</li> </ul> <p>\u65e5\u671f\u53c2\u6570\u652f\u6301\u4ee5\u4e0b\u683c\u5f0f\uff1a</p> \u683c\u5f0f \u793a\u4f8b \u8bf4\u660e <code>%Y</code> <code>2023</code> \u5e74\u4efd <code>%Y%m</code> <code>202311</code> \u5e74\u6708 <code>%Y%m%d</code> <code>20231130</code> \u5e74\u6708\u65e5 <code>%Y-%m-%d</code> <code>2023-11-30</code> \u5e74-\u6708-\u65e5 <code>%Y/%m/%d</code> <code>2023/11/30</code> \u5e74/\u6708/\u65e5 <code>%Y%m%d%H</code> <code>2023113021</code> \u5e74\u6708\u65e5\u65f6 <code>%Y%m%d%H%M</code> <code>202311302139</code> \u5e74\u6708\u65e5\u65f6\u5206 <code>%Y%m%d%H%M%S</code> <code>20231130213955</code> \u5e74\u6708\u65e5\u65f6\u5206\u79d2 <code>%Y%m%d %H%M%S</code> <code>20231130 213955</code> \u5e74\u6708\u65e5 \u65f6\u5206\u79d2 <code>%Y%m%d %H:%M:%S</code> <code>20231130 21:39:55</code> \u5e74\u6708\u65e5 \u65f6:\u5206:\u79d2 <code>%Y-%m-%d %H:%M:%S</code> <code>2023-11-30 21:39:55</code> \u5e74-\u6708-\u65e5 \u65f6:\u5206:\u79d2 <code>%Y-%m-%d %H:%M:%S.%f</code> <code>2023-11-30 21:39:55.123456</code> \u5e74-\u6708-\u65e5 \u65f6:\u5206:\u79d2.\u5fae\u79d2"},{"location":"zh/feature/backup_display/#\u5907\u4efd\u8be6\u60c5","title":"\u5907\u4efd\u8be6\u60c5","text":""},{"location":"zh/feature/backup_display/#\u67e5\u770b\u5907\u4efd\u8be6\u60c5","title":"\u67e5\u770b\u5907\u4efd\u8be6\u60c5","text":"<p>\u67e5\u770b\u7279\u5b9a\u5907\u4efd\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <pre><code>!!pb show 45\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb show 45\n[MCDR] [01:40:09] [PB@f133-worker-light/INFO]: [PB] ======== \u5907\u4efd#45 ========\n[MCDR] [01:40:09] [PB@f133-worker-light/INFO]: [PB] \u521b\u5efa\u65e5\u671f: 2025-08-24 23:50:07\n[MCDR] [01:40:09] [PB@f133-worker-light/INFO]: [PB] \u6ce8\u91ca: 2\n[MCDR] [01:40:09] [PB@f133-worker-light/INFO]: [PB] \u5b58\u50a8\u5927\u5c0f: 64.62MiB (54.6%)\n[MCDR] [01:40:09] [PB@f133-worker-light/INFO]: [PB] \u539f\u59cb\u5927\u5c0f: 118.39MiB\n[MCDR] [01:40:09] [PB@f133-worker-light/INFO]: [PB] \u521b\u5efa\u8005: \u63a7\u5236\u53f0\n[MCDR] [01:40:09] [PB@f133-worker-light/INFO]: [PB] \u6807\u7b7e: \u7a7a\n</code></pre>"},{"location":"zh/feature/backup_display/#\u5907\u4efd\u6807\u5fd7\u4f4d","title":"\u5907\u4efd\u6807\u5fd7\u4f4d","text":"<p>\u4f7f\u7528 <code>--flags</code> \u53c2\u6570\u65f6\uff0c\u5907\u4efd\u5217\u8868\u4f1a\u663e\u793a\u6807\u5fd7\u4f4d\uff1a</p> <pre><code>!!pb list --flags\n</code></pre> <p>\u6807\u5fd7\u4f4d\u8bf4\u660e\uff1a</p> \u6807\u5fd7 \u8bf4\u660e <code>H</code> \u9690\u85cf\u5907\u4efd <code>T</code> \u4e34\u65f6\u5907\u4efd <code>P</code> \u53d7\u4fdd\u62a4\u5907\u4efd <code>S</code> \u5b9a\u65f6\u5907\u4efd <p>\u793a\u4f8b\uff1a</p> <pre><code>[#65] [&gt;] [x] H-P- 119.26MiB 2025-01-02 14:00:00: \u79d8\u5bc6\u5907\u4efd\n[#62] [&gt;] [x] ---S 118.39MiB 2025-01-02 12:00:00: \u5b9a\u65f6\u5907\u4efd\n[#58] [&gt;] [x] -T-- 118.39MiB 2025-01-02 11:00:00: \u56de\u6863\u81f3#48\u524d\u7684\u81ea\u52a8\u5907\u4efd\n</code></pre>"},{"location":"zh/feature/backup_display/#\u5b9e\u7528\u547d\u4ee4","title":"\u5b9e\u7528\u547d\u4ee4","text":"<p>\u67e5\u770b\u6700\u8fd1\u7684 20 \u4e2a\u5907\u4efd</p> <pre><code>!!pb list --per-page 20\n</code></pre> <p>\u67e5\u770b\u7279\u5b9a\u521b\u5efa\u8005\u7684\u5907\u4efd</p> <pre><code>!!pb list --creator console:\n!!pb list --creator player:Fallen_Breath\n</code></pre> <p>\u67e5\u770b\u7279\u5b9a\u65f6\u95f4\u8303\u56f4\u7684\u5907\u4efd</p> <pre><code>!!pb list --from 20240101 --to 20240131\n</code></pre> <p>\u67e5\u770b\u6240\u6709\u5907\u4efd\uff08\u5305\u62ec\u9690\u85cf\u5907\u4efd\u3001\u4e34\u65f6\u5907\u4efd\uff09</p> <pre><code>!!pb list --all --flags\n</code></pre> <p>\u6309 ID \u5347\u5e8f\u67e5\u770b\u5907\u4efd</p> <pre><code>!!pb list --sort id\n</code></pre>"},{"location":"zh/feature/backup_edit/","title":"\u5907\u4efd\u7f16\u8f91","text":"<p>TODO</p>"},{"location":"zh/feature/backup_import/","title":"\u5907\u4efd\u5bfc\u5165\u5bfc\u51fa","text":"<p>TODO</p>"},{"location":"zh/feature/backup_restore/","title":"\u5907\u4efd\u8fd8\u539f\uff08\u56de\u6863\uff09","text":"<p>\u8fd8\u539f\u4e00\u4e2a\u5907\u4efd\uff0c\u4e5f\u56de\u6863\u64cd\u4f5c</p>"},{"location":"zh/feature/backup_restore/#\u56de\u6863\u6b65\u9aa4","title":"\u56de\u6863\u6b65\u9aa4","text":""},{"location":"zh/feature/backup_restore/#mcdr-\u73af\u5883","title":"MCDR \u73af\u5883","text":"<p>Prime Backup \u76ee\u524d\u4ec5\u652f\u6301\u5728 MCDR \u73af\u5883\u4e2d\u8fdb\u884c\u5907\u4efd\u56de\u6863</p> <p>\u5728 MCDR \u73af\u5883\u4e2d\u56de\u6863\u4e00\u4e2a\u5907\u4efd\uff0c\u53ea\u9700\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>!!pb back\n</code></pre> <p>\u6b64\u547d\u4ee4\u5c06\u56de\u6863\u81f3\u6700\u65b0\u7684\u975e\u4e34\u65f6\u5907\u4efd\u3002\u5982\u9700\u56de\u6863\u81f3\u7279\u5b9a\u5907\u4efd\uff0c\u53ef\u6307\u5b9a\u5907\u4efd ID\uff1a</p> <pre><code>!!pb back 78\n</code></pre> <p>\u793a\u4f8b\u63a7\u5236\u53f0\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb back 78\n[MCDR] [22:08:05] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] \u5c06\u8981\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:05] [PB@ecac-worker-heavy/INFO]: [PB] \u8bf7\u57281\u5206\u949f\u5185\u4f5c\u51fa\u9009\u62e9\u5e76\u8f93\u5165\u5bf9\u5e94\u6307\u4ee4:\n[MCDR] [22:08:05] [PB@ecac-worker-heavy/INFO]: [PB] - \u786e\u8ba4\u56de\u6863\u221a: !!pb confirm\n[MCDR] [22:08:05] [PB@ecac-worker-heavy/INFO]: [PB] - \u7ec8\u6b62\u56de\u6863\u00d7: !!pb abort\n&gt; !!pb confirm\n[MCDR] [22:08:08] [TaskExecutor/INFO]: [PB] \u6b63\u5728\u786e\u8ba4\u56de\u6863\u4efb\u52a1\n[MCDR] [22:08:08] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 10\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:09] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 9\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:10] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 8\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:11] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 7\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:12] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 6\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:13] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 5\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:14] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 4\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:15] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 3\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:16] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 2\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:17] [PB@ecac-worker-heavy/INFO] [prime_backup]: [PB] !!! 1\u79d2\u540e\u5c06\u56de\u6863\u81f3\u5907\u4efd#78: \u6d4b\u8bd5\u5907\u4efd\n[MCDR] [22:08:18] [PB@ecac-worker-heavy/INFO] [prime_backup]: Wait for server to stop\n[Server] [22:08:18] [Server thread/INFO]: Stopping the server\n[Server] [22:08:18] [Server thread/INFO]: Stopping server\n[Server] [22:08:18] [Server thread/INFO]: Saving players\n[Server] [22:08:18] [Server thread/INFO]: Saving worlds\n[Server] [22:08:18] [Server thread/INFO]: Saving chunks for level 'world'/minecraft:overworld\n[Server] [22:08:18] [Server thread/INFO]: ThreadedAnvilChunkStorage (world): All chunks are saved\n[Server] [22:08:18] [Server thread/INFO]: Saving chunks for level 'world'/minecraft:the_nether\n[Server] [22:08:18] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM-1): All chunks are saved\n[Server] [22:08:18] [Server thread/INFO]: Saving chunks for level 'world'/minecraft:the_end\n[Server] [22:08:18] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM1): All chunks are saved\n[Server] [22:08:18] [Server thread/INFO]: ThreadedAnvilChunkStorage (world): All chunks are saved\n[Server] [22:08:18] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM-1): All chunks are saved\n[Server] [22:08:18] [Server thread/INFO]: ThreadedAnvilChunkStorage (DIM1): All chunks are saved\n[MCDR] [22:08:19] [MainThread/INFO]: \u670d\u52a1\u5668\u8fdb\u7a0b\u5df2\u505c\u6b62\uff0c\u8fd4\u56de\u4ee3\u7801\u4e3a 0\n[MCDR] [22:08:19] [MainThread/INFO]: \u670d\u52a1\u7aef\u5df2\u5173\u95ed\n[MCDR] [22:08:19] [PB@ecac-worker-heavy/INFO] [prime_backup]: Creating backup of existing files to avoid idiot\n[MCDR] [22:08:19] [PB@ecac-worker-heavy/INFO] [prime_backup]: Scanning file for backup creation at path 'server', targets: ['world']\n[MCDR] [22:08:20] [PB@ecac-worker-heavy/INFO] [prime_backup]: Creating backup for ['world'] at path 'server', file cnt 4118, timestamp 1764526100048797, creator 'prime_backup:pre_restore', comment '__pb_translated__:pre_restore:78', tags {'temporary': True}\n[MCDR] [22:08:22] [PB@ecac-worker-heavy/INFO] [prime_backup]: Create backup #79 done, +6 blobs (size 6.43MiB / 7.28MiB)\n[MCDR] [22:08:22] [PB@ecac-worker-heavy/INFO] [prime_backup]: Restoring to backup #78 (fail_soft=False, verify_blob=True)\n[MCDR] [22:08:22] [PB@ecac-worker-heavy/INFO] [prime_backup]: Exporting Backup(id=78, timestamp=1763890381206484, creator='player:Fallen_Breath', comment='\u6d4b\u8bd5\u5907\u4efd', targets=['world'], tags={}, fileset_id_base=56, fileset_id_delta=88, file_count=4118, file_raw_size_sum=136177532, file_stored_size_sum=78537902) to directory server\n[MCDR] [22:08:36] [PB@ecac-worker-heavy/INFO] [prime_backup]: Export done\n[MCDR] [22:08:36] [PB@ecac-worker-heavy/INFO] [prime_backup]: Restore to backup #78 done, cost 16.95s (backup 2.67s, restore 14.28s), starting the server\n[MCDR] [22:08:36] [PB@ecac-worker-heavy/INFO]: \u6b63\u5728\u542f\u52a8\u670d\u52a1\u7aef\uff0c\u542f\u52a8\u53c2\u6570\u4e3a 'java -Xms1G -Xmx2G -jar server.jar'\n</code></pre> <p>\u793a\u4f8b\u6e38\u620f\u5185\u8f93\u51fa\uff1a</p> <p></p> <p>\u56de\u6863\u547d\u4ee4\u652f\u6301\u591a\u79cd\u5907\u4efd ID \u683c\u5f0f\uff1a</p> \u683c\u5f0f \u793a\u4f8b \u8bf4\u660e \u6b63\u6574\u6570 <code>!!pb back 12</code> \u56de\u6863\u81f3\u6307\u5b9a ID \u7684\u5907\u4efd <code>~</code> \u6216 <code>latest</code> <code>!!pb back ~</code> \u56de\u6863\u81f3\u6700\u65b0\u7684\u975e\u4e34\u65f6\u5907\u4efd \u76f8\u5bf9\u504f\u79fb <code>!!pb back ~1</code> \u56de\u6863\u81f3\u6700\u65b0\u5907\u4efd\u7684\u524d\u4e00\u4e2a\u5907\u4efd \u76f8\u5bf9\u504f\u79fb <code>!!pb back ~3</code> \u56de\u6863\u81f3\u6700\u65b0\u5907\u4efd\u7684\u524d\u4e09\u4e2a\u5907\u4efd <p>\u56de\u6863\u547d\u4ee4\u652f\u6301\u4ee5\u4e0b\u53ef\u9009\u53c2\u6570\uff1a</p> \u53c2\u6570 \u8bf4\u660e <code>--confirm</code> \u8df3\u8fc7\u786e\u8ba4\u6b65\u9aa4\uff0c\u76f4\u63a5\u5f00\u59cb\u56de\u6863 <code>--fail-soft</code> \u5728\u5bfc\u51fa\u8fc7\u7a0b\u4e2d\u8df3\u8fc7\u5bfc\u51fa\u5931\u8d25\u7684\u6587\u4ef6 <code>--no-verify</code> \u4e0d\u6821\u9a8c\u5bfc\u51fa\u6587\u4ef6\u7684\u5185\u5bb9 <p>\u793a\u4f8b\uff1a</p> <pre><code>!!pb back 12 --confirm --fail-soft\n</code></pre>"},{"location":"zh/feature/backup_restore/#\u547d\u4ee4\u884c\u73af\u5883","title":"\u547d\u4ee4\u884c\u73af\u5883","text":"<p>Prime Backup \u6682\u4e0d\u652f\u6301\u5728\u547d\u4ee4\u884c\u73af\u5883\u91cc\u6062\u590d\u5907\u4efd\uff08\u4e0b\u6b21\u4e00\u5b9a\uff01\uff09</p>"},{"location":"zh/feature/backup_restore/#\u76f8\u5173\u914d\u7f6e","title":"\u76f8\u5173\u914d\u7f6e","text":"<p>\u56de\u6863\u76f8\u5173\u7684\u914d\u7f6e\u57fa\u672c\u4f4d\u4e8e\u4e0b\u8ff0\u4e24\u4e2a\u5c0f\u8282\uff1a</p> <ul> <li>\u670d\u52a1\u5668\u914d\u7f6e\uff0c\u5305\u542b\u5728\u56de\u6863\u65f6\u4e0e MC \u670d\u52a1\u5668\u7684\u4ea4\u4e92\u547d\u4ee4</li> <li>\u5907\u4efd\u914d\u7f6e\uff0c\u5305\u542b\u56de\u6863\u65f6\u7684\u6587\u4ef6\u5904\u7406\u89c4\u5219</li> </ul>"},{"location":"zh/feature/backup_restore/#\u56de\u6863\u6d41\u7a0b\u8be6\u89e3","title":"\u56de\u6863\u6d41\u7a0b\u8be6\u89e3","text":"<p>\u4e0b\u9762\u5c06\u5217\u51fa PB \u56de\u6863\u5907\u4efd\u8fc7\u7a0b\u4e2d\u7684\u64cd\u4f5c\u6d41\u7a0b</p> <ol> <li>\u786e\u8ba4\u9636\u6bb5</li> <li>\u663e\u793a\u8981\u56de\u6863\u7684\u5907\u4efd\u4fe1\u606f</li> <li>\u7b49\u5f85\u7528\u6237\u786e\u8ba4\uff08\u9664\u975e\u4f7f\u7528 <code>--confirm</code> \u53c2\u6570\uff09</li> <li>\u7528\u6237\u53ef\u901a\u8fc7 <code>!!pb confirm</code> \u786e\u8ba4\u6216 <code>!!pb abort</code> \u7ec8\u6b62</li> <li>\u670d\u52a1\u5668\u5173\u95ed</li> <li>\u5982\u679c\u670d\u52a1\u5668\u6b63\u5728\u8fd0\u884c\uff0c\u6267\u884c 10s \u5012\u8ba1\u65f6\uff08\u9ed8\u8ba4\u914d\u7f6e <code>command.restore_countdown_sec: 10</code>\uff09</li> <li>\u5012\u8ba1\u65f6\u671f\u95f4\u53ef\u4ee5\u53d6\u6d88\u56de\u6863\u64cd\u4f5c</li> <li>\u505c\u6b62\u670d\u52a1\u5668\u5e76\u7b49\u5f85\u5b8c\u5168\u5173\u95ed</li> <li>\u56de\u6863\u524d\u7684\u5907\u4efd</li> <li>\u5982\u679c\u914d\u7f6e\u4e86 <code>backup_on_restore</code>\uff08\u9ed8\u8ba4\u503c <code>true</code>\uff09\uff0c\u5c06\u5728\u6b64\u65f6\u521b\u5efa\u4e00\u4e2a\u5907\u4efd\uff0c\u4ee5\u4fbf\u4e0d\u65f6\u4e4b\u9700</li> <li>\u5907\u4efd\u6ce8\u91ca\u4e3a\"\u56de\u6863\u81f3#X\u524d\u7684\u81ea\u52a8\u5907\u4efd\"</li> <li>\u6b64\u5907\u4efd\u5c06\u88ab\u6807\u8bb0\u4e3a\u4e34\u65f6\u5907\u4efd\uff0c\u5c06\u5728\u5907\u4efd\u6e05\u7406\u65f6\u7279\u6b8a\u5904\u7406</li> <li>\u5b9e\u9645\u56de\u6863\u64cd\u4f5c</li> <li>\u56de\u6536\u7ad9\u673a\u5236\uff1a\u5c06\u5907\u4efd\u76ee\u6807\u76ee\u5f55\u4e2d\u73b0\u6709\u7684\u6240\u6709\u6587\u4ef6\u79fb\u52a8\u5230\u4e34\u65f6\u56de\u6536\u7ad9\uff0c\u786e\u4fdd\u56de\u6863\u5931\u8d25\u65f6\u53ef\u5b8c\u5168\u56de\u6eda</li> <li>\u4fdd\u7559\u6587\u4ef6\u5904\u7406\uff1a\u5982\u679c\u914d\u7f6e\u4e86 <code>retain_patterns</code>\uff0c\u4f7f\u7528 gitignore \u98ce\u683c\u6a21\u5f0f\u5339\u914d\u5e76\u9694\u79bb\u8981\u4fdd\u7559\u7684\u6587\u4ef6</li> <li>\u6587\u4ef6\u5bfc\u51fa\uff1a\u4f7f\u7528\u591a\u7ebf\u7a0b\u5e76\u884c\u5c06\u5907\u4efd\u6587\u4ef6\u5bfc\u51fa\u5230\u76ee\u6807\u76ee\u5f55</li> <li>\u5c5e\u6027\u6062\u590d\uff1a\u6062\u590d\u6587\u4ef6\u6743\u9650\u3001\u65f6\u95f4\u6233\u3001\u6240\u6709\u8005\u548c\u7b26\u53f7\u94fe\u63a5\u76ee\u6807</li> <li>\u4fdd\u7559\u6587\u4ef6\u6062\u590d\uff1a\u6700\u540e\u5c06 <code>retain_patterns</code> \u4fdd\u7559\u7684\u6587\u4ef6\u79fb\u56de\u539f\u4f4d\u7f6e</li> <li>\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8</li> <li>\u5982\u679c\u670d\u52a1\u5668\u539f\u672c\u5728\u8fd0\u884c\uff0c\u91cd\u542f\u670d\u52a1\u5668</li> </ol>"},{"location":"zh/feature/database_inspect/","title":"\u6570\u636e\u5e93\u5185\u90e8\u5bf9\u8c61\u5ba1\u67e5","text":"<p>\u67e5\u770b\u548c\u5ba1\u67e5\u6570\u636e\u5e93\u4e2d\u7684\u5bf9\u8c61\u4fe1\u606f</p>"},{"location":"zh/feature/database_inspect/#\u6982\u8ff0","title":"\u6982\u8ff0","text":"<p>Prime Backup \u7684\u6570\u636e\u5e93\u67e5\u770b\u529f\u80fd\u5141\u8bb8\u4f60\u6df1\u5165\u67e5\u770b\u5907\u4efd\u7cfb\u7edf\u4e2d\u7684\u5404\u4e2a\u7ec4\u4ef6\uff0c\u5305\u62ec\u5907\u4efd\u3001\u6587\u4ef6\u96c6\u3001\u6587\u4ef6\u548c\u6570\u636e\u5bf9\u8c61</p>"},{"location":"zh/feature/database_inspect/#\u5907\u4efd\u67e5\u770b","title":"\u5907\u4efd\u67e5\u770b","text":""},{"location":"zh/feature/database_inspect/#\u67e5\u770b\u5907\u4efd\u8be6\u7ec6\u4fe1\u606f","title":"\u67e5\u770b\u5907\u4efd\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u67e5\u770b\u7279\u5b9a\u5907\u4efd\u7684\u5b8c\u6574\u4fe1\u606f\uff1a</p> <pre><code>!!pb database inspect backup &lt;backup_id&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>!!pb database inspect backup 45\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb database inspect backup 45\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] ======== \u5907\u4efd#45 ========\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] ID: 45\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u65f6\u95f4\u6233 (\u5fae\u79d2): 1756050607173147 (\u65e5\u671f: 2025-08-24 23:50:07)\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u521b\u5efa\u8005: \"console:\" (\u63a7\u5236\u53f0)\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u6ce8\u91ca: \"2\"\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u5907\u4efd\u76ee\u6807: world\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u6807\u7b7e: {}\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u57fa\u7840\u6587\u4ef6\u96c6: 39, \u589e\u91cf\u6587\u4ef6\u96c6: 54\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u539f\u59cb\u5927\u5c0f: 124137302 (118.39MiB)\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u50a8\u5b58\u5927\u5c0f: 67760442 (64.62MiB)\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] \u6587\u4ef6\u603b\u6570: 4106\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] - \u666e\u901a\u6587\u4ef6: 4068\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] - \u6587\u4ef6\u5939: 38\n[MCDR] [01:40:29] [PB@f133-worker-light/INFO]: [PB] - \u7b26\u53f7\u94fe\u63a5: 0\n</code></pre>"},{"location":"zh/feature/database_inspect/#\u6587\u4ef6\u67e5\u770b","title":"\u6587\u4ef6\u67e5\u770b","text":""},{"location":"zh/feature/database_inspect/#\u67e5\u770b\u5907\u4efd\u4e2d\u7684\u6587\u4ef6","title":"\u67e5\u770b\u5907\u4efd\u4e2d\u7684\u6587\u4ef6","text":"<p>\u67e5\u770b\u5907\u4efd\u4e2d\u7279\u5b9a\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <pre><code>!!pb database inspect file &lt;backup_id&gt; &lt;\u6587\u4ef6\u8def\u5f84&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a <pre><code>!!pb database inspect file 45 world/level.dat\n</code></pre></p> <p>\u793a\u4f8b\u8f93\u51fa\uff1a <pre><code>&gt; !!pb database inspect file 45 world/level.dat\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] ======== \u6587\u4ef6\u96c639\u7684\u6587\u4ef6level.dat ========\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u6240\u5c5e\u6587\u4ef6\u96c6: 39\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u8def\u5f84: world/level.dat\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u89d2\u8272: \u72ec\u7acb\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u6a21\u5f0f: 33206 (-rw-rw-rw-)\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u6570\u636e\u5bf9\u8c61\u54c8\u5e0c: 86c7b6e480e869effd9200abe045b3db\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u6570\u636e\u5bf9\u8c61\u538b\u7f29\u65b9\u6cd5: zstd\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u6570\u636e\u5bf9\u8c61\u539f\u59cb\u5927\u5c0f: 1528 (1.49KiB)\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u6570\u636e\u5bf9\u8c61\u50a8\u5b58\u5927\u5c0f: 1537 (1.50KiB)\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] Uid: 0\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] Gid: 0\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u4fee\u6539\u65f6\u95f4: 1731254748636839 (2024-11-11 00:05:48.636839)\n[MCDR] [01:40:53] [PB@f133-worker-light/INFO]: [PB] \u5305\u542b\u6b64\u6587\u4ef6\u7684\u5907\u4efd\u6570\u91cf: 3 (\u6837\u672c: #45, #43, #42)\n</code></pre></p>"},{"location":"zh/feature/database_inspect/#\u67e5\u770b\u6587\u4ef6\u96c6\u4e2d\u7684\u6587\u4ef6","title":"\u67e5\u770b\u6587\u4ef6\u96c6\u4e2d\u7684\u6587\u4ef6","text":"<p>\u67e5\u770b\u6587\u4ef6\u96c6\u4e2d\u7279\u5b9a\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <pre><code>!!pb database inspect file2 &lt;fileset_id&gt; &lt;\u6587\u4ef6\u8def\u5f84&gt;\n</code></pre> <p>\u5c55\u793a\u7684\u5185\u5bb9\u540c\u4e0a</p>"},{"location":"zh/feature/database_inspect/#\u6587\u4ef6\u96c6\u67e5\u770b","title":"\u6587\u4ef6\u96c6\u67e5\u770b","text":""},{"location":"zh/feature/database_inspect/#\u67e5\u770b\u6587\u4ef6\u96c6\u8be6\u7ec6\u4fe1\u606f","title":"\u67e5\u770b\u6587\u4ef6\u96c6\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u67e5\u770b\u7279\u5b9a\u6587\u4ef6\u96c6\u7684\u5b8c\u6574\u4fe1\u606f\uff1a</p> <pre><code>!!pb database inspect fileset &lt;fileset_id&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>!!pb database inspect fileset 87\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb database inspect fileset 87\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] ======== \u6587\u4ef6\u96c687 ========\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] ID: 87\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] \u7c7b\u578b: \u589e\u91cf\u6587\u4ef6\u96c6\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] \u6587\u4ef6\u5bf9\u8c61\u6570: 43\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] \u6587\u4ef6\u6570 (\u589e\u91cf): 22\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] \u539f\u59cb\u5927\u5c0f (\u589e\u91cf): 23620147 (22.53MiB)\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] \u50a8\u5b58\u5927\u5c0f (\u589e\u91cf): 19735961 (18.82MiB)\n[MCDR] [19:37:49] [PB@fc91-worker-light/INFO]: [PB] \u5173\u8054\u5907\u4efd\u6570: 1 (\u6837\u672c: #77)\n</code></pre>"},{"location":"zh/feature/database_inspect/#\u6570\u636e\u5bf9\u8c61\u67e5\u770b","title":"\u6570\u636e\u5bf9\u8c61\u67e5\u770b","text":""},{"location":"zh/feature/database_inspect/#\u67e5\u770b\u6570\u636e\u5bf9\u8c61\u8be6\u7ec6\u4fe1\u606f","title":"\u67e5\u770b\u6570\u636e\u5bf9\u8c61\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u67e5\u770b\u7279\u5b9a\u6570\u636e\u5bf9\u8c61\u7684\u5b8c\u6574\u4fe1\u606f\uff1a</p> <pre><code>!!pb database inspect blob &lt;\u54c8\u5e0c\u503c&gt;\n</code></pre> <p>\u53c2\u6570 <code>&lt;\u54c8\u5e0c\u503c&gt;</code> \u53ef\u4ee5\u662f\u5b8c\u6574\u54c8\u5e0c\u5b57\u7b26\u4e32\u7684\u4e00\u4e2a\u524d\u7f00\uff0c\u53ea\u8981\u4fdd\u8bc1\u552f\u4e00\u5373\u53ef</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>!!pb database inspect blob 8a3d\n!!pb database inspect blob 8a3d32b705a1274850798ae26ff56ba9\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb database inspect blob 8a3d\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] ======== \u6570\u636e\u5bf9\u8c618a3d32b705a12748 ========\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] \u54c8\u5e0c: 8a3d32b705a1274850798ae26ff56ba9\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] \u538b\u7f29\u65b9\u6cd5: zstd\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] \u539f\u59cb\u5927\u5c0f: 736 (736.00B)\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] \u50a8\u5b58\u5927\u5c0f: 745 (745.00B)\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] \u5173\u8054\u6587\u4ef6\u6570: 2\u3002\u6837\u672c\uff1a\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] 1. \u6587\u4ef6\u96c639, \u8def\u5f84: world/playerdata/6ccb4484-ca33-41ee-a809-fece13a26c21.dat\n[MCDR] [19:38:37] [PB@fc91-worker-light/INFO]: [PB] 2. \u6587\u4ef6\u96c656, \u8def\u5f84: world/playerdata/6ccb4484-ca33-41ee-a809-fece13a26c21.dat\n</code></pre> <p>\u82e5\u63d0\u4f9b\u7684\u54c8\u5e0c\u503c\u8fc7\u77ed\uff0c\u5bfc\u81f4\u65e0\u6cd5\u552f\u4e00\u5b9a\u4f4d\u4e00\u4e2a\u6570\u636e\u5bf9\u8c61\uff0c\u5219\u4f1a\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb database inspect blob 8a\n[MCDR] [19:39:53] [PB@fc91-worker-light/INFO]: [PB] \u7ed9\u5b9a\u7684\u54c8\u5e0c\u503c8a\u65e0\u6cd5\u552f\u4e00\u786e\u5b9a\u4e00\u4e2a\u6570\u636e\u5bf9\u8c61\n[MCDR] [19:39:53] [PB@fc91-worker-light/INFO]: [PB] \u627e\u5230\u4e86\u81f3\u5c113\u4e2a\u53ef\u80fd\u7684\u6570\u636e\u5bf9\u8c61: 8a92569c48895c60bf2977f1be9591f4, 8abd332ba5b579ca00d0d54e50b8bedd, 8ad9bfd69fa3e84b15e2aa803cac0e4c\n</code></pre>"},{"location":"zh/feature/database_maintain/","title":"\u6570\u636e\u5e93\u7ef4\u62a4","text":"<p>\u4e00\u81f4\u6027\u72b6\u6001\u5ba1\u67e5\u548c\u6570\u636e\u5e93\u6574\u7406</p>"},{"location":"zh/feature/database_maintain/#\u6570\u636e\u5e93\u9a8c\u8bc1","title":"\u6570\u636e\u5e93\u9a8c\u8bc1","text":"\u547d\u4ee4 \u8bf4\u660e <code>!!pb database validate blobs</code> \u9a8c\u8bc1\u6570\u636e\u5bf9\u8c61\u7684\u6b63\u786e\u6027\uff0c\u5982\u6570\u636e\u5927\u5c0f\u3001\u54c8\u5e0c\u503c <code>!!pb database validate files</code> \u9a8c\u8bc1\u6587\u4ef6\u5bf9\u8c61\u7684\u6b63\u786e\u6027\uff0c\u5982\u6587\u4ef6\u4e0e\u6570\u636e\u7684\u5173\u8054 <code>!!pb database validate filesets</code> \u9a8c\u8bc1\u6587\u4ef6\u96c6\u5bf9\u8c61\u7684\u6b63\u786e\u6027\uff0c\u5982\u6587\u4ef6\u96c6\u4e0e\u5176\u6587\u4ef6\u7684\u5173\u8054 <code>!!pb database validate backups</code> \u9a8c\u8bc1\u5907\u4efd\u5bf9\u8c61\u7684\u6b63\u786e\u6027\uff0c\u5982\u5907\u4efd\u4e0e\u6587\u4ef6\u96c6\u7684\u5173\u8054 <code>!!pb database validate all</code> \u9a8c\u8bc1\u4e0a\u8ff0\u5168\u90e8 <p>\u793a\u4f8b\uff1a</p> <pre><code>!!pb database validate all\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb database validate all\n[MCDR] [23:15:38] [PB@fc91-worker-heavy/INFO]: [PB] \u6b63\u5728\u9a8c\u8bc1\u6240\u6709\u6570\u636e\u5bf9\u8c61, \u8bf7\u7a0d\u7b49...\n[MCDR] [23:15:38] [PB@fc91-worker-heavy/INFO] [prime_backup]: Blob validation start\n[MCDR] [23:15:38] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 3000 / 4325 blobs\n[MCDR] [23:15:51] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 4325 / 4325 blobs\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Blob validation done: total 4325, validated 4325, ok 4325, bad 0\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5df2\u9a8c\u8bc14325/4325\u4e2a\u6570\u636e\u5bf9\u8c61\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5168\u90e84325\u4e2a\u6570\u636e\u5bf9\u8c61\u90fd\u662f\u5065\u5eb7\u7684\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u6b63\u5728\u9a8c\u8bc1\u6240\u6709\u6587\u4ef6\u5bf9\u8c61 (\u5305\u62ec\u6587\u4ef6\u3001\u6587\u4ef6\u5939\u3001\u7b26\u53f7\u94fe\u63a5), \u8bf7\u7a0d\u7b49...\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: File validation start\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 9147 / 9147 file objects\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: File validation done: total 9147, validated 9147, ok 9147, bad 0\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5df2\u9a8c\u8bc19147/9147\u4e2a\u6587\u4ef6\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5168\u90e89147\u4e2a\u6587\u4ef6\u90fd\u662f\u5065\u5eb7\u7684\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u6b63\u5728\u9a8c\u8bc1\u6240\u6709\u6587\u4ef6\u96c6, \u8bf7\u7a0d\u7b49...\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Fileset validation start\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 26 fileset objects\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 26 / 26 fileset objects\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Fileset validation done: total 26, validated 26, ok 26, bad 0\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5df2\u9a8c\u8bc126/26\u4e2a\u6587\u4ef6\u96c6\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5168\u90e826\u4e2a\u6587\u4ef6\u96c6\u90fd\u662f\u5065\u5eb7\u7684\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u6b63\u5728\u9a8c\u8bc1\u6240\u6709\u5907\u4efd, \u8bf7\u7a0d\u7b49...\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Backup validation start\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Validating 21 backup objects\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO] [prime_backup]: Backup validation done: total 21, validated 21, ok 21, bad 0\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5df2\u9a8c\u8bc121/21\u4e2a\u5907\u4efd\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u5168\u90e821\u4e2a\u5907\u4efd\u90fd\u662f\u5065\u5eb7\u7684\n[MCDR] [23:15:53] [PB@fc91-worker-heavy/INFO]: [PB] \u9a8c\u8bc1\u5b8c\u6210, \u8017\u65f615.32s\u3002\u6570\u636e\u5bf9\u8c61: \u5065\u5eb7, \u6587\u4ef6\u5bf9\u8c61: \u5065\u5eb7, \u6587\u4ef6\u96c6: \u5065\u5eb7, \u5907\u4efd: \u5065\u5eb7\n</code></pre>"},{"location":"zh/feature/database_maintain/#\u9a8c\u8bc1\u5185\u5bb9","title":"\u9a8c\u8bc1\u5185\u5bb9","text":"<p>\u6570\u636e\u5bf9\u8c61\uff1a</p> <ul> <li>\u6587\u4ef6\u5b58\u5728\u6027: \u68c0\u67e5\u6570\u636e\u5bf9\u8c61\u6587\u4ef6\u662f\u5426\u5b58\u5728\u4e8e\u5b58\u50a8\u4e2d</li> <li>\u5b8c\u6574\u6027: \u9a8c\u8bc1\u6570\u636e\u5bf9\u8c61\u6587\u4ef6\u7684\u54c8\u5e0c\u503c</li> <li>\u5927\u5c0f\u5339\u914d: \u68c0\u67e5\u5b58\u50a8\u5927\u5c0f\u4e0e\u8bb0\u5f55\u662f\u5426\u4e00\u81f4</li> <li>\u538b\u7f29\u9a8c\u8bc1: \u9a8c\u8bc1\u538b\u7f29\u6570\u636e\u7684\u5b8c\u6574\u6027</li> </ul> <p>\u6587\u4ef6\uff1a</p> <ul> <li>\u5f15\u7528\u5b8c\u6574\u6027: \u68c0\u67e5\u6587\u4ef6\u5f15\u7528\u7684\u6570\u636e\u5bf9\u8c61\u662f\u5426\u5b58\u5728</li> <li>\u6587\u4ef6\u96c6\u5173\u8054: \u9a8c\u8bc1\u6587\u4ef6\u4e0e\u6587\u4ef6\u96c6\u7684\u5173\u8054\u5173\u7cfb</li> <li>\u5143\u6570\u636e\u4e00\u81f4\u6027: \u68c0\u67e5\u6587\u4ef6\u5143\u6570\u636e\u662f\u5426\u5b8c\u6574</li> </ul> <p>\u6587\u4ef6\u96c6\uff1a</p> <ul> <li>\u5907\u4efd\u5173\u8054: \u9a8c\u8bc1\u6587\u4ef6\u96c6\u4e0e\u5907\u4efd\u7684\u5173\u8054\u5173\u7cfb</li> <li>\u6587\u4ef6\u8ba1\u6570: \u68c0\u67e5\u6587\u4ef6\u96c6\u4e2d\u7684\u6587\u4ef6\u6570\u91cf</li> <li>\u5927\u5c0f\u8ba1\u7b97: \u9a8c\u8bc1\u6587\u4ef6\u96c6\u5927\u5c0f\u8ba1\u7b97\u7684\u6b63\u786e\u6027</li> </ul> <p>\u5907\u4efd\uff1a</p> <ul> <li>\u6587\u4ef6\u96c6\u5f15\u7528: \u68c0\u67e5\u5907\u4efd\u5f15\u7528\u7684\u6587\u4ef6\u96c6\u662f\u5426\u5b58\u5728</li> <li>\u65f6\u95f4\u6233\u987a\u5e8f: \u9a8c\u8bc1\u5907\u4efd\u65f6\u95f4\u6233\u7684\u987a\u5e8f</li> <li>\u5143\u6570\u636e\u5b8c\u6574\u6027: \u68c0\u67e5\u5907\u4efd\u5143\u6570\u636e\u662f\u5426\u5b8c\u6574</li> </ul> <p>\u5f53\u9a8c\u8bc1\u53d1\u73b0\u95ee\u9898\u65f6\uff0c\u4f1a\u663e\u793a\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f\uff1a</p> <pre><code>[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO] [prime_backup]: Blob validation done: total 4325, validated 4325, ok 4322, bad 3\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] \u5df2\u9a8c\u8bc14325/4325\u4e2a\u6570\u636e\u5bf9\u8c61\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] \u53d1\u73b0\u4e863/4325\u4e2a\u5f02\u5e38\u6570\u636e\u5bf9\u8c61\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] \u6587\u4ef6\u7f3a\u5931\u7684\u6570\u636e\u5bf9\u8c61: 2\u4e2a\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] 1. 4fc02ad5e7508949634f012fb96c2968: blob file does not exist\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] 2. 54695a153daae89e685894ee966a277e: blob file does not exist\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] \u4fe1\u606f\u4e0d\u5339\u914d\u7684\u6570\u636e\u5bf9\u8c61: 1\u4e2a\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] 1. 8b36d71e250e25527f59b8fd9e0f2dce: stored size mismatch, expect 178, found 176\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] \u5f71\u54cd\u8303\u56f4: 6/9147\u4e2a\u6587\u4ef6\u5bf9\u8c61, 2/26\u4e2a\u6587\u4ef6\u96c6, 16/21\u4e2a\u5907\u4efd\n[MCDR] [23:19:19] [PB@fc91-worker-heavy/INFO]: [PB] \u89c1\u65e5\u5fd7\u6587\u4ef6 pb_files/logs/validate.log \u4ee5\u4e86\u89e3\u8fd9\u4e9b\u6570\u636e\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f\u53ca\u5f71\u54cd\u8303\u56f4\n</code></pre>"},{"location":"zh/feature/database_maintain/#\u6570\u636e\u5e93\u6e05\u7406","title":"\u6570\u636e\u5e93\u6e05\u7406","text":""},{"location":"zh/feature/database_maintain/#\u65e0\u6548\u6570\u636e\u6e05\u7406","title":"\u65e0\u6548\u6570\u636e\u6e05\u7406","text":"<p>\u6e05\u7406\u6570\u636e\u5e93\u4e2d\u7684\u5b64\u7acb\u5bf9\u8c61\u7b49\u65e0\u6548\u6570\u636e</p> <pre><code>!!pb database prune\n</code></pre> <p>\u6e05\u7406\u5185\u5bb9</p> <ul> <li>\u5b64\u7acb\u6570\u636e\u5bf9\u8c61: \u4e0d\u518d\u88ab\u4efb\u4f55\u6587\u4ef6\u5f15\u7528\u7684\u6570\u636e\u5bf9\u8c61</li> <li>\u5b64\u7acb\u6587\u4ef6: \u4e0d\u518d\u88ab\u4efb\u4f55\u6587\u4ef6\u96c6\u5f15\u7528\u7684\u6587\u4ef6</li> <li>\u5b64\u7acb\u6587\u4ef6\u96c6: \u4e0d\u518d\u88ab\u4efb\u4f55\u5907\u4efd\u5f15\u7528\u7684\u6587\u4ef6\u96c6</li> <li>\u57fa\u7840\u6587\u4ef6\u96c6\u538b\u7f29: \u4f18\u5316\u57fa\u7840\u6587\u4ef6\u96c6\u7684\u5b58\u50a8\u7ed3\u6784</li> <li>\u672a\u77e5\u6570\u636e\u5bf9\u8c61\u6587\u4ef6: \u6587\u4ef6\u7cfb\u7edf\u4e2d\u5b58\u5728\u4f46\u6570\u636e\u5e93\u4e2d\u65e0\u8bb0\u5f55\u7684\u6570\u636e\u5bf9\u8c61\u6587\u4ef6</li> </ul> <p>Note</p> <p>\u7edd\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4f60\u90fd\u65e0\u9700\u624b\u52a8\u6267\u884c\u6b64\u547d\u4ee4\u3002Prime Backup \u5728\u65e5\u5e38\u64cd\u4f5c\u4e2d\u662f\u4f1a\u786e\u4fdd\u6570\u636e\u5e93\u5904\u4e8e\u5e72\u51c0\u72b6\u6001</p>"},{"location":"zh/feature/database_maintain/#sqlite-\u6574\u7406","title":"SQLite \u6574\u7406","text":"<p>\u6574\u7406 SQLite \u6570\u636e\u5e93\u6587\u4ef6\uff0c\u51cf\u5c11\u78c1\u76d8\u5360\u7528</p> <pre><code>!!pb database vacuum\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>&gt; !!pb database vacuum\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] \u5f00\u59cb\u538b\u7f29\u6570\u636e\u5e93...\n[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] \u538b\u7f29\u5b8c\u6210: \u8017\u65f6 2.34s, \u5927\u5c0f 45.67MiB -&gt; 32.15MiB (-13.52MiB, 70.4%)\n</code></pre> <p>Note</p> <p>\u5728\u9ed8\u8ba4\u914d\u7f6e\u4e0b\uff0cPrime Backup \u4f1a\u81ea\u52a8\u5468\u671f\u6027\u6267\u884c SQLite \u6570\u636e\u5e93\u4efb\u52a1\uff0c\u56e0\u6b64\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4f60\u90fd\u65e0\u9700\u624b\u52a8\u6267\u884c\u6b64\u547d\u4ee4 </p>"},{"location":"zh/feature/database_operation/","title":"\u6570\u636e\u5e93\u64cd\u4f5c","text":"<p>\u914d\u7f6e\u8fc1\u79fb\u548c\u6570\u636e\u4fee\u6539\u64cd\u4f5c</p>"},{"location":"zh/feature/database_operation/#\u54c8\u5e0c\u7b97\u6cd5\u8fc1\u79fb","title":"\u54c8\u5e0c\u7b97\u6cd5\u8fc1\u79fb","text":"<p>Warning</p> <ul> <li>\u5f71\u54cd\u5168\u90e8\u5907\u4efd\u5185\u5bb9\uff0c\u5efa\u8bae\u5728\u505a\u597d\u989d\u5916\u7684\u6570\u636e\u5907\u4efd</li> <li>\u8fc1\u79fb\u8017\u65f6\u53ef\u80fd\u4f1a\u6bd4\u8f83\u957f\uff0c\u53d6\u51b3\u4e8e\u6587\u4ef6\u6570\u91cf\u3001\u78c1\u76d8 IO \u901f\u5ea6\u3002\u8fc1\u79fb\u4efb\u52a1\u4e0d\u652f\u6301\u4e2d\u65ad</li> </ul> <p>\u5c06\u6570\u636e\u5e93\u4e2d\u7684\u54c8\u5e0c\u7b97\u6cd5\u8fc1\u79fb\u5230\u65b0\u7684\u7b97\u6cd5\uff1a</p> <pre><code>!!pb database migrate_hash_method &lt;\u65b0\u54c8\u5e0c\u7b97\u6cd5&gt;\n</code></pre> <p>TODO</p>"},{"location":"zh/feature/database_operation/#\u538b\u7f29\u65b9\u6cd5\u8fc1\u79fb","title":"\u538b\u7f29\u65b9\u6cd5\u8fc1\u79fb","text":"<p>Warning</p> <ul> <li>\u5f71\u54cd\u5168\u90e8\u5907\u4efd\u5185\u5bb9\uff0c\u8bf7\u505a\u597d\u989d\u5916\u7684\u6570\u636e\u5907\u4efd</li> <li>\u8fc1\u79fb\u8017\u65f6\u53ef\u80fd\u4f1a\u6bd4\u8f83\u957f\uff0c\u53d6\u51b3\u4e8e\u6587\u4ef6\u6570\u91cf\u3001\u78c1\u76d8 IO \u901f\u5ea6\u3002\u8fc1\u79fb\u4efb\u52a1\u4e0d\u652f\u6301\u4e2d\u65ad</li> </ul> <pre><code>!!pb database migrate_compress_method &lt;\u65b0\u538b\u7f29\u65b9\u6cd5&gt;\n</code></pre> <p>TODO</p>"},{"location":"zh/feature/database_operation/#\u6587\u4ef6\u5220\u9664","title":"\u6587\u4ef6\u5220\u9664","text":""},{"location":"zh/feature/database_operation/#\u5220\u9664\u5907\u4efd\u4e2d\u7684\u6587\u4ef6","title":"\u5220\u9664\u5907\u4efd\u4e2d\u7684\u6587\u4ef6","text":"<p>\u5220\u9664\u5907\u4efd\u4e2d\u7684\u7279\u5b9a\u6587\u4ef6\uff1a</p> <pre><code>!!pb database delete file &lt;backup_id&gt; &lt;\u6587\u4ef6\u8def\u5f84&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>!!pb database delete file 59 world/cache/file.txt\n</code></pre>"},{"location":"zh/feature/database_operation/#\u9012\u5f52\u5220\u9664\u76ee\u5f55","title":"\u9012\u5f52\u5220\u9664\u76ee\u5f55","text":"<p>\u9012\u5f52\u5220\u9664\u5907\u4efd\u4e2d\u7684\u76ee\u5f55\u53ca\u5176\u6240\u6709\u5185\u5bb9\uff1a</p> <pre><code>!!pb database delete file &lt;backup_id&gt; &lt;\u76ee\u5f55\u8def\u5f84&gt; --recursive\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>!!pb database delete file 59 world/cache --recursive\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u4e0d\u80fd\u5220\u9664\u5907\u4efd\u7684\u6839\u76ee\u5f55</li> <li>\u5220\u9664\u76ee\u5f55\u9700\u8981 <code>--recursive</code> \u53c2\u6570</li> <li>\u9ed8\u8ba4\u9700\u8981\u7528\u6237\u786e\u8ba4\uff0c\u9632\u6b62\u8bef\u64cd\u4f5c</li> </ul>"},{"location":"zh/feature/database_overview/","title":"\u6570\u636e\u5e93\u6982\u89c8","text":"<p>\u67e5\u770b\u6570\u636e\u5e93\u7edf\u8ba1\u4fe1\u606f\u6982\u89c8\uff0c\u7528\u4e8e\u5feb\u901f\u4e86\u89e3 Prime Backup \u6570\u636e\u5e93\u7684\u4fe1\u606f\u60c5\u51b5</p>"},{"location":"zh/feature/database_overview/#\u547d\u4ee4","title":"\u547d\u4ee4","text":"<pre><code>!!pb database overview\n</code></pre>"},{"location":"zh/feature/database_overview/#\u529f\u80fd","title":"\u529f\u80fd","text":"<p>\u67e5\u770b Prime Backup \u6570\u636e\u5e93\u7684\u6574\u4f53\u7edf\u8ba1\u4fe1\u606f</p>"},{"location":"zh/feature/database_overview/#\u793a\u4f8b\u8f93\u51fa","title":"\u793a\u4f8b\u8f93\u51fa","text":"<pre><code>&gt; !!pb database overview\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] ======== \u6570\u636e\u5e93\u6982\u89c8 ========\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u6570\u636e\u5e93\u7248\u672c: 3\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u6570\u636e\u5e93\u6587\u4ef6\u5927\u5c0f: 2.67MiB\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u54c8\u5e0c\u7b97\u6cd5: xxh128\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u5907\u4efd\u6570: 22\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u6587\u4ef6\u6570: 70469 (9190 \u4e2a\u5bf9\u8c61)\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u6587\u4ef6\u603b\u5927\u5c0f: 2.50GiB\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u6570\u636e\u5bf9\u8c61\u6570: 4339\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u6570\u636e\u5bf9\u8c61\u603b\u50a8\u5b58\u5927\u5c0f: 451.68MiB (68.7%)\n[MCDR] [02:41:29] [PB@c8df-worker-light/INFO]: [PB] \u6570\u636e\u5bf9\u8c61\u603b\u539f\u59cb\u5927\u5c0f: 657.79MiB\n</code></pre>"}]}