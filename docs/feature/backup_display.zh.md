---
title: '备份查看'
---

查看和管理备份

## 备份列表

### 基本用法

查看备份列表，使用如下指令：

```
!!pb list
```

此命令将显示最近的 10 个备份，按时间降序排列。

示例输出：
```
> !!pb list
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 备份列表 (第1页/共5页)
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] [#59] [>] [x] 118.39MiB 2024-01-01 12:00:00: 香猪烤好了
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] [#58] [>] [x] 101.64MiB 2024-01-01 11:30:00: 定时备份
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] [#57] [>] [x] 85.21MiB 2024-01-01 11:00:00: 测试备份
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] <- 1/5 ->
```

### 列表格式说明

每个备份项的显示格式为：
```
[#ID] [>] [x] [标志位] 大小 创建时间: 注释
```

- **[#ID]**：备份 ID，点击可查看详情
- **[>]**：绿色回档按钮，点击可快速回档
- **[x]**：红色删除按钮，点击可删除备份（受保护备份为灰色）
- **[标志位]**：使用 `--flags` 参数时显示的备份标志
- **大小**：备份的存储大小
- **创建时间**：备份创建的时间戳
- **注释**：备份的注释信息，悬停显示创建者

### 分页功能

备份列表支持分页显示：

```
!!pb list 2
```

查看第 2 页的备份列表。

```
!!pb list --per-page 20
```

每页显示 20 个备份。

## 可选参数

备份列表命令支持以下可选参数：

| 参数                | 说明                              |
|-------------------|---------------------------------|
| `[页码]`            | 查看指定页码的备份                       |
| `--per-page <数量>` | 设置每页显示的备份数量 (1-1000)            |
| `--sort <排序方式>`   | 设置排序方式 (id, id_r, time, time_r) |
| `--creator <创建者>` | 仅显示指定创建者的备份                     |
| `--me`            | 仅显示当前用户创建的备份                    |
| `--from <起始日期>`   | 仅显示指定日期之后的备份                    |
| `--to <结束日期>`     | 仅显示指定日期之前的备份                    |
| `-a, --all`       | 显示所有备份（包括隐藏和临时备份）               |
| `--flag, --flags` | 显示备份标志位                         |

### 排序选项

- `id`：按备份 ID 升序排列
- `id_r`：按备份 ID 降序排列
- `time`：按创建时间升序排列
- `time_r`：按创建时间降序排列（默认）

### 日期格式

日期参数支持多种格式：
- `20240101`：年月日
- `2024-01-01`：年-月-日
- `2024/01/01`：年/月/日

## 备份详情

### 查看备份详情

查看特定备份的详细信息：

```
!!pb show 59
```

示例输出：
```
> !!pb show 59
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 备份 #59
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 创建日期: 2024-01-01 12:00:00
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 注释: 香猪烤好了
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 存储大小: 118.39MiB (压缩率 85%)
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 原始大小: 139.28MiB
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 创建者: console
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB] 标签(共2条):
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB]   scheduled: true
[MCDR] [00:46:11] [PB@51f5-worker-heavy/INFO] [prime_backup]: [PB]   protected: false
```

### 详情内容说明

- **备份 ID**：可点击的备份标识
- **创建日期**：备份创建的时间
- **注释**：可编辑的备份注释（有权限时）
- **存储大小**：压缩后的存储大小和压缩率
- **原始大小**：未压缩的文件总大小
- **创建者**：可点击查看该创建者的所有备份
- **标签**：备份的所有标签及其值

## 交互功能

### 点击操作

备份查看功能支持丰富的交互操作：

- **点击备份 ID**：跳转到该备份的详情页面
- **点击回档按钮 [>]**：快速回档到该备份
- **点击删除按钮 [x]**：删除该备份（受保护备份禁用）
- **点击创建者**：列出该创建者的所有备份
- **点击注释**：有权限时可编辑备份注释
- **点击分页导航**：快速翻页

### 悬停提示

- **备份注释**：悬停显示创建者信息
- **备份 ID**：悬停显示详细的时间戳和注释
- **按钮**：悬停显示操作说明

## 备份标志位

使用 `--flags` 参数时，备份列表会显示标志位：

```
!!pb list --flags
```

标志位说明：

| 标志  | 说明    |
|-----|-------|
| `H` | 隐藏备份  |
| `T` | 临时备份  |
| `P` | 受保护备份 |
| `S` | 定时备份  |

示例：
```
[#65] [>] [x] H-P- 119.26MiB 2024-01-01 14:00:00: 秘密备份
[#62] [>] [x] ---S 118.39MiB 2024-01-01 12:00:00: 定时备份
```

## 实用示例

### 查看最近的 20 个备份
```
!!pb list --per-page 20
```

### 查看特定创建者的备份
```
!!pb list --creator console
```

### 查看特定时间范围的备份
```
!!pb list --from 20240101 --to 20240131
```

### 查看所有备份（包括隐藏和临时）
```
!!pb list --all --flags
```

### 按 ID 升序查看备份
```
!!pb list --sort id
```

## 权限要求

- **备份列表**：权限等级 1
- **备份详情**：权限等级 1
- **编辑注释**：权限等级 2
- **删除备份**：权限等级 2

通过这些功能，您可以方便地查看和管理所有备份，快速找到需要的备份并进行相应操作。
